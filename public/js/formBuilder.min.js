function DateField(dataObj){var _fieldBase=new FieldBase;var _elementToAppendTo=_fieldBase._elementToAppendTo;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();this.renderDevelopmentView=renderDevelopmentView;this.getCompletedView=getCompletedView;this.getBootstrapView=getBootstrapView;var _text={};_text["labelIncludeYear"]="Include year";_text["labelIncludeTime"]="Include time";_text["dayOption"]="Day";_text["monthOption"]="Month";_text["yearOption"]="Year";_text["minuteOption"]="Min";_text["betweenHourAndMinute"]=":";_text["hourOption"]="Hr";_text["amPmOption"]="AM/PM";function renderDevelopmentView(){var div=document.createElement("DIV");var incYearTable=createTableForIncludeYear();incYearTable.setAttribute("class","dateTable");div.appendChild(incYearTable);var incTimeTable=createTableForIncludeTime();incTimeTable.setAttribute("class","timeTable");div.appendChild(incTimeTable);var dateAndTimeTable=createTableYearAndDate(true);dateAndTimeTable.setAttribute("class","dateAndTimeTable");div.appendChild(dateAndTimeTable);document.getElementById(_elementToAppendTo.substr(1)).appendChild(div)}function createTableForIncludeYear(){var table=document.createElement("table");var row=document.createElement("TR");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","includeYear");input.setAttribute("type","checkbox");var value=false;try{value=_dataObject.getDataItemObj().includeYear}catch(e){}if(value===true){input.setAttribute("checked","checked")}input.addEventListener("click",includeDateCheckBoxClicked,false);td_1.appendChild(input);var td_2=document.createElement("TD");td_2.setAttribute("colspan","4");var label=document.createElement("label");label.setAttribute("for","includeYear");var txtLabel=document.createTextNode(_text["labelIncludeYear"]);label.appendChild(txtLabel);td_2.appendChild(label);row.appendChild(td_1);row.appendChild(td_2);table.appendChild(row);return table}function createTableForIncludeTime(){var table=document.createElement("table");var row=document.createElement("TR");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","includeTime");input.setAttribute("type","checkbox");var value=false;try{value=_dataObject.getDataItemObj().includeTime}catch(e){}if(value===true){input.setAttribute("checked","checked")}input.addEventListener("click",includeTimeCheckBoxClicked,false);td_1.appendChild(input);var td_2=document.createElement("TD");td_2.setAttribute("colspan","4");var label=document.createElement("label");label.setAttribute("for","includeTime");var txtLabel=document.createTextNode(_text["labelIncludeTime"]);label.appendChild(txtLabel);td_2.appendChild(label);row.appendChild(td_1);row.appendChild(td_2);table.appendChild(row);return table}function createTableYearAndDate(isDevView){var value=false;try{value=_dataObject.getDataItemObj().includeYear}catch(e){}var table=document.createElement("table");var row=document.createElement("TR");var td_1=document.createElement("TD");var table_inner=document.createElement("table");table_inner.setAttribute("class","dateSelectTable");var tr_inner=document.createElement("tr");var td_inner_1=document.createElement("td");var select_1=document.createElement("select");var op_for_select_1=document.createElement("option");op_for_select_1.innerText=_text["dayOption"];select_1.appendChild(op_for_select_1);td_inner_1.appendChild(select_1);var select_2=document.createElement("select");var op_for_select_2=document.createElement("option");op_for_select_2.innerText=_text["monthOption"];select_2.appendChild(op_for_select_2);td_inner_1.appendChild(select_2);var select_3=document.createElement("select");if(isDevView)select_3.setAttribute("id","selectYear");select_3.setAttribute("class","selectYear");if(value===false){select_3.style.display="none"}var op_for_select_3=document.createElement("option");op_for_select_3.innerText=_text["yearOption"];select_3.appendChild(op_for_select_3);td_inner_1.appendChild(select_3);tr_inner.appendChild(td_inner_1);var td_inner_2=document.createElement("td");var img=document.createElement("img");if(isDevView)img.setAttribute("id","imgCalendar");img.setAttribute("class","dateAndTime");img.src=_fieldBase._calendar_png_src;if(value===false){img.style.display="none"}td_inner_2.appendChild(img);tr_inner.appendChild(td_inner_2);table_inner.appendChild(tr_inner);td_1.appendChild(table_inner);row.appendChild(td_1);var td_2=document.createElement("TD");var table_inner_2=document.createElement("table");if(isDevView)table_inner_2.setAttribute("id","timeSelectTable");table_inner_2.setAttribute("class","timeSelectTable");var incTime=false;try{incTime=_dataObject.getDataItemObj().includeTime}catch(e){}if(incTime===false){table_inner_2.style.display="none"}var tr_inner_2=document.createElement("tr");var td_inner_1_2=document.createElement("td");var select_4=document.createElement("select");var op_for_select_4=document.createElement("option");op_for_select_4.innerText=_text["hourOption"];select_4.appendChild(op_for_select_4);td_inner_1_2.appendChild(select_4);var text=document.createTextNode(_text["betweenHourAndMinute"]);td_inner_1_2.appendChild(text);var select_5=document.createElement("select");var op_for_select_5=document.createElement("option");op_for_select_5.innerText=_text["minuteOption"];select_5.appendChild(op_for_select_5);td_inner_1_2.appendChild(select_5);var select_6=document.createElement("select");var op_for_select_6=document.createElement("option");op_for_select_6.innerText=_text["amPmOption"];select_6.appendChild(op_for_select_6);td_inner_1_2.appendChild(select_6);tr_inner_2.appendChild(td_inner_1_2);var td_inner_2_2=document.createElement("td");var img2=document.createElement("img");if(isDevView)img2.setAttribute("id","imgClock");img2.setAttribute("class","dateAndTime");img2.src=_fieldBase._clock_png_src;td_inner_2_2.appendChild(img2);tr_inner_2.appendChild(td_inner_2_2);table_inner_2.appendChild(tr_inner_2);td_2.appendChild(table_inner_2);row.appendChild(td_2);var td_3=document.createElement("TD");row.appendChild(td_3);var td_4=document.createElement("TD");row.appendChild(td_4);var td_5=document.createElement("TD");row.appendChild(td_5);table.appendChild(row);return table}function includeDateCheckBoxClicked(){var _data=_dataObject.getDataItemObj();if(_data.includeYear===false){_dataObject.setIncludeYear(true,_fieldBase.saveDataItem);document.getElementById("selectYear").style.display="inline";document.getElementById("imgCalendar").style.display="inline"}else{_dataObject.setIncludeYear(false,_fieldBase.saveDataItem);document.getElementById("selectYear").style.display="none";document.getElementById("imgCalendar").style.display="none"}}function includeTimeCheckBoxClicked(){var _data=_dataObject.getDataItemObj();if(_data.includeTime===false){_dataObject.setIncludeTime(true,_fieldBase.saveDataItem);document.getElementById("timeSelectTable").style.display="inline-block"}else{_dataObject.setIncludeTime(false,_fieldBase.saveDataItem);document.getElementById("timeSelectTable").style.display="none"}}function label_1_key_pressed(){_dataObject.setFromLabel(this.value,_fieldBase.saveDataItem)}function label_2_key_pressed(){_dataObject.setToLabel(this.value,_fieldBase.saveDataItem)}function getCompletedView(){var tableDateTime=createTableYearAndDate(false);tableDateTime.setAttribute("class","dateAndTimeTable");var div=_fieldBase.addGeneralFieldsToCompletedView("dateField",tableDateTime,_dataObject);return div}function getBootstrapView(orderNro){var data=_dataObject.getDataItemObj();var input=document.createElement("input");if(data.includeTime){input.setAttribute("type","datetime-local");input.style.width="220px"}else{input.style.width="160px";input.setAttribute("type","date")}input.setAttribute("class","form-control");var div=_fieldBase.addGeneralFieldsToBootstrapForm("dateField",input,_dataObject,orderNro);return div}}function EditForm(state,number){var _state=state;var _fieldBase=new FieldBase;this.render=render;var _number=number;var _text={};_text["editTooltip"]="Edit";_text["duplicateTooltip"]="Duplicate";_text["deleteTooltip"]="Delete";function render(){var table=createTable();table.setAttribute("class","editForm "+_state);if(number)table.setAttribute("data-nro",_number);return table}function createTable(){var table=document.createElement("table");var row=document.createElement("TR");var td_1=document.createElement("TD");td_1.title=_text["editTooltip"];td_1.setAttribute("class","tdEdit");td_1.addEventListener("click",editClick,true);var img1=document.createElement("img");img1.setAttribute("class","edit");img1.src=_fieldBase._pencil_png_src;td_1.appendChild(img1);var td_2=document.createElement("TD");td_2.title=_text["duplicateTooltip"];td_2.setAttribute("class","tdCopy");var img2=document.createElement("img");img2.setAttribute("class","copy");img2.src=_fieldBase._copy_png_src;td_2.appendChild(img2);row.appendChild(td_1);row.appendChild(td_2);var td_3=document.createElement("TD");td_3.setAttribute("class","tdDel");td_3.title=_text["deleteTooltip"];var img3=document.createElement("img");img3.setAttribute("class","remove");img3.src=_fieldBase._remove2_png_src;td_3.appendChild(img3);row.appendChild(td_3);table.appendChild(row);return table}function editClick(){var itemNro=this.parentNode.parentNode.getAttribute("data-nro");itemNro=parseInt(itemNro)}function copyClick(){}}function FieldBase(){var _text={};_text["untitledQuestionText"]="Untitled Question";this._style="default";this._elementToAppendTo="#dev-td";this._parentElementToAddCSSClass="#dev-row";this._formBuilderIdentifier=".formBuilder";this._classesForIconGrip="ui-icon ui-icon-grip-dotted-horizontal";this._classesForSorting="ui-icon ui-icon-arrow-2-n-s handle";this._advSettingsSummaryId="advSettingsSummary";this._advSettingsContentId="#advSettingsContent";this._triangleClassEast="ui-icon ui-icon-triangle-1-e";this._triangleClassSouth="ui-icon ui-icon-triangle-1-s";this._triangleClassNorthSouth="ui-icon ui-icon-triangle-2-n-s";this._select_png_src="img/select_triangle.png";this._select2_png_src="img/select_triangle4.png";this._pencil_png_src="img/pencil.png";this._pencil_src="SVG/pencil.svg";this._copy_src="SVG/copy.svg";this._copy_png_src="img/copy.png";this._remove2_src="SVG/remove2.svg";this._remove2_png_src="img/remove2.png";this._calendar_png_src="img/calendar.png";this._calendar_src="SVG/calendar.svg";this._clock_png_src="img/clock.png";this._clock_src="SVG/clock.svg";this._watch_src="SVG/stopwatch.svg";this._watch_png_src="img/stopwatch.png";this._embed_src="SVG/embed.svg";this._embed_png_src="img/embed.png";this._pilcrow_src="SVG/pilcrow.svg";this._pilcrow_png_src="img/pilcrow.png";this._table_src="SVG/table.svg";this._table_png_src="img/table.png";this._table2_src="SVG/table2.svg";this._table2_png_src="img/table2.png";this._radio_checked_src="SVG/radio-checked.svg";this._radio_checked_png_src="img/radio-checked.png";this._checkbox_checked_src="SVG/checkbox-checked.svg";this._checkbox_checked_png_src="img/checkbox-checked.png";this._insert_template_png_src="img/insert-template.png";this.saveDataItem=saveDataItem;this.saveMainHeaderDataItem=saveMainHeaderDataItem;this.getDataItem=getDataItem;this.setActiveSelectField=setActiveSelectField;this.unsetActiveSelectField=unsetActiveSelectField;this.advancedSettingsArrowRight=advancedSettingsArrowRight;this.setAdvancedSettingsDescriptionText=setAdvancedSettingsDescriptionText;this.getAdvancedSettingsDescriptionText=getAdvancedSettingsDescriptionText;this.hideAdvancedSettingsDescriptionText=hideAdvancedSettingsDescriptionText;this.replaceCommaAndRemoveWhitespace=replaceCommaAndRemoveWhitespace;this.is_integer=is_integer;this.is_float=is_float;this.addGeneralFieldsToCompletedView=addGeneralFieldsToCompletedView;this.addGeneralFieldsToBootstrapForm=addGeneralFieldsToBootstrapForm;this.saveDataItemsToLocalStorage=saveDataItemsToLocalStorage;this.getLocalStorageDataItems=getLocalStorageDataItems;this.detectIE=detectIE;function saveDataItem(data){var dataJson=JSON.stringify(data);$('.formBuilder[data-state="active"]').attr("data-item",dataJson)}function saveMainHeaderDataItem(data){var dataJson=JSON.stringify(data);$('.formBuilder[data-state="mainHeader"]').attr("data-item",dataJson)}function getDataItem(){var dataJson=$(".formBuilder").attr("data-item");var data;if(dataJson){data=JSON.parse(dataJson)}return data}function setActiveSelectField(id){if(sessionStorage.activeSelectField){var elem=document.getElementById(sessionStorage.activeSelectField);if(elem)elem.style.borderColor="#D0D0D0"}sessionStorage.activeSelectField=id;document.getElementById(id).style.borderColor="#4d90fe"}function unsetActiveSelectField(){if(sessionStorage.activeSelectField){var element=document.getElementById(sessionStorage.activeSelectField);if(element)element.style.borderColor="#D0D0D0"}}function advancedSettingsArrowDown(){var div_triangle_s=document.getElementById("div_triangle_s");var div_triangle_e=document.getElementById("div_triangle_e");if(div_triangle_s.style.display=="none"){div_triangle_s.style.display="inline";div_triangle_e.style.display="none"}}function advancedSettingsArrowRight(){var div_triangle_s=document.getElementById("div_triangle_s");var div_triangle_e=document.getElementById("div_triangle_e");if(div_triangle_e.style.display=="none"){div_triangle_e.style.display="inline";div_triangle_s.style.display="none"}}function hideAdvancedSettingsDescriptionText(){document.getElementById("advSettingsSummary").style.display="none"}function setAdvancedSettingsDescriptionText(text){document.getElementById("advSettingsSummary").innerHTML=text}function getAdvancedSettingsDescriptionText(){return document.getElementById("advSettingsSummary").value}function replaceCommaAndRemoveWhitespace(text){text=text.replace(/[,]/g,".");return text.replace(/\s/g,"")}function is_float(value){if(/^[.]+$/.test(value))return false;return/^[0-9]*[.]?[0-9]*$/.test(value)}function is_integer(value){if(/^[0.]+$/.test(value))return false;return/^[0-9]+[.]?$/.test(value)}function addGeneralFieldsToCompletedView(type,element,dataObj){var data=dataObj.getDataItemObj();var div=document.createElement("div");div.setAttribute("class","c-view-item");var ef=new EditForm("inactive");div.appendChild(ef.render());var labelCont=document.createElement("label");labelCont.setAttribute("class","c-view-container");try{if(data.title.length>0){var title=document.createElement("span");title.setAttribute("class","c-view-title");var titleTxt=document.createTextNode(data.title);title.appendChild(titleTxt);labelCont.appendChild(title)}else if(type==="textField"||type==="paragraphField"){var title=document.createElement("span");title.setAttribute("class","c-view-title");var titleTxt=document.createTextNode(_text["untitledQuestionText"]);title.appendChild(titleTxt);labelCont.appendChild(title)}}catch(e){}try{if(data.helpText.length>0){var spanHelpTxt=document.createElement("span");spanHelpTxt.setAttribute("class","c-view-helpText");var helpText=document.createTextNode(data.helpText);spanHelpTxt.appendChild(helpText);labelCont.appendChild(spanHelpTxt)}}catch(e){}div.appendChild(labelCont);div.appendChild(element);return div}function addGeneralFieldsToBootstrapForm(type,element,dataObj,nro){var data=dataObj.getDataItemObj();var divFormGroup=document.createElement("div");divFormGroup.setAttribute("class","form-group");try{var title=document.createElement("label");if(type==="textField"||type==="paragraphField")title.setAttribute("for","input_"+nro);var titleTxt;if(data.title.length>0)titleTxt=document.createTextNode(data.title);else titleTxt=document.createTextNode(_text["untitledQuestionText"]);title.appendChild(titleTxt);divFormGroup.appendChild(title)}catch(e){}try{if(data.helpText.length>0){var p=document.createElement("p");p.setAttribute("class","help-block");var helpText=document.createTextNode(data.helpText);p.appendChild(helpText);divFormGroup.appendChild(p)}}catch(e){}if(type==="textField"||type==="paragraphField")element.setAttribute("id","input_"+nro);divFormGroup.appendChild(element);return divFormGroup}function saveDataItemsToLocalStorage(dataItems){localStorage.setItem("dataItems",dataItems)}function getLocalStorageDataItems(){return localStorage.getItem("dataItems")}function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");var trident=ua.indexOf("Trident/");if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10)}if(trident>0){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}return false}}function FormBuilder(){}FormBuilder.prototype.getFormData=function(){var dataItems=[];$(".formBuilder").each(function(index,element){var item=element.getAttribute("data-item");var state=element.getAttribute("data-state");var data;if(item){data=JSON.parse(item)}if(data){dataItems.push(item)}});return dataItems};function GeneralFields(type,dataObj){var _fieldBase=new FieldBase;var _elementToAppendTo=_fieldBase._elementToAppendTo;var _formBuilderIdentifier=_fieldBase._formBuilderIdentifier;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _advSettingsSummaryId=_fieldBase._advSettingsSummaryId;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _popup=new PopupMenu(type);var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _prevType=type;var _style=_fieldBase._style;var _data;var _dataObject;var _text={};_text["labelTextForSelectType"]="Question Type:";_text["labelTextForTitle"]="Question Title:";_text["placeholderForTitle"]="Untitled Question";_text["labelTextForHelp"]="Help Text:";_text["labelTextForLabel"]="Label Text:";_text["textForDoneButton"]="Done";_text["labelTextForRequired"]="Required question";_text["popAddItem"]="Add item";_text["popHeader1"]="Basic";_text["textField"]="Text";_text["paragraphField"]="Paragraph field";_text["radioButton"]="Multiple choice";_text["checkBox"]="Checkboxes";_text["list"]="Choose from a list";_text["popHeader2"]="Advanced";_text["scaleField"]="Scale";_text["grid"]="Grid";_text["dateField"]="Date";_text["timeField"]="Time";_text["popHeader3"]="Layout";_text["sectionHeader"]="Section header";_text["pageBreak"]="Page break";_text["image"]="Image";_text["video"]="Video";_text["advSettings"]="Advanced Settings";this.render=render;this.switchFieldType=switchFieldType;function render(){var table=document.createElement("TABLE");table.setAttribute("class","mainTable");var row_first=createFirstTableRow();table.appendChild(row_first);var row_1=createSelectTypeTableRow();row_1.setAttribute("class","tblMain");table.appendChild(row_1);var title=_dataObject.getDataItemObj().title;var row_2=createGeneralFieldsTableRow(_text["labelTextForTitle"],"inputTitle",title,_text["placeholderForTitle"]);row_2.setAttribute("class","tblMain");table.appendChild(row_2);var helpText=_dataObject.getDataItemObj().helpText;var row_3=createGeneralFieldsTableRow(_text["labelTextForHelp"],"inputHelpText",helpText);row_3.setAttribute("class","tblMain");table.appendChild(row_3);var label=_dataObject.getDataItemObj().label;var row_5=createDevTableRow();table.appendChild(row_5);var row_6=createAdvancedSettingsTableRow();if(type=="scaleField"||type=="dateField"||type=="timeField"){row_6.style.display="none"}table.appendChild(row_6);var row_7=createDoneButtonTableRow();row_7.setAttribute("class","tblMain");table.appendChild(row_7);return table}function createFirstTableRow(){var row=document.createElement("TR");row.setAttribute("class","toggle");row.setAttribute("id","first-row");var td=document.createElement("TD");td.setAttribute("colspan","2");row.appendChild(td);var td_2=document.createElement("TD");td_2.setAttribute("rowspan","3");td_2.appendChild(new EditForm("active").render());row.appendChild(td_2);return row}function createSelectTypeTableRow(){var row=document.createElement("TR");row.setAttribute("class","selectTypeTableRow");var td_1=document.createElement("TD");var label=document.createElement("label");var textSelectType=document.createTextNode(_text["labelTextForSelectType"]);label.appendChild(textSelectType);td_1.appendChild(label);row.appendChild(td_1);var td_2=document.createElement("TD");var menuDiv=_popup.createPopupMenu();td_2.appendChild(menuDiv);row.appendChild(td_2);return row}function createGeneralFieldsTableRow(labelText,inputId,inputText,placeholder){var row=document.createElement("TR");row.setAttribute("class","toggle");var td_1=document.createElement("TD");var label=document.createElement("label");var text=document.createTextNode(labelText);label.appendChild(text);td_1.appendChild(label);row.appendChild(td_1);var td_2=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id",inputId);if(inputText)input.setAttribute("value",inputText);else input.setAttribute("value","");input.setAttribute("type","text");if(placeholder)input.setAttribute("placeholder",placeholder);input.addEventListener("keyup",key_pressed,false);input.setAttribute("class","inputLong");td_2.appendChild(input);row.appendChild(td_2);return row}function switchFieldType(type,dataObj){_dataObject=dataObj;$(_fieldBase._parentElementToAddCSSClass).removeClass();document.getElementsByClassName("selectFieldText")[0].innerHTML=_text[type];if(_prevType=="radioButton"||_prevType=="list"||_prevType=="checkBox"){if(type=="radioButton"||type=="list"||type=="checkBox"){_prevType=type;return}}document.getElementById(_elementToAppendTo.substr(1)).innerHTML="";if(type=="scaleField"||type=="dateField"||type=="timeField"){document.getElementById("advanced").style.display="none"}else{document.getElementById(_advSettingsContentId.substr(1)).innerHTML="";_fieldBase.advancedSettingsArrowRight();document.getElementById(_advSettingsSummaryId).innerHTML="";document.getElementById("advanced").style.display="table-row"}_prevType=type}function updateRequiredField(){_dataObject.setRequiredQuestion(this.checked,_fieldBase.saveDataItem)}function key_pressed(){if(this.id==="inputTitle"){_dataObject.setTitle(this.value,_fieldBase.saveDataItem);return}else if(this.id==="inputHelpText"){_dataObject.setHelpText(this.value,_fieldBase.saveDataItem);return}else if(this.id==="inputLabel")_dataObject.setLabel(this.value,_fieldBase.saveDataItem)}function createDevTableRow(){var row=document.createElement("TR");row.setAttribute("class","toggle");row.setAttribute("id","dev-row");var td=document.createElement("TD");td.setAttribute("id","dev-td");td.setAttribute("colspan","3");row.appendChild(td);return row}function createAdvancedSettingsTableRow(){var row=document.createElement("TR");row.setAttribute("class","toggle");row.setAttribute("id","advanced");var td_1=document.createElement("TD");td_1.setAttribute("colspan","3");var div_cont=document.createElement("DIV");div_cont.setAttribute("id","divAdvanced");var table=document.createElement("table");table.addEventListener("click",advancedSettingsClick,false);table.setAttribute("id","tblAdvanced");var row_inner_1=document.createElement("TR");var td_inner_1=document.createElement("TD");var div_1=document.createElement("DIV");div_1.setAttribute("id","div_triangle_e");var span_triangle_e=document.createElement("SPAN");span_triangle_e.setAttribute("id","span_triangle_e");span_triangle_e.setAttribute("class","ui-icon ui-icon-triangle-1-e");div_1.appendChild(span_triangle_e);td_inner_1.appendChild(div_1);var div_2=document.createElement("DIV");div_2.setAttribute("id","div_triangle_s");var span_triangle_s=document.createElement("SPAN");span_triangle_s.setAttribute("id","span_triangle_s");span_triangle_s.setAttribute("class","ui-icon ui-icon-triangle-1-s");div_2.style.display="none";div_2.appendChild(span_triangle_s);td_inner_1.appendChild(div_2);row_inner_1.appendChild(td_inner_1);var td_inner_2=document.createElement("TD");var div_3=document.createElement("DIV");var span_header=document.createElement("SPAN");span_header.setAttribute("id","advSettingsHeader");var text=document.createTextNode(_text["advSettings"]);span_header.appendChild(text);div_3.appendChild(span_header);var span_text=document.createElement("SPAN");div_3.appendChild(span_text);td_inner_2.appendChild(div_3);row_inner_1.appendChild(td_inner_2);span_text.setAttribute("id","advSettingsSummary");table.appendChild(row_inner_1);div_cont.appendChild(table);var div_4=document.createElement("DIV");div_4.setAttribute("id","advSettingsContent");var span_title=document.createElement("SPAN");span_title.setAttribute("id","advSettingTitle");div_4.appendChild(span_title);div_cont.appendChild(div_4);td_1.appendChild(div_cont);row.appendChild(td_1);return row}function advancedSettingsClick(){var div_triangle_s=document.getElementById("div_triangle_s");var div_triangle_e=document.getElementById("div_triangle_e");if(div_triangle_s.style.display=="none"){div_triangle_s.style.display="inline";div_triangle_e.style.display="none";$(_advSettingsContentId).slideToggle("slow",function(){$("#advSettingsSummary").hide()})}else{div_triangle_e.style.display="inline";div_triangle_s.style.display="none";$(_advSettingsContentId).slideToggle("slow",function(){$("#advSettingsSummary").show()})}}function createCompleteTableRow(){var div_1=document.createElement("DIV");div_1.setAttribute("id","advSettingsRow2");var span_title=document.createElement("SPAN");span_title.setAttribute("id","questionTitle");div_1.appendChild(span_title);var div_2=document.createElement("DIV");var span_helpText=document.createElement("SPAN");span_helpText.setAttribute("id","questionHelpText");div_2.appendChild(span_helpText);var div_3=document.createElement("DIV");var span_title=document.createElement("SPAN");span_title.setAttribute("id","questionTitle");div_3.appendChild(span_title)}function createDoneButtonTableRow(){var row=document.createElement("TR");row.setAttribute("id","lastRow");row.setAttribute("class","toggle");var td_1=document.createElement("TD");var button=document.createElement("DIV");button.setAttribute("id","doneButton");var text=document.createTextNode(_text["textForDoneButton"]);button.appendChild(text);td_1.appendChild(button);row.appendChild(td_1);var td_2=document.createElement("TD");var table_inner=document.createElement("TABLE");table_inner.setAttribute("id","tblLastRowInner");var row_inner=document.createElement("TR");var td_1_inner=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","requiredQuestion");input.setAttribute("type","checkbox");input.addEventListener("change",updateRequiredField,false);var value=false;try{value=_dataObject.getDataItemObj().requiredQuestion}catch(e){}if(value===true)input.setAttribute("checked","checked");td_1_inner.appendChild(input);var td_2_inner=document.createElement("TD");var label=document.createElement("label");var text2=document.createTextNode(_text["labelTextForRequired"]);label.appendChild(text2);label.setAttribute("for","requiredQuestion");td_2_inner.appendChild(label);row_inner.appendChild(td_1_inner);row_inner.appendChild(td_2_inner);table_inner.appendChild(row_inner);td_2.appendChild(table_inner);row.appendChild(td_2);var td_3=document.createElement("TD");row.appendChild(td_3);return row}}function GridField(dataObj){var _fieldBase=new FieldBase;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _advField=new GridFieldAdvanced(_dataObject);var _style=_fieldBase._style;var _elementToAppendTo=_fieldBase._elementToAppendTo;var _parentElementToAddCSSClass=_fieldBase._parentElementToAddCSSClass;var _formBuilderIdentifier=_fieldBase._formBuilderIdentifier;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _advSettingsSummaryId=_fieldBase._advSettingsSummaryId;var _data;var _dataObject;var _rowText="Row";var _columnText="Column";var _labelText="Label";var _addRowText="Click to add row";var _addColumnText="Click to add column";this.renderDevelopmentView=renderDevelopmentView;this.renderCompletedView=renderCompletedView;this.getCompletedView=getCompletedView;this.getBootstrapView=getBootstrapView;function renderDevelopmentView(){var div=document.createElement("DIV");tableForRows=createGridFieldTable("row");tableForRows.setAttribute("id","gridRowTable");div.appendChild(tableForRows);var divSeparator=document.createElement("DIV");divSeparator.setAttribute("class","separator");div.appendChild(divSeparator);tableForColumns=createGridFieldTable("column");tableForColumns.setAttribute("id","gridColumnTable");div.appendChild(tableForColumns);if(_style===undefined||_style=="default"){div.setAttribute("class","dev-div-gridField");$(_parentElementToAddCSSClass).addClass("dev-row-gridField")}document.getElementById(_elementToAppendTo.substr(1)).appendChild(div);$("#gridRowTable").sortable({items:"tr[id!=lastGridRow]",handle:".handle",stop:updateRows,start:function(event,ui){var start_pos=ui.item.index();ui.item.data("start_pos",start_pos)},update:function(event,ui){var start_pos=ui.item.data("start_pos");var end_pos=ui.item.index();_dataObject.moveRowText(start_pos,end_pos,_fieldBase.saveDataItem)}});$("#gridColumnTable").sortable({items:"tr[id!=lastGridColumn]",handle:".handle",stop:updateColumns,start:function(event,ui){var start_pos=ui.item.index();ui.item.data("start_pos",start_pos)},update:function(event,ui){var start_pos=ui.item.data("start_pos");var end_pos=ui.item.index();_dataObject.moveColumnText(start_pos,end_pos,_fieldBase.saveDataItem)}});checkSortingAndDeleteSettingsForRowTable();checkSortingAndDeleteSettingsForColumnTable();document.getElementById(_advSettingsContentId.substr(1)).appendChild(_advField.render())}function createGridFieldTable(type){var table=document.createElement("TABLE");var rowCount=2;if(type=="row"){if(!(_data.rowsText===undefined)){rowCount=_data.rowsText.length+1}}else{if(!(_data.columnsText===undefined)){rowCount=_data.columnsText.length+1}}for(rowNro=1;rowNro<=rowCount;rowNro++){var text;if(type=="row"){if(_data.rowsText[rowNro-1]){var objectKey="row-"+rowNro;var text=_data.rowsText[rowNro-1][objectKey]}else{text=_rowText+" "+rowNro}}else{if(_data.columnsText[rowNro-1]){var objectKey="column-"+rowNro;var text=_data.columnsText[rowNro-1][objectKey]}else{text=_columnText+" "+rowNro}}var row;if(rowNro==rowCount){row=create_grid_table_row_or_column(text,type,"true",rowNro);if(type=="row"){row.setAttribute("id","lastGridRow")}else if(type=="column"){row.setAttribute("id","lastGridColumn")}}else{row=create_grid_table_row_or_column(text,type,"false",rowNro);row.setAttribute("class",type+"GridRow")}table.appendChild(row)}return table}function getValue(text){var indexOf=text.indexOf('":"')+3;text=text.substr(indexOf);text=text.substr(0,text.length-2);return text}function checkSortingAndDeleteSettingsForRowTable(){var rowCount=$("#gridRowTable tr").length;if(rowCount>=3){$(".rowGridRow > td:nth-child(2) span").visible();$(".rowGridRow > td:nth-child(4) span").visible()}else{$(".rowGridRow > td:nth-child(2) span").invisible();$(".rowGridRow > td:nth-child(4) span").invisible()}}function checkSortingAndDeleteSettingsForColumnTable(){var rowCount=$("#gridColumnTable tr").length;if(rowCount>=3){$(".columnGridRow > td:nth-child(2) span").visible();$(".columnGridRow > td:nth-child(4) span").visible()}else{$(".columnGridRow > td:nth-child(2) span").invisible();$(".columnGridRow > td:nth-child(4) span").invisible()}}function updateRows(){updateRowTableLabelNros();updateRowNro()}function updateRowTableLabelNros(){var rowNro;$(".rowGridRow").find("td:nth-child(1) label").each(function(index,label){rowNro=index+1;label.innerHTML=_rowText+" "+rowNro+" "+_labelText});rowNro=rowNro+1;$("#lastGridRow > td:nth-child(1) label").text(_rowText+" "+rowNro+" "+_labelText)}function updateRowNro(){$(".rowGridRow > td:nth-child(4) span").each(function(index){$(this).attr("data-row",index+1)})}function updateColumns(){updateColumnTableLabelNros();updateColumnNro()}function updateColumnTableLabelNros(){var columnNro;$(".columnGridRow").find("td:nth-child(1) label").each(function(index,label){columnNro=index+1;
label.innerHTML=_columnText+" "+columnNro+" "+_labelText});columnNro=columnNro+1;$("#lastGridColumn > td:nth-child(1) label").text(_columnText+" "+columnNro+" "+_labelText)}function updateColumnNro(){$(".columnGridRow > td:nth-child(4) span").each(function(index){$(this).attr("data-column",index+1)})}function create_grid_table_row_or_column(text,type,isLastRow,rowNro){var row=document.createElement("TR");var columnCount=5;var tds=[];for(columnNro=1;columnNro<=columnCount;columnNro++){var td=document.createElement("TD");if(columnNro==1){var div=document.createElement("DIV");div.setAttribute("class","td1Grid");if(type=="row"){var labelForRowItem=document.createElement("LABEL");var textForRowLabel=document.createTextNode(_rowText+" "+rowNro+" "+_labelText);labelForRowItem.appendChild(textForRowLabel);div.appendChild(labelForRowItem);td.appendChild(div)}else if(type=="column"){var labelForColumnItem=document.createElement("LABEL");var textForColumnLabel=document.createTextNode(_columnText+" "+rowNro+" "+_labelText);labelForColumnItem.appendChild(textForColumnLabel);div.appendChild(labelForColumnItem);td.appendChild(div)}if(isLastRow=="true"){if(type=="row"){td.addEventListener("click",grid_last_row_onclick,false)}else if(type=="column"){td.addEventListener("click",grid_last_column_onclick,false)}}tds.push(td)}else if(columnNro==2){if(isLastRow=="false"){var div=document.createElement("DIV");div.setAttribute("class","td2Grid");var span=document.createElement("SPAN");var classes=_fieldBase._classesForSorting;span.setAttribute("class",classes);div.appendChild(span);td.appendChild(div)}if(isLastRow=="true"){if(type=="row"){td.addEventListener("click",grid_last_row_onclick,false)}else if(type=="column"){td.addEventListener("click",grid_last_column_onclick,false)}}tds.push(td)}else if(columnNro==3){var input2=document.createElement("INPUT");input2.setAttribute("type","text");if(isLastRow=="true"){input2.disabled=true;if(type=="row"){input2.setAttribute("value",_addRowText);td.addEventListener("click",grid_last_row_onclick,false)}else if(type=="column"){input2.setAttribute("value",_addColumnText);td.addEventListener("click",grid_last_column_onclick,false)}}else{input2.setAttribute("value",text);if(type=="row"){input2.addEventListener("keyup",row_key_pressed,false)}else if(type=="column"){input2.addEventListener("keyup",column_key_pressed,false)}}td.appendChild(input2);tds.push(td)}else if(columnNro==4){if(isLastRow=="false"){var div=document.createElement("DIV");div.setAttribute("class","td4Grid");var span=document.createElement("SPAN");if(type=="row"){span.setAttribute("class","gridRowDelete");span.setAttribute("data-row",rowNro);span.addEventListener("click",delete_grid_row_onclick,false)}else if(type=="column"){span.setAttribute("class","gridColumnDelete");span.setAttribute("data-column",rowNro);span.addEventListener("click",delete_grid_column_onclick,false)}var textNode=document.createTextNode("x");span.appendChild(textNode);div.appendChild(span);td.appendChild(div)}tds.push(td)}else if(columnNro==5){tds.push(td)}}for(k=0;k<tds.length;k++){row.appendChild(tds[k])}return row}function row_key_pressed(){var str=this.parentNode.parentNode.childNodes[3].childNodes[0].childNodes[0].getAttribute("data-row");var rowNro=parseInt(str);_dataObject.updateRowText(rowNro,this.value,_fieldBase.saveDataItem)}function column_key_pressed(){var str=this.parentNode.parentNode.childNodes[3].childNodes[0].childNodes[0].getAttribute("data-column");var rowNro=parseInt(str);_dataObject.updateColumnText(rowNro,this.value,_fieldBase.saveDataItem)}function delete_grid_row_onclick(){var str=this.getAttribute("data-row");console.log("data-row: "+str);var rowNro=parseInt(str);_dataObject.removeRowByUsingRowNro(rowNro,_fieldBase.saveDataItem);$("#gridRowTable").find("tr:nth-child("+rowNro+") ").remove();checkSortingAndDeleteSettingsForRowTable();updateRows();if(rowNro>1)rowNro=rowNro-1;$("#gridRowTable").find("tr:nth-child("+rowNro+") > td:nth-child(3) > input").select()}function delete_grid_column_onclick(){var str=this.getAttribute("data-column");console.log("data-column: "+str);var columnNro=parseInt(str);_dataObject.removeColumnByUsingColumnNro(columnNro,_fieldBase.saveDataItem);$("#gridColumnTable").find("tr:nth-child("+columnNro+") ").remove();checkSortingAndDeleteSettingsForColumnTable();updateColumns();if(columnNro>1)columnNro=columnNro-1;$("#gridColumnTable").find("tr:nth-child("+columnNro+") > td:nth-child(3) > input").select()}function grid_last_row_onclick(){var rowNumber=_data.rowsText.length+1;var rowText=_rowText+" "+rowNumber;_dataObject.addRow(rowText,_fieldBase.saveDataItem);new_row=create_grid_table_row_or_column(rowText,"row","false",rowNumber);new_row.setAttribute("class","rowGridRow");$("#lastGridRow").before(new_row);checkSortingAndDeleteSettingsForRowTable();updateRowTableLabelNros();$("#gridRowTable").find("tr:nth-child("+rowNumber+") > td:nth-child(3) > input").select()}function grid_last_column_onclick(){var columnNumber=_data.columnsText.length+1;var columnText=_columnText+" "+columnNumber;_dataObject.addColumn(columnText,_fieldBase.saveDataItem);new_row=create_grid_table_row_or_column(columnText,"column","false",columnNumber);new_row.setAttribute("class","columnGridRow");$("#lastGridColumn").before(new_row);checkSortingAndDeleteSettingsForColumnTable();updateColumnTableLabelNros();$("#gridColumnTable").find("tr:nth-child("+columnNumber+") > td:nth-child(3) > input").select()}function renderCompletedView(){$(_formBuilderIdentifier).append("<p>Grid</p>")}function getCompletedView(){_data=_dataObject.getDataItemObj();var table=document.createElement("table");table.setAttribute("class","c-view-grid-table");var thead=document.createElement("thead");var tr_1=document.createElement("tr");tr_1.setAttribute("class","c-view-grid-tr");var columnWidth;columnWidth=Math.round(650/_data.columnsText.length);if(columnWidth>100)columnWidth=90;for(columnNro=0;columnNro<=_data.columnsText.length;columnNro++){var td=document.createElement("td");if(columnNro>=1){var div=document.createElement("div");var objectKey="column-"+columnNro;var optionText=_data.columnsText[columnNro-1][objectKey];div.innerText=optionText;td.appendChild(div);td.width=columnWidth}tr_1.appendChild(td)}thead.appendChild(tr_1);table.appendChild(thead);var tbody=document.createElement("tbody");for(rowNro=1;rowNro<=_data.rowsText.length;rowNro++){var tr=document.createElement("tr");tr.setAttribute("class","c-view-grid-tr");for(columnNro=0;columnNro<=_data.columnsText.length;columnNro++){var td=document.createElement("td");if(columnNro===0){var div=document.createElement("div");var objectKey="row-"+rowNro;var optionText=_data.rowsText[rowNro-1][objectKey];div.innerText=optionText;td.appendChild(div)}else if(columnNro>=1){var inputRadio=document.createElement("INPUT");inputRadio.setAttribute("type","radio");inputRadio.addEventListener("click",stopDefAction,false);inputRadio.setAttribute("class","c-view-grid-column");td.appendChild(inputRadio);td.width=columnWidth}tr.appendChild(td)}tbody.appendChild(tr)}table.appendChild(tbody);var div=_fieldBase.addGeneralFieldsToCompletedView("grid",table,_dataObject);return div}function getBootstrapView(orderNro){_data=_dataObject.getDataItemObj();var table=document.createElement("table");table.setAttribute("class","table table-striped");var thead=document.createElement("thead");var tr_1=document.createElement("tr");var columnWidth;columnWidth=Math.round(650/_data.columnsText.length);if(columnWidth>100)columnWidth=90;for(columnNro=0;columnNro<=_data.columnsText.length;columnNro++){var td=document.createElement("td");if(columnNro>=1){var objectKey="column-"+columnNro;var optionText=_data.columnsText[columnNro-1][objectKey];td.innerText=optionText;td.setAttribute("class","text-center")}tr_1.appendChild(td)}thead.appendChild(tr_1);table.appendChild(thead);var tbody=document.createElement("tbody");for(rowNro=1;rowNro<=_data.rowsText.length;rowNro++){var tr=document.createElement("tr");for(columnNro=0;columnNro<=_data.columnsText.length;columnNro++){var td=document.createElement("td");if(columnNro===0){var objectKey="row-"+rowNro;var optionText=_data.rowsText[rowNro-1][objectKey];td.innerText=optionText}else if(columnNro>=1){var inputRadio=document.createElement("INPUT");inputRadio.setAttribute("type","radio");inputRadio.setAttribute("name","group_"+orderNro+" row_"+rowNro);td.appendChild(inputRadio);td.setAttribute("class","text-center")}tr.appendChild(td)}tbody.appendChild(tr)}table.appendChild(tbody);var div=_fieldBase.addGeneralFieldsToBootstrapForm("grid",table,_dataObject);return div}function stopDefAction(evt){evt.preventDefault()}}function GridFieldAdvanced(dataObj){var _fieldBase=new FieldBase;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _inputError=false;this.render=render;var _text={};_text["labelLimitToOneResponse"]="Limit to one response per column";_text["labelShuffleOptionOrder"]="Shuffle option order";_text["placeholderNumber"]="Number";_text["labelNumber"]="and";_text["placeholderText"]="Text";_text["placeholderRegExp"]="Pattern";_text["placeholderErrorText"]="Custom error text";_text["limitToOneResponseMessage"]="Please don't select more than one response per column";_text["startOfValidationSummary"]="Validation:";_text["andWord"]="and";_text["optionsWord"]="options";_text["shuffleOnText"]="Shuffle: on";var _select2_text={};_select2_text[0]=new Array(3);_select2_text[0][0]="Select at least";_select2_text[0][1]="Select at most";_select2_text[0][2]="Select exactly";var _select2_text_summary={};_select2_text_summary[0]=new Array(3);_select2_text_summary[0][0]="Must select at least";_select2_text_summary[0][1]="Must select at most";_select2_text_summary[0][2]="Must select exactly";var _select2_id={};_select2_id[0]=new Array(3);_select2_id[0][0]="select_at_least";_select2_id[0][1]="select_at_most";_select2_id[0][2]="select_exactly";function render(){$(_advSettingsContentId).hide();var div=document.createElement("DIV");var datValTable=createTableLimitResponsePerColumn();datValTable.setAttribute("class","advancedTableAlt2");datValTable.setAttribute("id","setValidationTable");div.appendChild(datValTable);var shuffleTable=createTableForShuffleOptionOrder();shuffleTable.setAttribute("class","advancedTable");div.appendChild(shuffleTable);updateSummaryText();return div}function createTableLimitResponsePerColumn(){var table=document.createElement("table");var row=document.createElement("TR");row.setAttribute("class","dataValidationTableRow");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","dataValidation");input.setAttribute("type","checkbox");var limit=false;try{limit=_dataObject.getDataItemObj().advancedSettings.limitOneResponsePerColumn}catch(e){}if(limit===true){input.setAttribute("checked","checked")}input.addEventListener("click",checkBoxClicked,false);td_1.appendChild(input);var td_2=document.createElement("TD");var div=document.createElement("DIV");var label=document.createElement("label");label.setAttribute("for","dataValidation");var txtLabel=document.createTextNode(_text["labelLimitToOneResponse"]);label.appendChild(txtLabel);div.appendChild(label);td_2.appendChild(div);row.appendChild(td_1);row.appendChild(td_2);var td_3=document.createElement("TD");var errorText;errorText=_dataObject.getDataItemObj().advancedSettings.errorText;if(!errorText)errorText="";var errorInput=createInputFieldForErrorText(errorText,limit);td_3.appendChild(errorInput);row.appendChild(td_3);table.appendChild(row);return table}function createInputFieldForErrorText(text,validate){var div=document.createElement("DIV");div.setAttribute("id","divErrorText");var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputErrorText");input_1.setAttribute("type","text");input_1.setAttribute("placeholder",_text["placeholderErrorText"]);input_1.addEventListener("keyup",error_key_pressed,false);input_1.value=text;if(!validate)input_1.disabled=true;div.appendChild(input_1);return div}function createTableForShuffleOptionOrder(){var table=document.createElement("table");var row=document.createElement("TR");row.setAttribute("class","shuffleOptionOrderTableRow");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","shuffle");input.setAttribute("type","checkbox");var value=false;try{value=_dataObject.getDataItemObj().advancedSettings.shuffleOrder}catch(e){}if(value===true){input.setAttribute("checked","checked")}$(_advSettingsContentId).hide();input.addEventListener("click",shuffleCheckBoxClicked,false);td_1.appendChild(input);var td_2=document.createElement("TD");td_2.setAttribute("colspan","4");var label=document.createElement("label");label.setAttribute("for","shuffle");var txtLabel=document.createTextNode(_text["labelShuffleOptionOrder"]);label.appendChild(txtLabel);td_2.appendChild(label);row.appendChild(td_1);row.appendChild(td_2);table.appendChild(row);_text["shuffleOnText"];return table}function checkBoxClicked(){var _data=_dataObject.getDataItemObj();if(_data.advancedSettings.limitOneResponsePerColumn===false){_dataObject.limitOneResponsePerColumn(true,_fieldBase.saveDataItem);document.getElementById("inputErrorText").disabled=false}else{_dataObject.limitOneResponsePerColumn(false);_dataObject.setErrorText("",_fieldBase.saveDataItem);document.getElementById("inputErrorText").value="";document.getElementById("inputErrorText").disabled=true}updateSummaryText()}function shuffleCheckBoxClicked(){var shuffleOrder=_dataObject.getDataItemObj().advancedSettings.shuffleOrder;if(shuffleOrder==false){_dataObject.shuffleOrder(true,_fieldBase.saveDataItem)}else{_dataObject.shuffleOrder(false,_fieldBase.saveDataItem)}updateSummaryText()}function error_key_pressed(){_dataObject.setErrorText(this.value,_fieldBase.saveDataItem)}function updateSummaryText(){var limit=_dataObject.getDataItemObj().advancedSettings.limitOneResponsePerColumn;var shuffle=_dataObject.getDataItemObj().advancedSettings.shuffleOrder;var desc_text="";if(limit){desc_text=_text["startOfValidationSummary"]+" "+_text["limitToOneResponseMessage"];if(shuffle){desc_text=desc_text+"; "+_text["shuffleOnText"]}}else{if(shuffle){desc_text=_text["shuffleOnText"]}}_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}}$(document).ready(function(){var _fieldBase=new FieldBase;var _dataObj;var _genFields;var _field;var _prevType="";var _prevFieldType="";var headerFound=false;$(".formBuilder").each(function(index,element){var item=element.getAttribute("data-item");var state=element.getAttribute("data-state");var data;if(item){data=JSON.parse(item)}if(data){var dataObj=createDataObject(data.type);dataObj.initialize(data.type,data);var field=createFieldObject(data.type,dataObj);if(data.type!=="mainHeader"){$(element).append(field.getCompletedView());if(!state)$(element).attr("data-state","inactive")}else{$(element).append(field.renderDevelopmentView());$(element).attr("data-state","mainHeader");headerFound=true}}else{var popup=new PopupMenu;$(element).append(popup.createPopupMenu());$(element).attr("data-state","addItem")}});if(!headerFound){var dataObj=createDataObject("mainHeader");dataObj.initialize("mainHeader",undefined);var divMainHeader=createFormBuilderDivForMainHeader(JSON.stringify(dataObj.getDataItemObj()));$("body").append(divMainHeader);var mainHeader=$('.formBuilder[data-state="mainHeader"]').detach();$("div.formBuilder").before(mainHeader);var field=createFieldObject("mainHeader",dataObj);$('.formBuilder[data-state="mainHeader"]').append(field.renderDevelopmentView())}$("body").sortable({items:'.formBuilder[data-state="inactive"]',delay:250,stop:clearCSSAttributes});$("body").delegate('.formBuilder[data-state="inactive"]',"click",function(event){if($(event.target).closest(".editForm").length>0){return}this.setAttribute("class","formBuilder");var formBuilder=$(event.target);var item=$(event.target).attr("data-item");var state=$(event.target).attr("data-state");if(!item){item=$(event.target).closest(".formBuilder").attr("data-item");state=$(event.target).closest(".formBuilder").attr("data-state")}var data;if(item){data=JSON.parse(item)}if(item&&data){if(!state||state==="inactive"){$('.formBuilder[data-state="active"]').empty();if(_field)$('.formBuilder[data-state="active"]').append(_field.getCompletedView());$('.formBuilder[data-state="active"]').attr("data-state","inactive");$(event.target).closest(".formBuilder").attr("data-state","active");var dataObj=createDataObject(data.type);dataObj.initialize(data.type,data);_field=createFieldObject(data.type,dataObj);_genFields=new GeneralFields(data.type,dataObj);$('.formBuilder[data-state="active"]').empty();if(data.type!=="sectionHeader"){$('.formBuilder[data-state="active"]').append(_genFields.render());_field.renderDevelopmentView()}else{$('.formBuilder[data-state="active"]').append(_field.renderDevelopmentView())}_prevType=data.type}}});$(document).on("click","table.fieldMenuItem",function(event){$(".popMenuTable").hide();var selectedFormBuilder=$(event.target).closest(".formBuilder");var item=selectedFormBuilder.attr("data-item");var state=selectedFormBuilder.attr("data-state");var popClass=this.getAttribute("data-fieldType");popClass=popClass.substr(3);var firstLetter=popClass.substr(0,1).toLowerCase();popClass=firstLetter+popClass.substr(1);if(state){if(state==="addItem"){$('.formBuilder[data-state="active"]').empty();if(_field)$('.formBuilder[data-state="active"]').append(_field.getCompletedView());$('.formBuilder[data-state="active"]').attr("data-state","inactive");$(event.target).closest(".formBuilder").attr("data-state","active");var dataObj=createDataObject(popClass);dataObj.initialize(popClass,undefined,_fieldBase.saveDataItem);_field=createFieldObject(popClass,dataObj);$('.formBuilder[data-state="active"]').empty();if(popClass!=="sectionHeader"){_genFields=new GeneralFields(popClass,dataObj);$('.formBuilder[data-state="active"]').append(_genFields.render());_field.renderDevelopmentView()}else{$('.formBuilder[data-state="active"]').append(_field.renderDevelopmentView())}if(popClass!=="sectionHeader"){$("#inputTitle").focus()}else{$("#inputHeaderText").focus()}createFormBuilderDiv();_prevType=popClass}else if(state==="active"){if(_prevType===popClass){return}var dataObj=createDataObject(popClass);var data;if(item){data=JSON.parse(item)}dataObj.initialize(popClass,data,_fieldBase.saveDataItem);if(popClass!=="sectionHeader")_genFields.switchFieldType(popClass,dataObj);if(_prevType=="radioButton"||_prevType=="list"||_prevType=="checkBox"){if(popClass=="radioButton"||popClass=="list"||popClass=="checkBox"){_field.multiChoiceSwitchTo(popClass,dataObj);_prevType=popClass;return}}_field=createFieldObject(popClass,dataObj);if(popClass!=="sectionHeader")_field.renderDevelopmentView();else{$('.formBuilder[data-state="active"]').empty();$('.formBuilder[data-state="active"]').append(_field.renderDevelopmentView())}_prevType=popClass}}});$("body").delegate('.formBuilder[data-state="inactive"]',"mouseover mouseleave",function(e){if(e.type=="mouseleave"){if(this.className.indexOf("formBuilderHover")>-1){this.setAttribute("class","formBuilder");$(this).find(".editForm.inactive").css("display","none")}}else if(e.type=="mouseover"){if(this.className.indexOf("formBuilderHover")==-1){this.setAttribute("class","formBuilder formBuilderHover");$(this).find(".editForm.inactive").css("display","table")}}});$(document).on("click","#doneButton",function(event){$('.formBuilder[data-state="active"]').empty();if(_field)$('.formBuilder[data-state="active"]').append(_field.getCompletedView());$('.formBuilder[data-state="active"]').attr("data-state","inactive")});$(document).on("click","*:not(.popSelectField)",function(event){var isFieldMenuItem=false;if($(event.target).closest("table.fieldMenuItem").length>0)isFieldMenuItem=true;var isPopSelectItem=false;if($(event.target).closest(".popSelectItem").length>0)isPopSelectItem=true;var isPopSelectItemScale=false;if($(event.target).closest(".popSelectItemScale").length>0)isPopSelectItemScale=true;if(!isPopSelectItem&&!isPopSelectItemScale&&!isFieldMenuItem)_fieldBase.unsetActiveSelectField()});$(document).on("click","table.editForm.inactive .tdEdit",function(event){$(this).closest('.formBuilder[data-state="inactive"]').trigger("click")});$(document).on("click","table.editForm.active .tdEdit, table.editForm.activeHeader .tdEdit",function(event){$("#doneButton").trigger("click")});$(document).on("click","table.editForm .tdCopy",function(event){$selectedFormBuilder=$(this).closest(".formBuilder");var item=$selectedFormBuilder.attr("data-item");$('.formBuilder[data-state="active"]').empty();if(_field)$('.formBuilder[data-state="active"]').append(_field.getCompletedView());var newDiv=createFormBuilderDivForCopy(item);newDiv.style.display="none";$selectedFormBuilder.after(newDiv);$('.formBuilder[data-state="active"]').attr("data-state","inactive");var data;if(item){data=JSON.parse(item)}var dataObj=createDataObject(data.type);dataObj.initialize(data.type,data,_fieldBase.saveDataItem);_field=createFieldObject(data.type,dataObj);if(data.type!=="sectionHeader"){_genFields=new GeneralFields(data.type,dataObj);$('.formBuilder[data-state="new"]').append(_genFields.render());$('.formBuilder[data-state="new"]').slideDown(300);_field.renderDevelopmentView()}else{$('.formBuilder[data-state="new"]').slideDown(300);$('.formBuilder[data-state="new"]').append(_field.renderDevelopmentView())}if(data.type!=="sectionHeader"){$("#inputTitle").focus()}else{$("#inputHeaderText").focus()}$('.formBuilder[data-state="new"]').attr("data-state","active")});$(document).on("click","table.editForm .tdDel",function(event){$(this).closest(".formBuilder").remove()});$(document).on("click","#saveDataItemsTest",function(event){var dataItems=[];$(".formBuilder").each(function(index,element){var item=element.getAttribute("data-item");var state=element.getAttribute("data-state");var data;if(item){data=JSON.parse(item)}if(data){if(state!=="active"){var dataObj=createDataObject(data.type);dataObj.initialize(data.type,data)}dataItems.push(item)}});_fieldBase.saveDataItemsToLocalStorage(JSON.stringify(dataItems))});$(document).on("click","#saveDataItems",function(event){var dataItems=[];var fb=new FormBuilder;_fieldBase.saveDataItemsToLocalStorage(JSON.stringify(fb.getFormData()))})});function createFormBuilderDiv(){var div=document.createElement("DIV");div.setAttribute("class","formBuilder");div.setAttribute("data-state","addItem");$("div.formBuilder").last().after(div);var popup=new PopupMenu;$('.formBuilder[data-state="addItem"]').append(popup.createPopupMenu())}function createFormBuilderDivForCopy(item){var div=document.createElement("DIV");div.setAttribute("class","formBuilder");div.setAttribute("data-state","new");div.setAttribute("data-item",item);return div}function createFormBuilderDivForMainHeader(item){var div=document.createElement("DIV");div.setAttribute("class","formBuilder");div.setAttribute("data-state","mainHeader");div.setAttribute("data-item",item);return div}function createDataObject(type){if(type==="textField"){return new TextFieldData}else if(type==="paragraphField"){return new ParagraphFieldData}else if(type==="radioButton"){return new MultiChoiceData}else if(type==="checkBox"){return new MultiChoiceData}else if(type==="list"){return new MultiChoiceData}else if(type==="grid"){return new GridData}else if(type==="scaleField"){return new ScaleData}else if(type==="dateField"){return new DateData}else if(type==="timeField"){return new TimeData}else if(type==="mainHeader"){return new HeaderData}else if(type==="sectionHeader"){return new HeaderData}}function createFieldObject(type,dataObj){if(type==="textField"){return new TextField(dataObj)}else if(type==="paragraphField"){return new ParagraphField(dataObj)}else if(type==="radioButton"||type==="list"||type==="checkBox"){return new MultiChoiceField(type,dataObj)}else if(type==="grid"){return new GridField(dataObj)}else if(type==="scaleField"){return new ScaleField(dataObj)}else if(type==="dateField"){return new DateField(dataObj)}else if(type==="timeField"){return new TimeField(dataObj)}else if(type==="mainHeader"){return new MainHeaderField(dataObj)}else if(type==="sectionHeader"){return new SectionHeaderField(dataObj)}}function clearCSSAttributes(){$('.formBuilder[data-state="inactive"]').removeAttr("style")}function MainHeaderField(dataObj){var _fieldBase=new FieldBase;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _data;var _dataObject;var _text={};_text["placeholderForDescription"]="Form Description";_text["placeholderForMainHeaderText"]="Untitled form";this.renderDevelopmentView=renderDevelopmentView;this.getBootstrapView=getBootstrapView;function renderDevelopmentView(){var divContainer=document.createElement("div");divContainer.setAttribute("class","mainHeader");var div1=document.createElement("div");div1.setAttribute("class","mainHeaderTitle");var inputHeader=document.createElement("input");inputHeader.setAttribute("type","text");inputHeader.addEventListener("keyup",header_key_pressed,false);var headerText=_dataObject.getDataItemObj().headerText;if(headerText.length>0)inputHeader.value=headerText;else inputHeader.value=_text["placeholderForMainHeaderText"];div1.appendChild(inputHeader);var div2=document.createElement("div");div2.setAttribute("class","mainHeaderDescription");var textArea=document.createElement("textarea");textArea.setAttribute("placeholder",_text["placeholderForDescription"]);textArea.addEventListener("keyup",description_key_pressed,false);var descriptionText=_dataObject.getDataItemObj().descriptionText;if(descriptionText.length>0)textArea.appendChild(document.createTextNode(descriptionText));div2.appendChild(textArea);divContainer.appendChild(div1);divContainer.appendChild(div2);return divContainer}function header_key_pressed(){_dataObject.setHeaderText(this.value,_fieldBase.saveMainHeaderDataItem)}function description_key_pressed(){_dataObject.setDescriptionText(this.value,_fieldBase.saveMainHeaderDataItem)}function getBootstrapView(orderNro){var data=_dataObject.getDataItemObj();var header=document.createElement("H2");var br=document.createElement("br");header.appendChild(br);if(data.headerText.length>0)header.appendChild(document.createTextNode(data.headerText));else{header.appendChild(document.createTextNode(_text["placeholderForMainHeaderText"]))}if(data.descriptionText.length>0){var br=document.createElement("br");header.appendChild(br);var small=document.createElement("small");small.appendChild(document.createTextNode(data.descriptionText));header.appendChild(small)}return header}}function MultiChoiceField(type,dataObj){var _fieldBase=new FieldBase;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _type=type;var _advField=new MultiChoiceFieldAdvanced(_type,_dataObject);var _style=_fieldBase._style;var _elementToAppendTo=_fieldBase._elementToAppendTo;var _parentElementToAddCSSClass=_fieldBase._parentElementToAddCSSClass;var _formBuilderIdentifier=_fieldBase._formBuilderIdentifier;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _advSettingsSummaryId=_fieldBase._advSettingsSummaryId;var _otherOption="false";var _data;var _dataObject;var _optionText="Option";var _addRowText="Click to add option";var _orText="or";var _addOtherText='Add "Other"';var _otherText="Other: ";var _otherTextForAnswer="Their answer";this.renderDevelopmentView=renderDevelopmentView;this.multiChoiceSwitchTo=multiChoiceSwitchTo;this.renderCompletedView=renderCompletedView;this.getCompletedView=getCompletedView;this.getBootstrapView=getBootstrapView;this.checkOtherFieldSettings=checkOtherFieldSettings;function renderDevelopmentView(){$(_parentElementToAddCSSClass).removeClass();var div=document.createElement("DIV");var table=document.createElement("TABLE");table.setAttribute("id","multiChoiceTable");var rowCount=3;var data=_data;var rowCount;if(!(data.optionsText===undefined)){rowCount=data.optionsText.length+2}for(rowNro=1;rowNro<=rowCount;rowNro++){var row;var optionText;if(rowNro<=data.optionsText.length){if(data.optionsText[rowNro-1]){var objectKey="option-"+rowNro;optionText=data.optionsText[rowNro-1][objectKey]}}if(rowNro==rowCount-1){row=create_multi_choice_table_row(_addRowText,_type,"true",rowNro,"false");row.setAttribute("id","addMultiChoiceRow")}else if(rowNro==rowCount){row=create_multi_choice_table_row(_otherText,_type,"false",rowNro,"true");row.setAttribute("id","otherMultiChoiceRow")}else{row=create_multi_choice_table_row(optionText,_type,"false",rowNro,"false");row.setAttribute("class","optionMultiChoiceRow")}table.appendChild(row)}if(_style===undefined||_style=="default"){div.setAttribute("class","dev-div-multipleChoiceField");$(_parentElementToAddCSSClass).addClass("dev-row-multipleChoiceField")}div.appendChild(table);document.getElementById(_elementToAppendTo.substr(1)).appendChild(div);$("#multiChoiceTable").sortable({items:"tr[class=optionMultiChoiceRow]",handle:".handle",stop:updateListAndOptionNro,start:function(event,ui){var start_pos=ui.item.index();ui.item.data("start_pos",start_pos)},update:function(event,ui){var start_pos=ui.item.data("start_pos");var end_pos=ui.item.index();_dataObject.moveOptionText(start_pos,end_pos,_fieldBase.saveDataItem)}});$("#multiChoiceTable tr").disableSelection();checkOtherFieldSettings();document.getElementById(_advSettingsContentId.substr(1)).appendChild(_advField.render())}function updateListAndOptionNro(){updateIndex();updateOptionNro()}function updateIndex(){if(_type=="list"){$("#multiChoiceTable > tr > td:nth-child(2) label").each(function(index){$(this).html(index+1+".")})}}function updateOptionNro(){$(".optionMultiChoiceRow").each(function(index){$(this).attr("data-nro",index+1)})}function checkOtherFieldSettings(){var rowCount=$("#multiChoiceTable > tr").length;if(_type=="list"){if(rowCount>=4){$(".optionMultiChoiceRow > td:nth-child(1) div").visible();$(".optionMultiChoiceRow > td:nth-child(4) div").visible()}else{$(".optionMultiChoiceRow > td:nth-child(1) div").invisible();$(".optionMultiChoiceRow > td:nth-child(4) div").invisible()}$("#addMultiChoiceRow > td:nth-child(4) div").invisible();$("#otherMultiChoiceRow").hide();return}if(_otherOption=="false"){if(rowCount>=4){$(".optionMultiChoiceRow > td:nth-child(1) div").visible();$(".optionMultiChoiceRow > td:nth-child(4) div").visible()}else{$(".optionMultiChoiceRow > td:nth-child(1) div").invisible();$(".optionMultiChoiceRow > td:nth-child(4) div").invisible()}$("#addMultiChoiceRow > td:nth-child(4) div").visible();$("#otherMultiChoiceRow").hide()}else{if(rowCount>=4){$(".optionMultiChoiceRow > td:nth-child(1) div").visible();$(".optionMultiChoiceRow > td:nth-child(4) div").visible();$("#addMultiChoiceRow > td:nth-child(4) div").invisible();$("#otherMultiChoiceRow").show()}else{$(".optionMultiChoiceRow > td:nth-child(1) div").invisible();$(".optionMultiChoiceRow > td:nth-child(4) div").invisible();$("#addMultiChoiceRow > td:nth-child(4) div").invisible();$("#otherMultiChoiceRow").show()}}}function create_multi_choice_table_row(optionText,type,addRow,rowNro,otherRow){var row=document.createElement("TR");var columnCount=5;var tds=[];for(columnNro=1;columnNro<=columnCount;columnNro++){var td=document.createElement("TD");if(columnNro==1){var div=document.createElement("DIV");div.setAttribute("class","td1MultiChoice");if(addRow=="false"&&otherRow=="false"){var span=document.createElement("SPAN");var classes=_fieldBase._classesForSorting;span.setAttribute("class",classes);row.setAttribute("data-nro",rowNro);div.appendChild(span);td.appendChild(div)}else if(addRow=="true"){td.addEventListener("click",multi_choice_add_row_onclick,false)}tds.push(td)}else if(columnNro==2){var div=document.createElement("DIV");div.setAttribute("class","td2MultiChoice");if(type=="radioButton"){var inputRadio=document.createElement("INPUT");inputRadio.setAttribute("type","radio");
inputRadio.addEventListener("click",uncheck,false);div.appendChild(inputRadio)}else if(type=="checkBox"){var inputCheckBox=document.createElement("INPUT");inputCheckBox.setAttribute("type","checkbox");inputCheckBox.addEventListener("click",stopDefAction,false);div.appendChild(inputCheckBox)}else if(type=="list"){var labelForListItem=document.createElement("LABEL");var textForLabel=document.createTextNode(rowNro+".");labelForListItem.appendChild(textForLabel);div.appendChild(labelForListItem)}if(addRow=="true"){td.addEventListener("click",multi_choice_add_row_onclick,false)}td.appendChild(div);tds.push(td)}else if(columnNro==3){var input2=document.createElement("INPUT");input2.setAttribute("type","text");var textForInput;if(addRow=="true"){input2.disabled=true;input2.setAttribute("value",optionText);td.addEventListener("click",multi_choice_add_row_onclick,false);td.appendChild(input2)}else if(otherRow=="true"){var tableInner=document.createElement("table");tableInner.setAttribute("id","tableMultiChoiceInner");trInner=document.createElement("tr");tdInner1=document.createElement("td");var label=document.createElement("label");label.innerText=_otherText+" ";label.setAttribute("id","otherRowLabel");tdInner1.appendChild(label);tdInner2=document.createElement("td");input2.setAttribute("value",_otherTextForAnswer);input2.disabled=true;tdInner2.appendChild(input2);trInner.appendChild(tdInner1);trInner.appendChild(tdInner2);tableInner.appendChild(trInner);td.appendChild(tableInner)}else{input2.setAttribute("value",optionText);input2.addEventListener("keyup",option_key_pressed,false);td.appendChild(input2)}tds.push(td)}else if(columnNro==4){var div=document.createElement("DIV");if(addRow=="false"){div.setAttribute("class","multiChoiceDelete");div.addEventListener("click",multi_choice_delete_row_onclick,false);var text=document.createTextNode("x");div.appendChild(text);td.appendChild(div)}else{div.setAttribute("class","td4MultiChoiceAddOther");var text=document.createTextNode(_orText+" ");div.appendChild(text);var anchor=document.createElement("A");anchor.setAttribute("href","javascript: void(0)");var textAnchor=document.createTextNode(_addOtherText);anchor.appendChild(textAnchor);anchor.addEventListener("click",add_other_onclick,false);div.appendChild(anchor);td.appendChild(div)}tds.push(td)}else if(columnNro==5){tds.push(td)}}for(k=0;k<tds.length;k++){row.appendChild(tds[k])}return row}function add_other_onclick(){_otherOption="true";_dataObject.setUseOther(true,_fieldBase.saveDataItem);checkOtherFieldSettings();return false}function option_key_pressed(){var str=this.parentNode.parentNode.getAttribute("data-nro");var rowNro=parseInt(str);_dataObject.updateOptionText(rowNro,this.value,_fieldBase.saveDataItem)}function multi_choice_add_row_onclick(){var new_row;var optionNumber=_data.optionsText.length+1;var optionText=_optionText+" "+optionNumber;_dataObject.addOption(optionText,_fieldBase.saveDataItem);if(_type=="radioButton"){new_row=create_multi_choice_table_row(optionText,"radioButton","false",optionNumber,"false")}else if(_type=="checkBox"){new_row=create_multi_choice_table_row(optionText,"checkBox","false",optionNumber,"false")}else{var lastRowNro=parseInt($("#addMultiChoiceRow").find("td:nth-child(2) label").text());new_row=create_multi_choice_table_row(optionText,"list","false",lastRowNro,"false");lastRowNro=lastRowNro+1;$("#addMultiChoiceRow").find("td:nth-child(2) label").html(lastRowNro+".")}new_row.setAttribute("class","optionMultiChoiceRow");$("#addMultiChoiceRow").before(new_row);checkOtherFieldSettings();updateOptionNro();$("#multiChoiceTable").find("tr:nth-child("+optionNumber+") > td:nth-child(3) > input").select()}function multi_choice_delete_row_onclick(){if(this.parentNode.parentNode.id=="otherMultiChoiceRow"){_otherOption="false";_dataObject.setUseOther(false,_fieldBase.saveDataItem);checkOtherFieldSettings();return}else{var str=this.parentNode.parentNode.getAttribute("data-nro");var rowNro=parseInt(str);_dataObject.removeOptionByUsingOptionNro(rowNro,_fieldBase.saveDataItem);$("#multiChoiceTable > tr:nth-child("+rowNro+") ").remove();updateIndex();checkOtherFieldSettings();updateOptionNro();if(rowNro>1)rowNro=rowNro-1;$("#multiChoiceTable > tr:nth-child("+rowNro+") > td:nth-child(3) > input").select()}}function multiChoiceSwitchTo(type,dataObj){_type=type;_dataObject=dataObj;_data=dataObj.getDataItemObj();if(type=="radioButton"){$("#multiChoiceTable > tr > td:nth-child(2)").each(function(index,td){var div=document.createElement("DIV");div.setAttribute("class","td2MultiChoice");var inputRadio=document.createElement("INPUT");inputRadio.setAttribute("type","radio");inputRadio.addEventListener("click",stopDefAction,false);div.appendChild(inputRadio);td.innerHTML="";td.appendChild(div)});document.getElementById(_advSettingsSummaryId).innerHTML="";_advField.multiChoiceSwitchTo("radioButton",dataObj)}else if(type=="checkBox"){$("#multiChoiceTable > tr > td:nth-child(2)").each(function(index,td){var div=document.createElement("DIV");div.setAttribute("class","td2MultiChoice");var inputCheckBox=document.createElement("INPUT");inputCheckBox.setAttribute("type","checkbox");inputCheckBox.addEventListener("click",stopDefAction,false);div.appendChild(inputCheckBox);td.innerHTML="";td.appendChild(div)});document.getElementById(_advSettingsSummaryId).innerHTML="";_advField.multiChoiceSwitchTo("checkBox",dataObj)}else if(type=="list"){$("#multiChoiceTable > tr > td:nth-child(2)").each(function(index,td){var div=document.createElement("DIV");div.setAttribute("class","td2MultiChoice");var labelForListItem=document.createElement("LABEL");var textForLabel=document.createTextNode(index+1+".");labelForListItem.appendChild(textForLabel);div.appendChild(labelForListItem);td.innerHTML="";td.appendChild(div)});document.getElementById(_advSettingsSummaryId).innerHTML="";_advField.multiChoiceSwitchTo("list",dataObj);_otherOption="false"}checkOtherFieldSettings()}function renderCompletedView(){$(_formBuilderIdentifier).append("<p>"+_type+"</p>")}function stopDefAction(evt){evt.preventDefault()}function uncheck(evt){this.checked=false}function getCompletedView(){_data=_dataObject.getDataItemObj();var type=_data.type;if(type=="radioButton"||type=="checkBox"){var table=document.createElement("table");table.setAttribute("class","c-view-multi-table");for(rowNro=1;rowNro<=_data.optionsText.length;rowNro++){var tr=document.createElement("tr");tr.setAttribute("class","c-view-multi-tr");var td_2=document.createElement("td");var inputRadio=document.createElement("INPUT");inputRadio.setAttribute("type",type=="radioButton"?"radio":"checkbox");inputRadio.addEventListener("click",stopDefAction,false);td_2.appendChild(inputRadio);var td_3=document.createElement("td");var div=document.createElement("div");var objectKey="option-"+rowNro;var optionText=_data.optionsText[rowNro-1][objectKey];div.innerText=optionText;td_3.appendChild(div);tr.appendChild(td_2);tr.appendChild(td_3);table.appendChild(tr)}if(_data.useOther===true){var tr=document.createElement("tr");tr.setAttribute("class","c-view-multi-tr");var td_2=document.createElement("td");var inputRadio=document.createElement("INPUT");inputRadio.setAttribute("type",type=="radioButton"?"radio":"checkbox");inputRadio.addEventListener("click",stopDefAction,false);td_2.appendChild(inputRadio);var td_3=document.createElement("td");var div=document.createElement("div");div.innerText=_otherText;var input=document.createElement("input");input.setAttribute("type","text");input.disabled=true;div.appendChild(input);td_3.appendChild(div);tr.appendChild(td_2);tr.appendChild(td_3);table.appendChild(tr)}var div=_fieldBase.addGeneralFieldsToCompletedView(type,table,_dataObject);return div}else if(type=="list"){var select=document.createElement("select");select.setAttribute("class","c-view-multi-select");var emptyOption=document.createElement("option");emptyOption.setAttribute("class","c-view-multi-option");select.addEventListener("mousedown",stopDefAction,false);select.appendChild(emptyOption);for(rowNro=1;rowNro<=_data.optionsText.length;rowNro++){var option=document.createElement("option");option.setAttribute("class","c-view-multi-option");var objectKey="option-"+rowNro;var optionText=_data.optionsText[rowNro-1][objectKey];option.value=objectKey;option.innerHTML=optionText;select.appendChild(option)}var div=_fieldBase.addGeneralFieldsToCompletedView(type,select,_dataObject);return div}}function getBootstrapView(orderNro){_data=_dataObject.getDataItemObj();var type=_data.type;if(type=="radioButton"||type=="checkBox"){var divContainer=document.createElement("div");for(rowNro=1;rowNro<=_data.optionsText.length;rowNro++){var div=document.createElement("div");div.setAttribute("class",type=="radioButton"?"radio":"checkbox");var label=document.createElement("label");var input=document.createElement("INPUT");input.setAttribute("type",type=="radioButton"?"radio":"checkbox");input.setAttribute("name","group_"+orderNro);label.appendChild(input);var objectKey="option-"+rowNro;var optionText=_data.optionsText[rowNro-1][objectKey];label.appendChild(document.createTextNode(optionText));div.appendChild(label);divContainer.appendChild(div)}if(_data.useOther===true){var div=document.createElement("div");div.setAttribute("class",type=="radioButton"?"radio":"checkbox");var label=document.createElement("label");var table=document.createElement("tr");var tr=document.createElement("tr");var td_1=document.createElement("td");var input=document.createElement("INPUT");input.setAttribute("type",type=="radioButton"?"radio":"checkbox");input.setAttribute("name","group_"+orderNro);var divTxt=document.createElement("div");divTxt.innerText=_otherText;td_1.appendChild(input);td_1.appendChild(divTxt);var td_2=document.createElement("td");var inputOther=document.createElement("input");inputOther.setAttribute("type","text");inputOther.disabled=true;td_2.appendChild(inputOther);tr.appendChild(td_1);tr.appendChild(td_2);table.appendChild(tr);label.appendChild(table);div.appendChild(label);divContainer.appendChild(div)}var div=_fieldBase.addGeneralFieldsToBootstrapForm(type,divContainer,_dataObject);return div}else if(type=="list"){var select=document.createElement("select");select.setAttribute("class","form-control");var emptyOption=document.createElement("option");select.appendChild(emptyOption);var optionTextCount=0;for(rowNro=1;rowNro<=_data.optionsText.length;rowNro++){var option=document.createElement("option");var objectKey="option-"+rowNro;var optionText=_data.optionsText[rowNro-1][objectKey];option.value=objectKey;option.innerHTML=optionText;select.appendChild(option);if(optionText.length>optionTextCount)optionTextCount=optionText.length}console.log("optionTextCount "+optionTextCount);if(optionTextCount>10){var width=optionTextCount*9;if(width>350)width=350;select.style.width=width+"px"}else{select.style.width="105px"}var div=_fieldBase.addGeneralFieldsToBootstrapForm(type,select,_dataObject);return div}}}function MultiChoiceFieldAdvanced(type,dataObj){var _fieldBase=new FieldBase;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _type=type;var _prev_type="";var _inputError=false;this.render=render;this.multiChoiceSwitchTo=multiChoiceSwitchTo;var _text={};_text["labelDataValidation"]="Data Validation";_text["labelShuffleOptionOrder"]="Shuffle option order";_text["placeholderNumber"]="Number";_text["labelNumber"]="and";_text["placeholderText"]="Text";_text["placeholderRegExp"]="Pattern";_text["placeholderErrorText"]="Custom error text";_text["numberInputErrorText"]="Please enter a whole number greater than zero";_text["startOfValidationSummary"]="Validation:";_text["andWord"]="and";_text["optionsWord"]="options";_text["shuffleOnText"]="Shuffle: on";var _select2_text={};_select2_text[0]=new Array(3);_select2_text[0][0]="Select at least";_select2_text[0][1]="Select at most";_select2_text[0][2]="Select exactly";var _select2_text_summary={};_select2_text_summary[0]=new Array(3);_select2_text_summary[0][0]="Must select at least";_select2_text_summary[0][1]="Must select at most";_select2_text_summary[0][2]="Must select exactly";var _select2_id={};_select2_id[0]=new Array(3);_select2_id[0][0]="select_at_least";_select2_id[0][1]="select_at_most";_select2_id[0][2]="select_exactly";function render(){$(_advSettingsContentId).hide();var div=document.createElement("DIV");var datValTable=createTableForDataValidation();datValTable.setAttribute("class","advancedTable");datValTable.setAttribute("id","setValidationTable");if(_type!=="checkBox")datValTable.style.display="none";div.appendChild(datValTable);var checkTable=createTableCheckSettings();checkTable.setAttribute("class","advancedTableAlt");checkTable.setAttribute("id","checkSettingsTable");if(_type!=="checkBox")checkTable.style.display="none";div.appendChild(checkTable);var divErr=createErrorMessageDiv();div.appendChild(divErr);var validate=false;if(_type==="checkBox")validate=_dataObject.getDataItemObj().advancedSettings.dataValidation;var shuffleTable=createTableForShuffleOptionOrder(validate);shuffleTable.setAttribute("class","advancedTable");div.appendChild(shuffleTable);updateSummaryText();return div}function createTableForDataValidation(){var table=document.createElement("table");var row=document.createElement("TR");row.setAttribute("class","dataValidationTableRow");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","dataValidation");input.setAttribute("type","checkbox");var value=false;try{value=_dataObject.getDataItemObj().advancedSettings.dataValidation}catch(e){}if(value===true){input.setAttribute("checked","checked")}input.addEventListener("click",checkBoxClicked,false);td_1.appendChild(input);var td_2=document.createElement("TD");td_2.setAttribute("colspan","4");var label=document.createElement("label");label.setAttribute("for","dataValidation");var txtLabel=document.createTextNode(_text["labelDataValidation"]);label.appendChild(txtLabel);td_2.appendChild(label);row.appendChild(td_1);row.appendChild(td_2);table.appendChild(row);return table}function createTableCheckSettings(){var table=document.createElement("table");var row=document.createElement("TR");row.setAttribute("class","advanced2ndRow");var td_1=document.createElement("TD");var div=document.createElement("DIV");div.setAttribute("id","popSelectHeight");td_1.appendChild(div);row.appendChild(td_1);var td_2=document.createElement("TD");row.appendChild(td_2);var td_3=document.createElement("TD");td_3.setAttribute("id","tdSelect2");var divSelect_2=createSelectField("Select2");td_3.appendChild(divSelect_2);row.appendChild(td_3);var validate=_dataObject.getDataItemObj().advancedSettings.dataValidation;var type=_dataObject.getDataItemObj().type;_prev_type=type;var td_4=document.createElement("TD");var select_type_id="";var checkCount="";var validate=false;if(type==="checkBox"){try{validate=_dataObject.getDataItemObj().advancedSettings.dataValidation}catch(e){}try{select_type_id=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.type}catch(e){}try{checkCount=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.checkCount}catch(e){}}var divCheckBox=createCheckBoxInput(type,select_type_id,checkCount,validate);td_4.appendChild(divCheckBox);row.appendChild(td_4);var td_5=document.createElement("TD");var errorText;errorText=_dataObject.getDataItemObj().advancedSettings.errorText;if(!errorText)errorText="";var divError=createInputFieldForErrorText(errorText,validate);td_5.appendChild(divError);row.appendChild(td_5);table.appendChild(row);return table}function createErrorMessageDiv(){var div=document.createElement("DIV");div.setAttribute("id","advErrorRow");div.style.display="none";var label=document.createElement("label");label.setAttribute("id","advErrorMsg");var txtLabel=document.createTextNode(_text["numberInputErrorText"]);label.appendChild(txtLabel);div.appendChild(label);return div}function createSelectField(id){var divFieldSelect=document.createElement("DIV");divFieldSelect.setAttribute("id","popSelectFieldDiv"+id);var table=document.createElement("table");table.setAttribute("id","popSelectField"+id);var validate=_dataObject.getDataItemObj().advancedSettings.dataValidation;if(validate){table.addEventListener("click",selectClick,false);table.setAttribute("class","popSelectField")}else table.setAttribute("class","popSelectFieldDisabled");var tr=document.createElement("TR");var td_1=document.createElement("TD");var spanFieldSelectText=document.createElement("SPAN");spanFieldSelectText.setAttribute("id","selectFieldText"+id);spanFieldSelectText.setAttribute("class","selectFieldText");if(validate)spanFieldSelectText.setAttribute("class","selectFieldText");else spanFieldSelectText.setAttribute("class","selectFieldTextDisabled");var selectedText;table.setAttribute("data-for","popSelectAdvancedText");var val_2nd_select;try{val_2nd_select=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.type}catch(e){}if(val_2nd_select){selectedText=getTextForId(val_2nd_select,_select2_id[0],_select2_text[0])}else{selectedText=_select2_text[0][0]}var text;text=document.createTextNode(selectedText);spanFieldSelectText.appendChild(text);td_1.appendChild(spanFieldSelectText);tr.appendChild(td_1);var td_2=document.createElement("TD");var spanImageSelect=document.createElement("SPAN");spanImageSelect.setAttribute("class",_fieldBase._triangleClassSouth);divFieldSelect.appendChild(spanImageSelect);td_2.appendChild(spanImageSelect);tr.appendChild(td_2);table.appendChild(tr);table.style="";divFieldSelect.appendChild(table);select_PopUp_text=createSelectPopUp("AdvancedText",_select2_id[0],_select2_text[0]);divFieldSelect.appendChild(select_PopUp_text);return divFieldSelect}function createCheckBoxInput(type,select_type_id,checkCount,validate){var div=document.createElement("DIV");div.setAttribute("id","divTextType");var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputCheckCount");input_1.setAttribute("type","text");input_1.setAttribute("class","inputShort");input_1.setAttribute("placeholder",_text["placeholderNumber"]);input_1.addEventListener("keyup",text_key_pressed,false);input_1.addEventListener("blur",text_input_blur,false);if(!validate)input_1.disabled=true;if(type==="checkBox"&&validate==true){input_1.value=checkCount}div.appendChild(input_1);return div}function createInputFieldForErrorText(text,validate){var div=document.createElement("DIV");div.setAttribute("id","divErrorText");var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputErrorText");input_1.setAttribute("type","text");input_1.setAttribute("placeholder",_text["placeholderErrorText"]);input_1.addEventListener("keyup",error_key_pressed,false);input_1.value=text;if(!validate)input_1.disabled=true;div.appendChild(input_1);return div}function createTableForShuffleOptionOrder(validate){var table=document.createElement("table");var row=document.createElement("TR");row.setAttribute("class","shuffleOptionOrderTableRow");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","shuffle");input.setAttribute("type","checkbox");var value=false;try{value=_dataObject.getDataItemObj().advancedSettings.shuffleOrder}catch(e){}if(value===true){input.setAttribute("checked","checked")}$(_advSettingsContentId).hide();input.addEventListener("click",shuffleCheckBoxClicked,false);td_1.appendChild(input);var td_2=document.createElement("TD");td_2.setAttribute("colspan","4");var label=document.createElement("label");label.setAttribute("for","shuffle");var txtLabel=document.createTextNode(_text["labelShuffleOptionOrder"]);label.appendChild(txtLabel);td_2.appendChild(label);row.appendChild(td_1);row.appendChild(td_2);table.appendChild(row);_text["shuffleOnText"];return table}function getTextForId(id,idArray,textArray){for(i=0;i<Object.keys(textArray).length;i++){if(id===idArray[i])return textArray[i]}return undefined}function getSelectedPopUpNro(id,idArray){for(i=0;i<Object.keys(idArray).length;i++){if(id===idArray[i])return i+1}return undefined}function createSelectPopUp(name,idArray,textArray){var div=document.createElement("DIV");div.setAttribute("id","popSelect"+name);div.setAttribute("class","popSelect");for(i=0;i<Object.keys(textArray).length;i++){var div_sub=document.createElement("DIV");div_sub.setAttribute("id",idArray[i]);div_sub.setAttribute("data-nro",i+1);div_sub.setAttribute("class","popSelectItem");div_sub.addEventListener("click",popUpSelect,false);var text=document.createTextNode(textArray[i]);div_sub.appendChild(text);div.appendChild(div_sub)}return div}function checkBoxClicked(){var _data=_dataObject.getDataItemObj();if(_data.advancedSettings.dataValidation===false){_dataObject.setDataValidation(true);_dataObject.setCheckBoxValidationType(_select2_id[0][0],_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][0];document.getElementById("popSelectFieldSelect2").setAttribute("data-for","popSelectAdvancedText");document.getElementById("divTextType").style.display="inline";document.getElementById("inputCheckCount").style.display="inline";document.getElementById("popSelectFieldSelect2").addEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect2").setAttribute("class","popSelectField");document.getElementById("selectFieldTextSelect2").setAttribute("class","selectFieldText");document.getElementById("inputCheckCount").disabled=false;document.getElementById("inputErrorText").disabled=false;var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(_select2_id[0][0],_select2_id[0],_select2_text_summary[0]);desc_text=desc_text+" "+_text["optionsWord"];_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else{_dataObject.setDataValidation(false);_dataObject.setCheckBoxValidationType("");_dataObject.checkBoxValidationCheckCount("");_dataObject.setErrorText("",_fieldBase.saveDataItem);document.getElementById("divTextType").style.display="inline";$("#inputCharCount").val("");document.getElementById("popSelectFieldSelect2").removeEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect2").setAttribute("class","popSelectFieldDisabled");document.getElementById("selectFieldTextSelect2").setAttribute("class","selectFieldTextDisabled");document.getElementById("inputCheckCount").disabled=true;document.getElementById("inputErrorText").disabled=true;document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][0];_fieldBase.setAdvancedSettingsDescriptionText("");if(document.getElementById("advErrorRow").style.display=="inline"){document.getElementById("advErrorRow").style.display="none";document.getElementById("inputCheckCount").setAttribute("class","inputShort")}}updateSummaryText()}function shuffleCheckBoxClicked(){var shuffleOrder=_dataObject.getDataItemObj().advancedSettings.shuffleOrder;if(shuffleOrder==false){_dataObject.shuffleOrder(true,_fieldBase.saveDataItem)}else{_dataObject.shuffleOrder(false,_fieldBase.saveDataItem)}updateSummaryText()}function popUpSelect(){var parentId=this.parentNode.id;var dataNro=this.getAttribute("data-nro");dataNro=parseInt(dataNro)-1;if(parentId==="popSelectAdvancedText"){_fieldBase.setActiveSelectField("popSelectFieldSelect2");var prev_type_id=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.type;if(prev_type_id===_select2_id[0][dataNro]){$("#"+parentId).hide();return}setErrorMsgPos();var type_id=_select2_id[0][dataNro];_dataObject.setCheckBoxValidationType(_select2_id[0][dataNro],_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][dataNro];document.getElementById("inputCheckCount").style.display="inline";var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(type_id,_select2_id[0],_select2_text_summary[0]);var checkCount=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.checkCount;if(checkCount===undefined)checkCount="";desc_text=desc_text+" "+checkCount+" "+_text["optionsWord"];_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}$("#"+parentId).hide();updateSummaryText()}function setErrorMsgPos(){var posLeft1=$("#tblAdvanced").offset().left;var posLeft2=$("#popSelectFieldDivSelect2").offset().left;var posLeft=$("#tdSelect2").position().left;var outerWidth=$("#popSelectFieldDivSelect2").outerWidth();$("#advErrorMsg").css({position:"relative",left:posLeft2+outerWidth-posLeft1+3+"px"}).show()}function selectClick(){_fieldBase.unsetActiveSelectField();var id="#"+this.parentNode.id;var posTop=$(id).offset().top;var selectField_id="#"+this.id;var popSelect_Id="#"+this.getAttribute("data-for");var popSelectPosition=$(popSelect_Id).css("position");var selectFieldPadding=$(popSelect_Id).css("padding-top");var selectFieldPaddingHeight=parseInt(selectFieldPadding);var nroOfItems=$(popSelect_Id+" div").length;var popHeight=$(popSelect_Id+" > div:first-child").css("min-height")||$(popSelect_Id+" > div:first-child").outerHeight();height=parseInt(popHeight);var itemPadding=$(popSelect_Id+" > div:first-child").css("padding-top");var itemPaddingHeight=parseInt(itemPadding);var heightPerItem=height+itemPaddingHeight;var selectNro=1;if(popSelect_Id==="#popSelectAdvancedText"){var type=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.type;if(type){selectNro=getSelectedPopUpNro(type,_select2_id[0])}}var topSpaceNarrow=false;var pos=$(selectField_id).offset();var selectTopSize=(selectNro-1)*heightPerItem;var spaceBetweenTop=pos.top-$(window).scrollTop();if(spaceBetweenTop<-1){spaceBetweenTop=spaceBetweenTop*-1}if(selectTopSize>spaceBetweenTop){topSpaceNarrow=true;selectTopSize=spaceBetweenTop}else{spaceBetweenTop=selectTopSize}var spaceForNroOfItemsAbove=Math.floor(spaceBetweenTop/heightPerItem);var nroOfItemsBelow=nroOfItems-1-spaceForNroOfItemsAbove;var selectBottomSize=(nroOfItems-selectNro)*heightPerItem;var spaceBetweenBottom=pos.top+$(selectField_id).height()-($(window).scrollTop()+$(window).height());if(spaceBetweenBottom<-1){spaceBetweenBottom=spaceBetweenBottom*-1}if(spaceBetweenBottom>selectBottomSize){spaceBetweenBottom=selectBottomSize}var spaceForNroOfItems=Math.floor(spaceBetweenBottom/heightPerItem);var nroOfItemsAbove=nroOfItems-1-spaceForNroOfItems;var reducedFromBottom=0;var j=0;var vertical=0;if(topSpaceNarrow){vertical=spaceForNroOfItemsAbove*heightPerItem}else{vertical=nroOfItemsAbove*heightPerItem}var width=$(selectField_id).outerWidth();$(".popSelect").hide();$(popSelect_Id).css({position:"absolute",top:pos.top-vertical-selectFieldPaddingHeight-1+"px",left:pos.left-10+"px"}).show();document.getElementById(popSelect_Id.substr(1)).addEventListener("mouseleave",function(){$(popSelect_Id).hide()})}function text_key_pressed(){var text_type_id=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.type;var input1Val=_fieldBase.replaceCommaAndRemoveWhitespace(this.value);var input1Empty=input1Val.length==0?true:false;var isInput1Int=_fieldBase.is_integer(input1Val);if(isInput1Int||input1Empty){if(!input1Empty)_dataObject.checkBoxValidationCheckCount(parseInt(input1Val),_fieldBase.saveDataItem);else _dataObject.checkBoxValidationCheckCount("",_fieldBase.saveDataItem)}updateSummaryText()}function text_input_blur(){var input1Val=_fieldBase.replaceCommaAndRemoveWhitespace(document.getElementById("inputCheckCount").value);var isInput1Int=_fieldBase.is_integer(input1Val);var input1Length=input1Val.length;var input1Empty=input1Length==0?true:false;if(!isInput1Int&&!input1Empty){setErrorMsgPos();document.getElementById("advErrorRow").style.display="inline";document.getElementById("inputCheckCount").setAttribute("class","inputShort inputError")}else if(isInput1Int||input1Empty){document.getElementById("inputCheckCount").setAttribute("class","inputShort");if(input1Empty&&document.getElementById("inputCheckCount").value.length>0)document.getElementById("inputCheckCount").value="";document.getElementById("advErrorRow").style.display="none"}updateSummaryText()}function error_key_pressed(){_dataObject.setErrorText(this.value,_fieldBase.saveDataItem)}function multiChoiceSwitchTo(type,dataObject){_dataObject=dataObject;if(type==="radioButton"||type==="list"){$("#setValidationTable").hide();$("#checkSettingsTable").hide();$("#divError").hide()}else{$("#setValidationTable").show();$("#checkSettingsTable").show();$("#divError").show()}updateSummaryText()}function updateSummaryText(){var type=_dataObject.getDataItemObj().type;var shuffle=_dataObject.getDataItemObj().advancedSettings.shuffleOrder;if(shuffle==true){if(type=="checkBox"){var validate=_dataObject.getDataItemObj().advancedSettings.dataValidation;var checkCount=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.checkCount;var select_type_id=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.type;if(validate){var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(select_type_id,_select2_id[0],_select2_text_summary[0]);desc_text=desc_text+" "+checkCount+" "+_text["optionsWord"];desc_text=desc_text+"; "+_text["shuffleOnText"];_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else{_fieldBase.setAdvancedSettingsDescriptionText(_text["shuffleOnText"])}}else{console.log(_text["shuffleOnText"]);_fieldBase.setAdvancedSettingsDescriptionText(_text["shuffleOnText"])}}else{if(type=="checkBox"){var validate=_dataObject.getDataItemObj().advancedSettings.dataValidation;var checkCount=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.checkCount;var select_type_id=_dataObject.getDataItemObj().advancedSettings.checkBoxValidation.type;if(validate){var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(select_type_id,_select2_id[0],_select2_text_summary[0]);desc_text=desc_text+" "+checkCount+" "+_text["optionsWord"];_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else{_fieldBase.setAdvancedSettingsDescriptionText("")}}else{_fieldBase.setAdvancedSettingsDescriptionText("")}}}}function ParagraphField(dataObj){var _fieldBase=new FieldBase;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _style=_fieldBase._style;var _elementToAppendTo=_fieldBase._elementToAppendTo;var _parentElementToAddCSSClass=_fieldBase._parentElementToAddCSSClass;var _formBuilderIdentifier=_fieldBase._formBuilderIdentifier;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _advSettingsSummaryId=_fieldBase._advSettingsSummaryId;var _data;var _dataObject;this.renderDevelopmentView=renderDevelopmentView;this.renderCompletedView=renderCompletedView;this.getBootstrapView=getBootstrapView;this.getCompletedView=getCompletedView;var _advField=new ParagraphFieldAdvanced(_dataObject);var _text={};_text["paragraphContentText"]="Their longer answer";function renderDevelopmentView(dataObj){var div=document.createElement("DIV");var span=document.createElement("div");var br1=document.createElement("BR");var br2=document.createElement("BR");var br3=document.createElement("BR");var t2=document.createTextNode(_text["paragraphContentText"]);if(_style===undefined||_style=="default"){div.setAttribute("class","dev-div-paragField");span.setAttribute("class","dev-span-paragField");$(_parentElementToAddCSSClass).addClass("dev-row-paragField")}span.appendChild(t2);div.appendChild(span);document.getElementById(_elementToAppendTo.substr(1)).appendChild(div);document.getElementById(_advSettingsContentId.substr(1)).appendChild(_advField.render())}function renderCompletedView(){$(_formBuilderIdentifier).append("<p>ParagraphField</p>")}function getCompletedView(){var txtArea=document.createElement("div");txtArea.setAttribute("class","c-view-input-parag");var div=_fieldBase.addGeneralFieldsToCompletedView("paragraphField",txtArea,_dataObject);return div}function getBootstrapView(orderNro){var data=_dataObject.getDataItemObj();var txtArea=document.createElement("textarea");txtArea.setAttribute("class","form-control");
txtArea.setAttribute("rows","3");var div=_fieldBase.addGeneralFieldsToBootstrapForm("paragraphField",txtArea,_dataObject,orderNro);return div}function getFormView(){var txtArea=document.createElement("textarea");txtArea.setAttribute("class","f-view-input-parag");txtArea.setAttribute("rows","5");txtArea.setAttribute("cols","5");var div=_fieldBase.addGeneralFieldsToCompletedView("paragraphField",txtArea,_dataObject);return div}}function ParagraphFieldAdvanced(dataObj){var _fieldBase=new FieldBase;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _prev_type="";var _inputError=false;this.render=render;var _text={};_text["labelDataValidation"]="Data Validation";_text["placeholderNumber"]="Number";_text["labelNumber"]="and";_text["placeholderText"]="Text";_text["placeholderRegExp"]="Pattern";_text["placeholderErrorText"]="Custom error text";_text["numberInputErrorText"]="Please enter a whole number greater than zero";_text["startOfValidationSummary"]="Validation:";_text["andWord"]="and";_text["charactersWord"]="characters";_text["or_greater_than"]="or greater than";var _select1_text={};_select1_text[0]="Text";_select1_text[1]="Regular expression";var _select1_id={};_select1_id[0]="text";_select1_id[1]="regular_expression";var _select2_text={};_select2_text[0]=new Array(2);_select2_text[0][0]="Maximum character count";_select2_text[0][1]="Minimum character count";var _select2_text_summary={};_select2_text_summary[0]=new Array(2);_select2_text_summary[0][0]="Must be fewer than";_select2_text_summary[0][1]="Must be at least";var _select2_id={};_select2_id[0]=new Array(2);_select2_id[0][0]="max_char_count";_select2_id[0][1]="min_char_count";_select2_text[1]=new Array(4);_select2_text[1][0]="Contains";_select2_text[1][1]="Does not contain";_select2_text[1][2]="Matches";_select2_text[1][3]="Does not match";_select2_text_summary[1]=new Array(4);_select2_text_summary[1][0]="Must contain pattern";_select2_text_summary[1][1]="Must not contain pattern";_select2_text_summary[1][2]="Must match pattern";_select2_text_summary[1][3]="Must not match pattern";_select2_id[1]=new Array(4);_select2_id[1][0]="contains";_select2_id[1][1]="does_not_contain";_select2_id[1][2]="matches";_select2_id[1][3]="does_not_match";function render(){var div=document.createElement("DIV");var table=document.createElement("TABLE");table.setAttribute("class","advancedTable");var row_1=createRowDataValidation();table.appendChild(row_1);var row_2=createRowSettings();table.appendChild(row_2);var divErr=createErrorMessageDiv();div.appendChild(table);div.appendChild(divErr);return div}function createRowDataValidation(){var row=document.createElement("TR");row.setAttribute("class","dataValidationTableRow");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","dataValidation");input.setAttribute("type","checkbox");var value=false;try{value=_dataObject.getDataItemObj().advancedSettings.dataValidation}catch(e){}if(value===true){input.setAttribute("checked","checked")}$(_advSettingsContentId).hide();input.addEventListener("click",checkBoxClicked,false);td_1.appendChild(input);var td_2=document.createElement("TD");td_2.setAttribute("colspan","4");var label=document.createElement("label");label.setAttribute("for","dataValidation");var txtLabel=document.createTextNode(_text["labelDataValidation"]);label.appendChild(txtLabel);td_2.appendChild(label);row.appendChild(td_1);row.appendChild(td_2);return row}function createRowSettings(){var row=document.createElement("TR");row.setAttribute("class","advanced2ndRow");var td_1=document.createElement("TD");var div=document.createElement("DIV");div.setAttribute("id","popSelectHeight");td_1.appendChild(div);row.appendChild(td_1);var td_2=document.createElement("TD");var divSelect_1=createSelectField("Select1","AdvancedType");td_2.appendChild(divSelect_1);row.appendChild(td_2);var td_3=document.createElement("TD");td_3.setAttribute("id","tdSelect2");var divSelect_2=createSelectField("Select2","AdvancedNumber");td_3.appendChild(divSelect_2);row.appendChild(td_3);var validate=_dataObject.getDataItemObj().advancedSettings.dataValidation;var val_type=_dataObject.getDataItemObj().advancedSettings.validationType;_prev_type=val_type;var td_4=document.createElement("TD");var text_type_id="";var charCount="";if(val_type==="text"){try{text_type_id=_dataObject.getDataItemObj().advancedSettings.textValidation.type}catch(e){}try{charCount=_dataObject.getDataItemObj().advancedSettings.textValidation.charCount}catch(e){}}var divText=createInputFieldsForText(val_type,text_type_id,charCount,validate);td_4.appendChild(divText);var reg_exp_type_id="";var pattern="";if(val_type==="regular_expression"){try{reg_exp_type_id=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type}catch(e){}try{pattern=_dataObject.getDataItemObj().advancedSettings.regExpValidation.pattern}catch(e){}}var divRegExp=createInputFieldsForRegExp(val_type,reg_exp_type_id,pattern,validate);td_4.appendChild(divRegExp);row.appendChild(td_4);var td_5=document.createElement("TD");var errorText=_dataObject.getDataItemObj().advancedSettings.errorText;var divError=createInputFieldForErrorText(errorText,validate);td_5.appendChild(divError);row.appendChild(td_5);return row}function createErrorMessageDiv(){var div=document.createElement("DIV");div.setAttribute("id","advErrorRow");div.style.display="none";var label=document.createElement("label");label.setAttribute("id","advErrorMsg");var txtLabel=document.createTextNode(_text["numberInputErrorText"]);label.appendChild(txtLabel);div.appendChild(label);return div}function createSelectField(id,type){var divFieldSelect=document.createElement("DIV");divFieldSelect.setAttribute("id","popSelectFieldDiv"+id);var table=document.createElement("table");table.setAttribute("id","popSelectField"+id);var validate=_dataObject.getDataItemObj().advancedSettings.dataValidation;if(validate){table.addEventListener("click",selectClick,false);table.setAttribute("class","popSelectField")}else table.setAttribute("class","popSelectFieldDisabled");var tr=document.createElement("TR");var td_1=document.createElement("TD");var spanFieldSelectText=document.createElement("SPAN");spanFieldSelectText.setAttribute("id","selectFieldText"+id);spanFieldSelectText.setAttribute("class","selectFieldText");if(validate)spanFieldSelectText.setAttribute("class","selectFieldText");else spanFieldSelectText.setAttribute("class","selectFieldTextDisabled");var val_type=_dataObject.getDataItemObj().advancedSettings.validationType;var selectedText;if(type==="AdvancedType"){table.setAttribute("data-for","popSelect"+type);if(validate&&val_type){selectedText=getTextForId(val_type,_select1_id,_select1_text)}else{selectedText=_select1_text[0]}}else{if(validate&&val_type){var val_2nd_select;if(val_type==="text"){table.setAttribute("data-for","popSelectAdvancedText");val_2nd_select=_dataObject.getDataItemObj().advancedSettings.textValidation.type;if(val_2nd_select){selectedText=getTextForId(val_2nd_select,_select2_id[0],_select2_text[0])}}else if(val_type==="regular_expression"){table.setAttribute("data-for","popSelectAdvancedRegExp");val_2nd_select=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type;if(val_2nd_select){selectedText=getTextForId(val_2nd_select,_select2_id[1],_select2_text[1])}}else{selectedText=_select2_text[0][0]}}else{table.setAttribute("data-for","popSelectAdvancedText");selectedText=_select2_text[0][0]}}var text;text=document.createTextNode(selectedText);spanFieldSelectText.appendChild(text);td_1.appendChild(spanFieldSelectText);tr.appendChild(td_1);var td_2=document.createElement("TD");var spanImageSelect=document.createElement("SPAN");spanImageSelect.setAttribute("class",_fieldBase._triangleClassSouth);divFieldSelect.appendChild(spanImageSelect);td_2.appendChild(spanImageSelect);tr.appendChild(td_2);table.appendChild(tr);table.style="";divFieldSelect.appendChild(table);var select_PopUp;if(type==="AdvancedType"){select_PopUp=createSelectPopUp(type,_select1_id,_select1_text);divFieldSelect.appendChild(select_PopUp)}else{var select_PopUp_text=createSelectPopUp("AdvancedText",_select2_id[0],_select2_text[0]);var select_PopUp_regExp=createSelectPopUp("AdvancedRegExp",_select2_id[1],_select2_text[1]);divFieldSelect.appendChild(select_PopUp_text);divFieldSelect.appendChild(select_PopUp_regExp)}return divFieldSelect}function createInputFieldsForText(val_type,text_type_id,charCount,validate){var div=document.createElement("DIV");div.setAttribute("id","divTextType");if(validate&&val_type==="regular_expression")div.style.display="none";var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputCharCount");input_1.setAttribute("type","text");input_1.setAttribute("class","inputShort");input_1.setAttribute("placeholder",_text["placeholderNumber"]);input_1.addEventListener("keyup",text_key_pressed,false);input_1.addEventListener("blur",text_input_blur,false);if(validate&&val_type==="text"){var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(text_type_id,_select2_id[0],_select2_text_summary[0]);desc_text=desc_text+" "+charCount+" "+_text["charactersWord"];_fieldBase.setAdvancedSettingsDescriptionText(desc_text);input_1.value=charCount}else if(!validate){input_1.disabled=true}div.appendChild(input_1);return div}function createInputFieldsForRegExp(val_type,reg_exp_type_id,pattern,validate){var div=document.createElement("DIV");div.setAttribute("id","divRegExpType");if(!validate||val_type!=="regular_expression")div.style.display="none";var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputRegExp");input_1.setAttribute("class","inputShort");input_1.setAttribute("type","text");input_1.setAttribute("placeholder",_text["placeholderRegExp"]);input_1.addEventListener("keyup",reg_exp_key_pressed,false);if(validate&&val_type==="regular_expression"){var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(reg_exp_type_id,_select2_id[1],_select2_text_summary[1]);desc_text=desc_text+" "+pattern;_fieldBase.setAdvancedSettingsDescriptionText(desc_text);input_1.value=pattern}div.appendChild(input_1);return div}function createInputFieldForErrorText(text,validate){var div=document.createElement("DIV");div.setAttribute("id","divErrorText");var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputErrorText");input_1.setAttribute("type","text");input_1.setAttribute("placeholder",_text["placeholderErrorText"]);input_1.addEventListener("keyup",error_key_pressed,false);input_1.value=text;if(!validate)input_1.disabled=true;div.appendChild(input_1);return div}function getTextForId(id,idArray,textArray){for(i=0;i<Object.keys(textArray).length;i++){if(id===idArray[i])return textArray[i]}return undefined}function getSelectedPopUpNro(id,idArray){for(i=0;i<Object.keys(idArray).length;i++){if(id===idArray[i])return i+1}return undefined}function createSelectPopUp(name,idArray,textArray){var div=document.createElement("DIV");div.setAttribute("id","popSelect"+name);div.setAttribute("class","popSelect");for(i=0;i<Object.keys(textArray).length;i++){var div_sub=document.createElement("DIV");div_sub.setAttribute("id",idArray[i]);div_sub.setAttribute("data-nro",i+1);div_sub.setAttribute("class","popSelectItem");div_sub.addEventListener("click",popUpSelect,false);var text=document.createTextNode(textArray[i]);div_sub.appendChild(text);div.appendChild(div_sub)}return div}function checkBoxClicked(){var _data=dataObj.getDataItemObj();_fieldBase.unsetActiveSelectField();if(_data.advancedSettings.dataValidation===false){_dataObject.setDataValidation(true);_dataObject.setValidationType(_select1_id[0]);document.getElementById("selectFieldTextSelect1").innerHTML=_select1_text[0];_dataObject.setTextValidationType(_select2_id[0][0]);_dataObject.setRegExpValidationType("",_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][0];document.getElementById("popSelectFieldSelect2").setAttribute("data-for","popSelectAdvancedText");document.getElementById("divTextType").style.display="inline";document.getElementById("inputCharCount").style.display="inline";document.getElementById("popSelectFieldSelect1").addEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect2").addEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect1").setAttribute("class","popSelectField");document.getElementById("popSelectFieldSelect2").setAttribute("class","popSelectField");document.getElementById("selectFieldTextSelect1").setAttribute("class","selectFieldText");document.getElementById("selectFieldTextSelect2").setAttribute("class","selectFieldText");document.getElementById("inputCharCount").disabled=false;document.getElementById("inputErrorText").disabled=false;var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(_select2_id[0][0],_select2_id[0],_select2_text_summary[0]);desc_text=desc_text+" "+_text["charactersWord"];_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else{_dataObject.setDataValidation(false);_dataObject.setValidationType("");_dataObject.setTextValidationType("");_dataObject.setTextValidationCharCount("");_dataObject.setRegExpValidationType("");_dataObject.setRegExpValidationPattern("");_dataObject.setErrorText("",_fieldBase.saveDataItem);document.getElementById("divTextType").style.display="inline";document.getElementById("divRegExpType").style.display="none";$("#inputCharCount").val("");$("#inputRegExp").val("");$("#inputErrorText").val("");document.getElementById("popSelectFieldSelect1").removeEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect2").removeEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect1").setAttribute("class","popSelectFieldDisabled");document.getElementById("popSelectFieldSelect2").setAttribute("class","popSelectFieldDisabled");document.getElementById("selectFieldTextSelect1").setAttribute("class","selectFieldTextDisabled");document.getElementById("selectFieldTextSelect2").setAttribute("class","selectFieldTextDisabled");document.getElementById("inputCharCount").disabled=true;document.getElementById("inputErrorText").disabled=true;document.getElementById("selectFieldTextSelect1").innerHTML=_select1_text[0];document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][0];_fieldBase.setAdvancedSettingsDescriptionText("");if(document.getElementById("advErrorRow").style.display=="inline"){document.getElementById("advErrorRow").style.display="none";document.getElementById("inputCharCount").setAttribute("class","inputShort")}}}function popUpSelect(){var parentId=this.parentNode.id;var dataNro=this.getAttribute("data-nro");dataNro=parseInt(dataNro)-1;if(parentId==="popSelectAdvancedType"){_dataObject.setValidationType(_select1_id[dataNro]);document.getElementById("selectFieldTextSelect1").innerHTML=_select1_text[dataNro];_fieldBase.setActiveSelectField("popSelectFieldSelect1");if(_prev_type!==_select1_id[dataNro]){if(document.getElementById("advErrorRow").style.display=="inline"){document.getElementById("advErrorRow").style.display="none";document.getElementById("inputCharCount").setAttribute("class","inputShort")}if(_select1_id[dataNro]==="number"){document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][0];document.getElementById("popSelectFieldSelect2").setAttribute("data-for","popSelectAdvancedNumber");document.getElementById("divNumberType").style.display="inline";document.getElementById("divTextType").style.display="none";document.getElementById("divRegExpType").style.display="none";document.getElementById("inputNumber1").style.display="inline";document.getElementById("labelNumber").style.display="none";document.getElementById("inputNumber2").style.display="none";document.getElementById("inputNumber1").value="";document.getElementById("inputNumber2").value="";_dataObject.setNumberValidationType(_select2_id[0][0]);_dataObject.setTextValidationType("");_dataObject.setTextValidationText("");_dataObject.setRegExpValidationType("");_dataObject.setRegExpValidationPattern("",_fieldBase.saveDataItem);var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(_select2_id[0][0],_select2_id[0],_select2_text_summary[0]);_fieldBase.setAdvancedSettingsDescriptionText(desc_text);setErrorMsgPos()}else if(_select1_id[dataNro]==="text"){document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][0];document.getElementById("popSelectFieldSelect2").setAttribute("data-for","popSelectAdvancedText");document.getElementById("divTextType").style.display="inline";document.getElementById("divRegExpType").style.display="none";document.getElementById("inputCharCount").style.display="inline";_dataObject.setTextValidationType(_select2_id[0][0]);_dataObject.setRegExpValidationType("");_dataObject.setRegExpValidationPattern("",_fieldBase.saveDataItem);document.getElementById("inputCharCount").value="";var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(_select2_id[0][0],_select2_id[0],_select2_text_summary[0]);desc_text=desc_text+" "+_text["charactersWord"]+" "+_text["charactersWord"];_fieldBase.setAdvancedSettingsDescriptionText(desc_text);setErrorMsgPos()}else if(_select1_id[dataNro]==="regular_expression"){document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[1][0];document.getElementById("popSelectFieldSelect2").setAttribute("data-for","popSelectAdvancedRegExp");document.getElementById("divTextType").style.display="none";document.getElementById("divRegExpType").style.display="inline";_dataObject.setRegExpValidationType(_select2_id[1][0]);_dataObject.setTextValidationType("");_dataObject.setTextValidationCharCount("",_fieldBase.saveDataItem);document.getElementById("inputRegExp").value="";var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(_select2_id[1][0],_select2_id[1],_select2_text_summary[1]);_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}}_prev_type=_select1_id[dataNro]}else if(parentId==="popSelectAdvancedText"){_fieldBase.setActiveSelectField("popSelectFieldSelect2");var prev_type_id=_dataObject.getDataItemObj().advancedSettings.textValidation.type;if(prev_type_id===_select2_id[0][dataNro]){$("#"+parentId).hide();return}setErrorMsgPos();var type_id=_select2_id[0][dataNro];_dataObject.setTextValidationType(_select2_id[0][dataNro],_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][dataNro];document.getElementById("inputCharCount").style.display="inline";var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(type_id,_select2_id[0],_select2_text_summary[0]);var charCount=_dataObject.getDataItemObj().advancedSettings.textValidation.charCount;if(charCount===undefined)charCount="";desc_text=desc_text+" "+charCount+" "+_text["charactersWord"];_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else if(parentId==="popSelectAdvancedRegExp"){_fieldBase.setActiveSelectField("popSelectFieldSelect2");var prev_type_id=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type;if(prev_type_id===_select2_id[1][dataNro]){$("#"+parentId).hide();return}var type_id=_select2_id[1][dataNro];_dataObject.setRegExpValidationType(type_id,_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[1][dataNro];var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(type_id,_select2_id[1],_select2_text_summary[1]);var regExp=document.getElementById("inputRegExp").value;desc_text=desc_text+" "+regExp;_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}$("#"+parentId).hide()}function setErrorMsgPos(){var posLeft1=$("#tblAdvanced").offset().left;var posLeft2=$("#popSelectFieldDivSelect2").offset().left;var posLeft=$("#tdSelect2").position().left;var outerWidth=$("#popSelectFieldDivSelect2").outerWidth();$("#advErrorMsg").css({position:"relative",left:posLeft2+outerWidth-posLeft1+3+"px"}).show()}function selectClick(){_fieldBase.unsetActiveSelectField();var id="#"+this.parentNode.id;var posTop=$(id).offset().top;var selectField_id="#"+this.id;var popSelect_Id="#"+this.getAttribute("data-for");var popSelectPosition=$(popSelect_Id).css("position");var selectFieldPadding=$(popSelect_Id).css("padding-top");var selectFieldPaddingHeight=parseInt(selectFieldPadding);var nroOfItems=$(popSelect_Id+" div").length;var popHeight=$(popSelect_Id+" > div:first-child").css("min-height")||$(popSelect_Id+" > div:first-child").outerHeight();height=parseInt(popHeight);var itemPadding=$(popSelect_Id+" > div:first-child").css("padding-top");var itemPaddingHeight=parseInt(itemPadding);var heightPerItem=height+itemPaddingHeight;var selectNro=1;if(popSelect_Id==="#popSelectAdvancedType"){var val_type=_dataObject.getDataItemObj().advancedSettings.validationType;if(val_type){selectNro=getSelectedPopUpNro(val_type,_select1_id)}}if(popSelect_Id==="#popSelectAdvancedText"){var type=_dataObject.getDataItemObj().advancedSettings.textValidation.type;if(type){selectNro=getSelectedPopUpNro(type,_select2_id[0])}}else if(popSelect_Id==="#popSelectAdvancedRegExp"){var type=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type;if(type){selectNro=getSelectedPopUpNro(type,_select2_id[1])}}var topSpaceNarrow=false;var pos=$(selectField_id).offset();var selectTopSize=(selectNro-1)*heightPerItem;var spaceBetweenTop=pos.top-$(window).scrollTop();if(spaceBetweenTop<-1){spaceBetweenTop=spaceBetweenTop*-1}if(selectTopSize>spaceBetweenTop){topSpaceNarrow=true;selectTopSize=spaceBetweenTop}else{spaceBetweenTop=selectTopSize}var spaceForNroOfItemsAbove=Math.floor(spaceBetweenTop/heightPerItem);var nroOfItemsBelow=nroOfItems-1-spaceForNroOfItemsAbove;var selectBottomSize=(nroOfItems-selectNro)*heightPerItem;var spaceBetweenBottom=pos.top+$(selectField_id).height()-($(window).scrollTop()+$(window).height());if(spaceBetweenBottom<-1){spaceBetweenBottom=spaceBetweenBottom*-1}if(spaceBetweenBottom>selectBottomSize){spaceBetweenBottom=selectBottomSize}var spaceForNroOfItems=Math.floor(spaceBetweenBottom/heightPerItem);var nroOfItemsAbove=nroOfItems-1-spaceForNroOfItems;var reducedFromBottom=0;var j=0;var vertical=0;if(topSpaceNarrow){vertical=spaceForNroOfItemsAbove*heightPerItem}else{vertical=nroOfItemsAbove*heightPerItem}var width=$(selectField_id).outerWidth();$(".popSelect").hide();$(popSelect_Id).css({position:"absolute",top:pos.top-vertical-selectFieldPaddingHeight-1+"px",left:pos.left-10+"px"}).show();document.getElementById(popSelect_Id.substr(1)).addEventListener("mouseleave",function(){$(popSelect_Id).hide()})}function text_key_pressed(){var text_type_id=_dataObject.getDataItemObj().advancedSettings.textValidation.type;var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(text_type_id,_select2_id[0],_select2_text_summary[0]);var input1Val=_fieldBase.replaceCommaAndRemoveWhitespace(this.value);var isInput1Int=_fieldBase.is_integer(input1Val);if(!isInput1Int){desc_text=desc_text+" "+_text["charactersWord"];_dataObject.setTextValidationCharCount("",_fieldBase.saveDataItem)}else{_dataObject.setTextValidationCharCount(parseInt(input1Val),_fieldBase.saveDataItem);desc_text=desc_text+" "+input1Val+" "+_text["charactersWord"]}_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}function text_input_blur(){var input1Val=_fieldBase.replaceCommaAndRemoveWhitespace(document.getElementById("inputCharCount").value);var isInput1Int=_fieldBase.is_integer(input1Val);var input1Length=input1Val.length;var input1Empty=input1Length==0?true:false;if(!isInput1Int&&!input1Empty){setErrorMsgPos();document.getElementById("advErrorRow").style.display="inline";document.getElementById("inputCharCount").setAttribute("class","inputShort inputError")}else if(isInput1Int||input1Empty){document.getElementById("inputCharCount").setAttribute("class","inputShort");if(input1Empty&&document.getElementById("inputCharCount").value.length>0)document.getElementById("inputCharCount").value="";document.getElementById("advErrorRow").style.display="none"}}function reg_exp_key_pressed(){var reg_exp_type_id=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type;var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(reg_exp_type_id,_select2_id[1],_select2_text_summary[1]);desc_text=desc_text+" "+this.value;_fieldBase.setAdvancedSettingsDescriptionText(desc_text);_dataObject.setRegExpValidationPattern(this.value,_fieldBase.saveDataItem)}function error_key_pressed(){_dataObject.setErrorText(this.value,_fieldBase.saveDataItem)}}function PopupMenu(type){var _type=type;var _fieldBase=new FieldBase;this.createPopupMenu=createPopupMenu;var _text={};_text["popAddItem"]="Add item";_text["popHeader1"]="BASIC";_text["textField"]="Text";_text["paragraphField"]="Paragraph field";_text["radioButton"]="Multiple choice";_text["checkBox"]="Checkboxes";_text["list"]="Choose from a list";_text["popHeader2"]="ADVANCED";_text["scaleField"]="Scale";_text["grid"]="Grid";_text["dateField"]="Date";_text["timeField"]="Time";_text["popHeader3"]="LAYOUT";_text["sectionHeader"]="Section header";_text["pageBreak"]="Page break";_text["image"]="Image";_text["video"]="Video";function createPopupMenu(){var div=createSelectField();return div}function createSelectField(){var divFieldSelect=document.createElement("DIV");var state;if(_type===undefined){state="addItem"}else{state="active"}divFieldSelect.setAttribute("id","popSelectMenu_"+state);var table=document.createElement("table");table.setAttribute("id","popSelectField_"+state);table.addEventListener("click",menuSelectClick,false);table.setAttribute("class","popSelectField");var tr=document.createElement("TR");var td_1=document.createElement("TD");var spanFieldSelectText=document.createElement("SPAN");spanFieldSelectText.setAttribute("class","selectFieldText");table.setAttribute("data-for","popMenuTable_"+state);var text;if(_type===undefined){text=document.createTextNode(_text["popAddItem"])}else{text=document.createTextNode(_text[_type])}spanFieldSelectText.appendChild(text);td_1.appendChild(spanFieldSelectText);tr.appendChild(td_1);var td_2=document.createElement("TD");var spanImageSelect=document.createElement("SPAN");spanImageSelect.setAttribute("class",_fieldBase._triangleClassSouth);divFieldSelect.appendChild(spanImageSelect);td_2.appendChild(spanImageSelect);tr.appendChild(td_2);table.appendChild(tr);table.style="";divFieldSelect.appendChild(table);pop_Table=createSelectTypeTable();pop_Table.setAttribute("id","popMenuTable_"+state);divFieldSelect.appendChild(pop_Table);return divFieldSelect}function createSelectTypeTable(){var table=document.createElement("table");table.setAttribute("class","popMenuTable");var thead=document.createElement("thead");var tr_1=document.createElement("tr");var th_1=document.createElement("th");var h_1=document.createTextNode(_text["popHeader1"]);th_1.appendChild(h_1);tr_1.appendChild(th_1);thead.appendChild(tr_1);var th_2=document.createElement("th");var h_2=document.createTextNode(_text["popHeader2"]);th_2.appendChild(h_2);tr_1.appendChild(th_2);var th_3=document.createElement("th");var h_3=document.createTextNode(_text["popHeader3"]);th_3.appendChild(h_3);tr_1.appendChild(th_3);thead.appendChild(tr_1);table.appendChild(thead);var tbody=document.createElement("TBODY");var tr_2=document.createElement("tr");var divTxt=document.createElement("div");divTxt.setAttribute("class","divLabelTextField");var labelTextField=document.createElement("label");labelTextField.setAttribute("class","labelTextField");labelTextField.innerText="ABC";divTxt.appendChild(labelTextField);var td_2_1=document.createElement("td");var lbl_2_1=document.createElement("label");var txt_2_1=document.createTextNode(_text["textField"]);lbl_2_1.appendChild(txt_2_1);td_2_1.appendChild(createFieldMenuItemTable(divTxt,lbl_2_1,"popTextField"));tr_2.appendChild(td_2_1);var img_scale=document.createElement("img");img_scale.src=_fieldBase._embed_png_src;var td_2_2=document.createElement("td");var lbl_2_2=document.createElement("label");var txt_2_2=document.createTextNode(_text["scaleField"]);lbl_2_2.appendChild(txt_2_2);td_2_2.appendChild(createFieldMenuItemTable(img_scale,lbl_2_2,"popScaleField"));tr_2.appendChild(td_2_2);var td_2_3=document.createElement("td");var lbl_2_3=document.createElement("label");var txt_2_3=document.createTextNode(_text["sectionHeader"]);lbl_2_3.appendChild(txt_2_3);var img_section_header=document.createElement("img");img_section_header.src=_fieldBase._insert_template_png_src;td_2_3.appendChild(createFieldMenuItemTable(img_section_header,lbl_2_3,"popSectionHeader"));tr_2.appendChild(td_2_3);var tr_3=document.createElement("tr");var td_3_1=document.createElement("td");var lbl_3_1=document.createElement("label");var txt_3_1=document.createTextNode(_text["paragraphField"]);lbl_3_1.appendChild(txt_3_1);var img_parag=document.createElement("img");img_parag.src=_fieldBase._pilcrow_png_src;td_3_1.appendChild(createFieldMenuItemTable(img_parag,lbl_3_1,"popParagraphField"));tr_3.appendChild(td_3_1);var td_3_2=document.createElement("td");var lbl_3_2=document.createElement("label");var txt_3_2=document.createTextNode(_text["grid"]);lbl_3_2.appendChild(txt_3_2);var img_grid=document.createElement("img");img_grid.src=_fieldBase._table2_png_src;td_3_2.appendChild(createFieldMenuItemTable(img_grid,lbl_3_2,"popGrid"));tr_3.appendChild(td_3_2);var td_3_3=document.createElement("td");tr_3.appendChild(td_3_3);var tr_4=document.createElement("tr");var td_4_1=document.createElement("td");var lbl_4_1=document.createElement("label");var txt_4_1=document.createTextNode(_text["radioButton"]);lbl_4_1.appendChild(txt_4_1);var img_radio=document.createElement("img");img_radio.src=_fieldBase._radio_checked_png_src;td_4_1.appendChild(createFieldMenuItemTable(img_radio,lbl_4_1,"popRadioButton"));tr_4.appendChild(td_4_1);var td_4_2=document.createElement("td");var lbl_4_2=document.createElement("label");var txt_4_2=document.createTextNode(_text["dateField"]);lbl_4_2.appendChild(txt_4_2);var img_cal=document.createElement("img");img_cal.src=_fieldBase._calendar_png_src;td_4_2.appendChild(createFieldMenuItemTable(img_cal,lbl_4_2,"popDateField"));tr_4.appendChild(td_4_2);var td_4_3=document.createElement("td");tr_4.appendChild(td_4_3);var tr_5=document.createElement("tr");var td_5_1=document.createElement("td");var lbl_5_1=document.createElement("label");var txt_5_1=document.createTextNode(_text["checkBox"]);lbl_5_1.appendChild(txt_5_1);var img_cb=document.createElement("img");img_cb.src=_fieldBase._checkbox_checked_png_src;td_5_1.appendChild(createFieldMenuItemTable(img_cb,lbl_5_1,"popCheckBox"));tr_5.appendChild(td_5_1);var td_5_2=document.createElement("td");var lbl_5_2=document.createElement("label");var txt_5_2=document.createTextNode(_text["timeField"]);lbl_5_2.appendChild(txt_5_2);var img_clock=document.createElement("img");img_clock.src=_fieldBase._clock_png_src;td_5_2.appendChild(createFieldMenuItemTable(img_clock,lbl_5_2,"popTimeField"));tr_5.appendChild(td_5_2);var td_5_3=document.createElement("td");tr_5.appendChild(td_5_3);var tr_6=document.createElement("tr");var td_6_1=document.createElement("td");var lbl_6_1=document.createElement("label");var txt_6_1=document.createTextNode(_text["list"]);lbl_6_1.appendChild(txt_6_1);var borderSelect=document.createElement("div");borderSelect.setAttribute("class","fieldMenuItemSelect");var spanImageSelect=document.createElement("SPAN");spanImageSelect.setAttribute("class",_fieldBase._triangleClassSouth);var imageSelect2=document.createElement("IMG");imageSelect2.setAttribute("class","fieldMenuItemImage");imageSelect2.setAttribute("src",_fieldBase._select2_png_src);borderSelect.appendChild(imageSelect2);td_6_1.appendChild(createFieldMenuItemTable(borderSelect,lbl_6_1,"popList"));tr_6.appendChild(td_6_1);var td_6_2=document.createElement("td");tr_6.appendChild(td_6_2);var td_6_3=document.createElement("td");
tr_6.appendChild(td_6_3);tbody.appendChild(tr_2);tbody.appendChild(tr_3);tbody.appendChild(tr_4);tbody.appendChild(tr_5);tbody.appendChild(tr_6);table.appendChild(tbody);return table}function createFieldMenuItemTable(elem1,elem2,id){var table=document.createElement("TABLE");table.setAttribute("class","fieldMenuItem");table.setAttribute("data-fieldType",id);table.addEventListener("click",fieldMenuItemClick,false);var row=document.createElement("TR");var td_1=document.createElement("TD");if(elem1)td_1.appendChild(elem1);row.appendChild(td_1);var td_2=document.createElement("TD");if(elem2)td_2.appendChild(elem2);row.appendChild(td_2);table.appendChild(row);return table}function fieldMenuItemClick(){if(_type)_fieldBase.setActiveSelectField("popSelectField_active")}function menuSelectClick(){_fieldBase.unsetActiveSelectField();var id="#"+this.parentNode.id;var posTop=$(id).offset().top;var posLeft=$(id).offset().left;var thisId="#"+this.id;var popSelect_Id="#"+this.getAttribute("data-for");var parentHeight=$(id).css("min-height")||$(id).outerHeight();var thisHeight=$(thisId).css("min-height")||$(thisId).outerHeight();var popHeight=$(popSelect_Id).css("min-height")||$(popSelect_Id).outerHeight();popHeight=parseInt(popHeight);popHeight=$(popSelect_Id).height();var heightPerItem=1;var topSpaceNarrow=false;var elementSize=$(id).offset().top+$(id).height()+popHeight;var spaceBetweenBottom=elementSize-($(window).scrollTop()+$(window).height());var adjust=0;if(spaceBetweenBottom>0){if(spaceBetweenBottom>$(id).height()+popHeight){console.log("adjust");adjust=$(id).height()+popHeight}else{adjust=spaceBetweenBottom}adjust+=20}else{adjust=2}$(".popSelect").hide();$(popSelect_Id).css({position:"absolute",top:$(id).offset().top+$(id).height()-adjust+"px",left:$(id).offset().left+"px"}).show();document.getElementById(this.parentNode.id).addEventListener("mouseleave",function(){$(popSelect_Id).hide()})}}function ScaleField(dataObj){var _fieldBase=new FieldBase;var _elementToAppendTo=_fieldBase._elementToAppendTo;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();this.renderDevelopmentView=renderDevelopmentView;this.getCompletedView=getCompletedView;this.getBootstrapView=getBootstrapView;var _text={};_text["placeholderLabelOptional"]="Label (optional)";_text["toWord"]="to";_text["scaleLabel"]="Scale";var _select1_text={};_select1_text[0]=new Array(2);_select1_text[0][0]="0";_select1_text[0][1]="1";var _select1_id={};_select1_id[0]=new Array(2);_select1_id[0][0]=0;_select1_id[0][1]=1;var _select2_text={};_select2_text[0]=new Array(8);_select2_text[0][0]="2";_select2_text[0][1]="3";_select2_text[0][2]="4";_select2_text[0][3]="5";_select2_text[0][4]="6";_select2_text[0][5]="7";_select2_text[0][6]="8";_select2_text[0][7]="9";var _select2_id={};_select2_id[0]=new Array(8);_select2_id[0][0]=2;_select2_id[0][1]=3;_select2_id[0][2]=4;_select2_id[0][3]=5;_select2_id[0][4]=6;_select2_id[0][5]=7;_select2_id[0][6]=8;_select2_id[0][7]=9;function renderDevelopmentView(){$(_advSettingsContentId).hide();var div=document.createElement("DIV");var table=document.createElement("TABLE");table.setAttribute("class","scaleTable");var row1=createScaleSettingsRow();var row2=createScaleLabel1Row();var row3=createScaleLabel2Row();table.appendChild(row1);table.appendChild(row2);table.appendChild(row3);div.appendChild(table);document.getElementById(_elementToAppendTo.substr(1)).appendChild(div)}function createScaleSettingsRow(){var row=document.createElement("TR");var td_1=document.createElement("TD");var div=document.createElement("DIV");div.setAttribute("id","divScaleLabel");div.innerText=_text["scaleLabel"];td_1.appendChild(div);row.appendChild(td_1);var td_2=document.createElement("TD");var tableInner=document.createElement("table");var tr_inner=document.createElement("tr");var td_1_inner=document.createElement("TD");var divSelect_1=createSelectField("Select1");td_1_inner.appendChild(divSelect_1);tr_inner.appendChild(td_1_inner);var td_2_inner=document.createElement("TD");var label_2=document.createElement("label");label_2.innerText=_text["toWord"];td_2_inner.appendChild(label_2);tr_inner.appendChild(td_2_inner);var td_3_inner=document.createElement("TD");var divSelect_2=createSelectField("Select2");td_3_inner.appendChild(divSelect_2);tr_inner.appendChild(td_3_inner);tableInner.appendChild(tr_inner);td_2.appendChild(tableInner);row.appendChild(td_2);var td_3=document.createElement("TD");row.appendChild(td_3);var td_4=document.createElement("TD");row.appendChild(td_4);var td_5=document.createElement("TD");row.appendChild(td_5);return row}function createScaleLabel1Row(){var row=document.createElement("TR");var td_1=document.createElement("TD");var div=document.createElement("DIV");td_1.appendChild(div);row.appendChild(td_1);var td_2=document.createElement("TD");td_2.setAttribute("colspan",3);var label_2=document.createElement("label");label_2.setAttribute("id","scaleLabel1");try{var val_from=_dataObject.getDataItemObj().from}catch(e){}if(/^[0-9]+[.]?$/.test(val_from)){label_2.innerText=val_from+":"}else{label_2.innerText="1:"}td_2.appendChild(label_2);var fromLabel="";try{fromLabel=_dataObject.getDataItemObj().fromLabel}catch(e){}var input=document.createElement("input");input.setAttribute("type","text");input.setAttribute("placeholder",_text["placeholderLabelOptional"]);input.addEventListener("keyup",label_1_key_pressed,false);fromLabel?input.value=fromLabel:"";td_2.appendChild(input);row.appendChild(td_2);var td_3=document.createElement("TD");row.appendChild(td_3);return row}function createScaleLabel2Row(){var row=document.createElement("TR");var td_1=document.createElement("TD");var div=document.createElement("DIV");td_1.appendChild(div);row.appendChild(td_1);var td_2=document.createElement("TD");td_2.setAttribute("colspan",3);var label_2=document.createElement("label");label_2.setAttribute("id","scaleLabel2");try{var val_to=_dataObject.getDataItemObj().to}catch(e){}_fieldBase.is_integer(val_to)?label_2.innerText=val_to+":":label_2.innerText="5:";var toLabel="";try{toLabel=_dataObject.getDataItemObj().toLabel}catch(e){}var input=document.createElement("input");input.setAttribute("type","text");input.setAttribute("placeholder",_text["placeholderLabelOptional"]);input.addEventListener("keyup",label_2_key_pressed,false);toLabel?input.value=toLabel:"";td_2.appendChild(label_2);td_2.appendChild(input);row.appendChild(td_2);var td_3=document.createElement("TD");row.appendChild(td_3);return row}function createSelectField(id){var divFieldSelect=document.createElement("DIV");divFieldSelect.setAttribute("id","popSelectFieldDiv"+id);var table=document.createElement("table");table.setAttribute("id","popSelectField"+id);table.addEventListener("click",selectClick,false);table.setAttribute("class","popSelectField");var tr=document.createElement("TR");var td_1=document.createElement("TD");var spanFieldSelectText=document.createElement("SPAN");spanFieldSelectText.setAttribute("id","selectFieldText"+id);spanFieldSelectText.setAttribute("class","selectFieldText");spanFieldSelectText.setAttribute("class","selectFieldText");var selectedText;if(id=="Select1"){table.setAttribute("data-for","popSelectFrom");var val_1st_select;try{val_1st_select=_dataObject.getDataItemObj().from}catch(e){}if(val_1st_select){selectedText=getTextForId(val_1st_select,_select1_id[0],_select1_text[0])}else{selectedText=_select1_text[0][0]}}else{table.setAttribute("data-for","popSelectTo");var val_2nd_select;try{val_2nd_select=_dataObject.getDataItemObj().to}catch(e){}if(val_2nd_select){selectedText=getTextForId(val_2nd_select,_select2_id[0],_select2_text[0])}else{selectedText=_select2_text[0][0]}}var text;text=document.createTextNode(selectedText);spanFieldSelectText.appendChild(text);td_1.appendChild(spanFieldSelectText);tr.appendChild(td_1);var td_2=document.createElement("TD");var spanImageSelect=document.createElement("SPAN");spanImageSelect.setAttribute("class",_fieldBase._triangleClassNorthSouth);divFieldSelect.appendChild(spanImageSelect);td_2.appendChild(spanImageSelect);tr.appendChild(td_2);table.appendChild(tr);table.style="";divFieldSelect.appendChild(table);var select_PopUp_text="";if(id=="Select1"){select_PopUp_text=createSelectPopUp("From",_select1_id[0],_select1_text[0])}else{select_PopUp_text=createSelectPopUp("To",_select2_id[0],_select2_text[0])}divFieldSelect.appendChild(select_PopUp_text);return divFieldSelect}function createCheckBoxInput(type,select_type_id,checkCount,validate){var div=document.createElement("DIV");div.setAttribute("id","divTextType");var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputCheckCount");input_1.setAttribute("type","text");input_1.setAttribute("class","inputShort");input_1.setAttribute("placeholder",_text["placeholderNumber"]);input_1.addEventListener("keyup",text_key_pressed,false);input_1.addEventListener("blur",text_input_blur,false);if(!validate)input_1.disabled=true;if(type==="checkBox"&&validate==true){input_1.value=checkCount}div.appendChild(input_1);return div}function createInputFieldForErrorText(text,validate){var div=document.createElement("DIV");div.setAttribute("id","divErrorText");var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputErrorText");input_1.setAttribute("type","text");input_1.setAttribute("placeholder",_text["placeholderErrorText"]);input_1.addEventListener("keyup",error_key_pressed,false);input_1.value=text;if(!validate)input_1.disabled=true;div.appendChild(input_1);return div}function createTableForShuffleOptionOrder(validate){var table=document.createElement("table");var row=document.createElement("TR");row.setAttribute("class","shuffleOptionOrderTableRow");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","shuffle");input.setAttribute("type","checkbox");var value=false;try{value=_dataObject.getDataItemObj().advancedSettings.shuffleOrder}catch(e){}if(value===true){input.setAttribute("checked","checked")}$(_advSettingsContentId).hide();input.addEventListener("click",shuffleCheckBoxClicked,false);td_1.appendChild(input);var td_2=document.createElement("TD");td_2.setAttribute("colspan","4");var label=document.createElement("label");label.setAttribute("for","shuffle");var txtLabel=document.createTextNode(_text["labelShuffleOptionOrder"]);label.appendChild(txtLabel);td_2.appendChild(label);row.appendChild(td_1);row.appendChild(td_2);table.appendChild(row);_text["shuffleOnText"];return table}function getTextForId(id,idArray,textArray){for(i=0;i<Object.keys(textArray).length;i++){if(id===idArray[i])return textArray[i]}return undefined}function getSelectedPopUpNro(id,idArray){for(i=0;i<Object.keys(idArray).length;i++){if(id===idArray[i])return i+1}return undefined}function createSelectPopUp(name,idArray,textArray){var div=document.createElement("DIV");div.setAttribute("id","popSelect"+name);div.setAttribute("class","popSelect");for(i=0;i<Object.keys(textArray).length;i++){var div_sub=document.createElement("DIV");div_sub.setAttribute("id",idArray[i]);div_sub.setAttribute("data-nro",i+1);div_sub.setAttribute("class","popSelectItemScale");div_sub.addEventListener("click",popUpSelect,false);var text=document.createTextNode(textArray[i]);div_sub.appendChild(text);div.appendChild(div_sub)}return div}function popUpSelect(){var parentId=this.parentNode.id;var dataNro=this.getAttribute("data-nro");dataNro=parseInt(dataNro)-1;if(parentId==="popSelectFrom"){_fieldBase.setActiveSelectField("popSelectFieldSelect1");var prev_from_id=_dataObject.getDataItemObj().from;if(prev_from_id===_select1_id[0][dataNro]){$("#"+parentId).hide();return}_dataObject.setFrom(parseInt(_select1_id[0][dataNro]),_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect1").innerHTML=_select1_text[0][dataNro];document.getElementById("scaleLabel1").innerText=_select1_text[0][dataNro]+":"}else if(parentId==="popSelectTo"){_fieldBase.setActiveSelectField("popSelectFieldSelect2");var prev_to_id=_dataObject.getDataItemObj().to;if(prev_to_id===_select2_id[0][dataNro]){$("#"+parentId).hide();return}_dataObject.setTo(parseInt(_select2_id[0][dataNro]),_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][dataNro];document.getElementById("scaleLabel2").innerText=_select2_text[0][dataNro]+":"}$("#"+parentId).hide()}function selectClick(){_fieldBase.unsetActiveSelectField();var id="#"+this.parentNode.id;var posTop=$(id).offset().top;var selectField_id="#"+this.id;var popSelect_Id="#"+this.getAttribute("data-for");var popSelectPosition=$(popSelect_Id).css("position");var selectFieldPadding=$(popSelect_Id).css("padding-top");var selectFieldPaddingHeight=parseInt(selectFieldPadding);var nroOfItems=$(popSelect_Id+" div").length;var popHeight=$(popSelect_Id+" > div:first-child").css("min-height")||$(popSelect_Id+" > div:first-child").outerHeight();height=parseInt(popHeight);var itemPadding=$(popSelect_Id+" > div:first-child").css("padding-top");var itemPaddingHeight=parseInt(itemPadding);var heightPerItem=height+itemPaddingHeight;var selectNro=1;if(popSelect_Id==="#popSelectFrom"){var from=_dataObject.getDataItemObj().from;if(from){selectNro=getSelectedPopUpNro(from,_select1_id[0])}}else if(popSelect_Id==="#popSelectTo"){var to=_dataObject.getDataItemObj().to;if(to){selectNro=getSelectedPopUpNro(to,_select2_id[0])}}var topSpaceNarrow=false;var pos=$(selectField_id).offset();var selectTopSize=(selectNro-1)*heightPerItem;var spaceBetweenTop=pos.top-$(window).scrollTop();if(spaceBetweenTop<-1){spaceBetweenTop=spaceBetweenTop*-1}if(selectTopSize>spaceBetweenTop){topSpaceNarrow=true;selectTopSize=spaceBetweenTop}else{spaceBetweenTop=selectTopSize}var spaceForNroOfItemsAbove=Math.floor(spaceBetweenTop/heightPerItem);var nroOfItemsBelow=nroOfItems-1-spaceForNroOfItemsAbove;var selectBottomSize=(nroOfItems-selectNro)*heightPerItem;var spaceBetweenBottom=pos.top+$(selectField_id).height()-($(window).scrollTop()+$(window).height());if(spaceBetweenBottom<-1){spaceBetweenBottom=spaceBetweenBottom*-1}if(spaceBetweenBottom>selectBottomSize){spaceBetweenBottom=selectBottomSize}var spaceForNroOfItems=Math.floor(spaceBetweenBottom/heightPerItem);var nroOfItemsAbove=nroOfItems-1-spaceForNroOfItems;var reducedFromBottom=0;var j=0;var vertical=0;if(topSpaceNarrow){vertical=spaceForNroOfItemsAbove*heightPerItem}else{vertical=nroOfItemsAbove*heightPerItem}var width=$(selectField_id).outerWidth();$(".popSelect").hide();$(popSelect_Id).css({position:"absolute",top:pos.top-vertical-selectFieldPaddingHeight-1+"px",left:pos.left-10+"px"}).show();document.getElementById(popSelect_Id.substr(1)).addEventListener("mouseleave",function(){$(popSelect_Id).hide()})}function label_1_key_pressed(){_dataObject.setFromLabel(this.value,_fieldBase.saveDataItem)}function label_2_key_pressed(){_dataObject.setToLabel(this.value,_fieldBase.saveDataItem)}function getCompletedView(){_data=_dataObject.getDataItemObj();var table=document.createElement("table");table.setAttribute("class","c-view-scale-table");var thead=document.createElement("thead");var tr_1=document.createElement("tr");tr_1.setAttribute("class","c-view-scale-tr");var from=_data.from;var to=_data.to;var startIndex=from-1;var endIndex=to+1;for(startIndex=from-1;startIndex<=endIndex;startIndex++){var td=document.createElement("td");var firstLoop=from-1;var lastLoop=to+1;if(!(startIndex==firstLoop||startIndex==lastLoop)){var div=document.createElement("div");div.innerText=startIndex;td.appendChild(div)}tr_1.appendChild(td)}thead.appendChild(tr_1);table.appendChild(thead);var tbody=document.createElement("tbody");var tr=document.createElement("tr");tr.setAttribute("class","c-view-scale-tr");for(startIndex=from-1;startIndex<=endIndex;startIndex++){var td=document.createElement("td");var firstLoop=from-1;var lastLoop=to+1;if(startIndex===firstLoop){var div=document.createElement("div");if(_data.fromLabel.length>0)div.innerText=_data.fromLabel;td.appendChild(div)}else if(startIndex===lastLoop){var div=document.createElement("div");if(_data.toLabel.length>0)div.innerText=_data.toLabel;td.appendChild(div)}else{var inputRadio=document.createElement("INPUT");inputRadio.setAttribute("type","radio");inputRadio.addEventListener("click",stopDefAction,false);inputRadio.setAttribute("class","c-view-scale-column");td.appendChild(inputRadio)}tr.appendChild(td)}tbody.appendChild(tr);table.appendChild(tbody);var div=_fieldBase.addGeneralFieldsToCompletedView("scaleField",table,_dataObject);return div}function getBootstrapView(orderNro){_data=_dataObject.getDataItemObj();var table=document.createElement("table");table.setAttribute("class","table table-striped");var thead=document.createElement("thead");var tr_1=document.createElement("tr");var from=_data.from;var to=_data.to;var startIndex=from-1;var endIndex=to+1;for(startIndex=from-1;startIndex<=endIndex;startIndex++){var td=document.createElement("td");var firstLoop=from-1;var lastLoop=to+1;if(!(startIndex==firstLoop||startIndex==lastLoop)){var div=document.createElement("div");div.innerText=startIndex;td.appendChild(div)}tr_1.appendChild(td)}thead.appendChild(tr_1);table.appendChild(thead);var tbody=document.createElement("tbody");var tr=document.createElement("tr");for(startIndex=from-1;startIndex<=endIndex;startIndex++){var td=document.createElement("td");var firstLoop=from-1;var lastLoop=to+1;if(startIndex===firstLoop){var div=document.createElement("div");if(_data.fromLabel.length>0)div.innerText=_data.fromLabel;td.appendChild(div)}else if(startIndex===lastLoop){var div=document.createElement("div");if(_data.toLabel.length>0)div.innerText=_data.toLabel;td.appendChild(div)}else{var inputRadio=document.createElement("INPUT");inputRadio.setAttribute("type","radio");inputRadio.setAttribute("name","group_"+orderNro);td.appendChild(inputRadio)}tr.appendChild(td)}tbody.appendChild(tr);table.appendChild(tbody);var div=_fieldBase.addGeneralFieldsToBootstrapForm("scaleField",table,_dataObject);return div}function stopDefAction(evt){evt.preventDefault()}}function SectionHeaderField(dataObj){var _fieldBase=new FieldBase;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _data;var _dataObject;var _text={};_text["labelHeaderText"]="Header text";_text["placeholderForHeaderText"]="Untitled Section";_text["labelTextForDescription"]="Description";_text["labelTextForOptional"]="(optional)";_text["textForDoneButton"]="Done";this.renderDevelopmentView=renderDevelopmentView;this.getCompletedView=getCompletedView;this.getBootstrapView=getBootstrapView;function renderDevelopmentView(){var table=document.createElement("TABLE");table.setAttribute("class","sectionHeaderTable");var row_0=document.createElement("TR");var td_1=document.createElement("TD");td_1.colSpan="2";row_0.appendChild(td_1);var td_2=document.createElement("TD");td_2.rowSpan="3";var ef=new EditForm("activeHeader");td_2.appendChild(ef.render());row_0.appendChild(td_2);table.appendChild(row_0);var headerText=_dataObject.getDataItemObj().headerText;var row_1=createTableRowForHeaderText(_text["labelHeaderText"],"inputHeaderText",headerText,_text["placeholderForHeaderText"]);row_1.setAttribute("class","sectionHeaderTableRow");table.appendChild(row_1);var descriptionText=_dataObject.getDataItemObj().descriptionText;var row_2=createTableRowForDescriptionText(_text["labelTextForDescription"],"inputDescriptionText",descriptionText);row_2.setAttribute("class","sectionHeaderTableRow");table.appendChild(row_2);var row_3=createDoneButtonTableRow();row_3.setAttribute("class","sectionHeaderTableRow");table.appendChild(row_3);return table}function createTableRowForHeaderText(labelText,inputId,inputText,placeholder){var row=document.createElement("TR");var td_1=document.createElement("TD");var label=document.createElement("label");var text=document.createTextNode(labelText);label.appendChild(text);td_1.appendChild(label);row.appendChild(td_1);var td_2=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id",inputId);if(inputText)input.setAttribute("value",inputText);else input.setAttribute("value","");input.setAttribute("type","text");if(placeholder)input.setAttribute("placeholder",placeholder);input.addEventListener("keyup",key_pressed,false);input.setAttribute("class","inputLong");td_2.appendChild(input);row.appendChild(td_2);return row}function createTableRowForDescriptionText(labelText,inputId,textAreaText){var row=document.createElement("TR");var td_1=document.createElement("TD");var label=document.createElement("label");label.style.display="block";var text=document.createTextNode(labelText);var label2=document.createElement("label");var text2=document.createTextNode(_text["labelTextForOptional"]);label.appendChild(text);td_1.appendChild(label);label2.appendChild(text2);td_1.appendChild(label2);row.appendChild(td_1);var td_2=document.createElement("TD");var textArea=document.createElement("textarea");textArea.setAttribute("id",inputId);if(textAreaText)textArea.setAttribute("value",textAreaText);else textArea.setAttribute("value","");textArea.appendChild(document.createTextNode(textAreaText));textArea.addEventListener("keyup",key_pressed,false);td_2.appendChild(textArea);row.appendChild(td_2);return row}function createDoneButtonTableRow(){var row=document.createElement("TR");row.setAttribute("id","lastRow");var td_1=document.createElement("TD");var button=document.createElement("DIV");button.setAttribute("id","doneButton");var text=document.createTextNode(_text["textForDoneButton"]);button.appendChild(text);td_1.appendChild(button);row.appendChild(td_1);var td_2=document.createElement("TD");row.appendChild(td_2);var td_3=document.createElement("TD");row.appendChild(td_3);return row}function key_pressed(){if(this.id==="inputHeaderText"){_dataObject.setHeaderText(this.value,_fieldBase.saveDataItem);return}else if(this.id==="inputDescriptionText"){_dataObject.setDescriptionText(this.value,_fieldBase.saveDataItem);return}}function getCompletedView(){_data=_dataObject.getDataItemObj();var divContainer=document.createElement("DIV");divContainer.setAttribute("class","c-view-sectionHeader-div");var ef=new EditForm("inactive");divContainer.appendChild(ef.render());var h2=document.createElement("H2");h2.setAttribute("class","c-view-sectionHeader-header");var t1;if(_data.headerText.length>0)t1=document.createTextNode(_data.headerText);else t1=document.createTextNode(_text["placeholderForHeaderText"]);h2.appendChild(t1);divContainer.appendChild(h2);var divDescription=document.createElement("DIV");divDescription.setAttribute("class","c-view-sectionHeader-description");var t2=document.createTextNode(_data.descriptionText);divDescription.appendChild(t2);divContainer.appendChild(divDescription);return divContainer}function getBootstrapView(orderNro){var data=_dataObject.getDataItemObj();var header=document.createElement("H2");if(data.headerText.length>0)header.appendChild(document.createTextNode(data.headerText));else{header.appendChild(document.createTextNode(_text["placeholderForHeaderText"]))}if(data.descriptionText.length>0){var br=document.createElement("br");header.appendChild(br);var small=document.createElement("small");small.appendChild(document.createTextNode(data.descriptionText));header.appendChild(small)}return header}}function TextField(dataObj){var _fieldBase=new FieldBase;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _style=_fieldBase._style;var _elementToAppendTo=_fieldBase._elementToAppendTo;var _parentElementToAddCSSClass=_fieldBase._parentElementToAddCSSClass;var _formBuilderIdentifier=_fieldBase._formBuilderIdentifier;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _advSettingsSummaryId=_fieldBase._advSettingsSummaryId;var _data;var _dataObject;this.renderDevelopmentView=renderDevelopmentView;this.renderCompletedView=renderCompletedView;this.getBootstrapView=getBootstrapView;this.getCompletedView=getCompletedView;var _advField=new TextFieldAdvanced(_dataObject);var _text={};_text["textContentText"]="Their answer";function renderDevelopmentView(){$(_parentElementToAddCSSClass).removeClass();var div=document.createElement("DIV");var span=document.createElement("DIV");var t=document.createTextNode(_text["textContentText"]);if(_style===undefined||_style=="default"){div.setAttribute("class","dev-div-textField");span.setAttribute("class","dev-span-textField");$(_parentElementToAddCSSClass).addClass("dev-row-textField")}span.appendChild(t);div.appendChild(span);document.getElementById(_elementToAppendTo.substr(1)).appendChild(div);document.getElementById(_advSettingsContentId.substr(1)).appendChild(_advField.render())}function renderCompletedView(){$(_formBuilderIdentifier).append("<p>TextField</p>")}function getCompletedView(){var input=document.createElement("div");input.setAttribute("class","c-view-input-txt");var div=_fieldBase.addGeneralFieldsToCompletedView("textField",input,_dataObject);return div}function getBootstrapView(orderNro){var data=_dataObject.getDataItemObj();var input=document.createElement("input");input.setAttribute("type","text");input.setAttribute("class","form-control");if(data.title.length>0)input.setAttribute("placeholder",data.title);var div=_fieldBase.addGeneralFieldsToBootstrapForm("textField",input,_dataObject,orderNro);return div}function getFormView(){var input=document.createElement("input");input.setAttribute("class","f-view-input-txt");var div=_fieldBase.addGeneralFieldsToCompletedView("textField",input,_dataObject);return div}function stopDefAction(evt){evt.preventDefault()}}function TextFieldAdvanced(dataObj){var _fieldBase=new FieldBase;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();var _prev_type="";var _inputError=false;var _errorMsg="";this.render=render;var _text={};_text["labelDataValidation"]="Data Validation";_text["placeholderNumber"]="Number";_text["labelNumber"]="and";_text["placeholderText"]="Text";_text["placeholderRegExp"]="Pattern";_text["placeholderErrorText"]="Custom error text";_text["numberInputErrorText"]="Please enter a valid number";_text["startOfValidationSummary"]="Validation:";_text["andWord"]="and";_text["or_greater_than"]="or greater than";var _select1_text={};_select1_text[0]="Number";_select1_text[1]="Text";_select1_text[2]="Regular expression";var _select1_id={};_select1_id[0]="number";_select1_id[1]="text";_select1_id[2]="regular_expression";var _select2_text={};_select2_text[0]=new Array(10);_select2_text[0][0]="Greater than";_select2_text[0][1]="Greater than or equal to";_select2_text[0][2]="Less than";_select2_text[0][3]="Less than or equal to";_select2_text[0][4]="Equal to";_select2_text[0][5]="Not equal to";_select2_text[0][6]="Between";_select2_text[0][7]="Not between";_select2_text[0][8]="Is number";_select2_text[0][9]="Whole number";var _select2_text_summary={};_select2_text_summary[0]=new Array(10);_select2_text_summary[0][0]="Must be a number greater than";_select2_text_summary[0][1]="Must be a number greater than or equal to";_select2_text_summary[0][2]="Must be a number less than";_select2_text_summary[0][3]="Must be a number less than or equal to";_select2_text_summary[0][4]="Must be a number equal to";_select2_text_summary[0][5]="Must be a number not equal to";_select2_text_summary[0][6]="Must be a number between";_select2_text_summary[0][7]="Must be a number less than";_select2_text_summary[0][8]="Must be a number";_select2_text_summary[0][9]="Must be a whole number";var _select2_id={};_select2_id[0]=new Array(10);_select2_id[0][0]="greater_than";_select2_id[0][1]="greater_than_or_equal_to";_select2_id[0][2]="less_than";_select2_id[0][3]="less_than_or_equal_to";_select2_id[0][4]="equal_to";_select2_id[0][5]="not_equal_to";_select2_id[0][6]="between";_select2_id[0][7]="not_between";_select2_id[0][8]="is_number";_select2_id[0][9]="whole_number";_select2_text[1]=new Array(4);_select2_text[1][0]="Contains";_select2_text[1][1]="Does not contain";_select2_text[1][2]="Email address";_select2_text[1][3]="URL";_select2_text_summary[1]=new Array(10);_select2_text_summary[1][0]="Must contain";_select2_text_summary[1][1]="Must not contain";_select2_text_summary[1][2]="Must be a valid email address";_select2_text_summary[1][3]="Must be a valid URL";_select2_id[1]=new Array(4);_select2_id[1][0]="contains";_select2_id[1][1]="does_not_contain";_select2_id[1][2]="email_address";_select2_id[1][3]="url";_select2_text[2]=new Array(4);_select2_text[2][0]="Contains";_select2_text[2][1]="Does not contain";_select2_text[2][2]="Matches";_select2_text[2][3]="Does not match";_select2_text_summary[2]=new Array(10);_select2_text_summary[2][0]="Must contain pattern";_select2_text_summary[2][1]="Must not contain pattern";_select2_text_summary[2][2]="Must match pattern";_select2_text_summary[2][3]="Must not match pattern";_select2_id[2]=new Array(4);_select2_id[2][0]="contains";_select2_id[2][1]="does_not_contain";_select2_id[2][2]="matches";_select2_id[2][3]="does_not_match";function render(){var div=document.createElement("DIV");var table=document.createElement("TABLE");table.setAttribute("class","advancedTable");var row_1=createRowDataValidation();table.appendChild(row_1);var row_2=createRowSettings();table.appendChild(row_2);var divErr=createErrorMessageDiv();div.appendChild(table);div.appendChild(divErr);return div}function createRowDataValidation(){var row=document.createElement("TR");row.setAttribute("class","dataValidationTableRow");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","dataValidation");input.setAttribute("type","checkbox");var value=false;try{value=_dataObject.getDataItemObj().advancedSettings.dataValidation}catch(e){}if(value===true){input.setAttribute("checked","checked")}$(_advSettingsContentId).hide();input.addEventListener("click",checkBoxClicked,false);td_1.appendChild(input);var td_2=document.createElement("TD");td_2.setAttribute("colspan","4");var label=document.createElement("label");label.setAttribute("for","dataValidation");var txtLabel=document.createTextNode(_text["labelDataValidation"]);label.appendChild(txtLabel);td_2.appendChild(label);row.appendChild(td_1);row.appendChild(td_2);return row}function createRowSettings(){var row=document.createElement("TR");row.setAttribute("class","advanced2ndRow");var td_1=document.createElement("TD");var div=document.createElement("DIV");div.setAttribute("id","popSelectHeight");td_1.appendChild(div);row.appendChild(td_1);var td_2=document.createElement("TD");var divSelect_1=createSelectField("Select1","AdvancedType");td_2.appendChild(divSelect_1);row.appendChild(td_2);var td_3=document.createElement("TD");td_3.setAttribute("id","tdSelect2");var divSelect_2=createSelectField("Select2","AdvancedNumber");td_3.appendChild(divSelect_2);row.appendChild(td_3);var validate=_dataObject.getDataItemObj().advancedSettings.dataValidation;var val_type=_dataObject.getDataItemObj().advancedSettings.validationType;_prev_type=val_type;var number_type_id="";var number="";var number_2nd="";if(val_type==="number"){try{number_type_id=_dataObject.getDataItemObj().advancedSettings.numberValidation.type}catch(e){}try{number=_dataObject.getDataItemObj().advancedSettings.numberValidation.number}catch(e){}try{number_2nd=_dataObject.getDataItemObj().advancedSettings.numberValidation.number_2nd}catch(e){}}var td_4=document.createElement("TD");var divNumber=createInputFieldsForNumber(val_type,number_type_id,number,number_2nd,validate);td_4.appendChild(divNumber);var text_type_id="";var text="";if(val_type==="text"){try{text_type_id=_dataObject.getDataItemObj().advancedSettings.textValidation.type}catch(e){}try{text=_dataObject.getDataItemObj().advancedSettings.textValidation.text}catch(e){}}var divText=createInputFieldsForText(val_type,text_type_id,text,validate);td_4.appendChild(divText);var reg_exp_type_id="";var pattern="";if(val_type==="regular_expression"){try{reg_exp_type_id=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type
}catch(e){}try{pattern=_dataObject.getDataItemObj().advancedSettings.regExpValidation.pattern}catch(e){}}var divRegExp=createInputFieldsForRegExp(val_type,reg_exp_type_id,pattern,validate);td_4.appendChild(divRegExp);row.appendChild(td_4);var td_5=document.createElement("TD");var errorText=_dataObject.getDataItemObj().advancedSettings.errorText;var divError=createInputFieldForErrorText(errorText,validate);td_5.appendChild(divError);row.appendChild(td_5);return row}function createErrorMessageDiv(){var div=document.createElement("DIV");div.setAttribute("id","advErrorRow");div.style.display="none";var label=document.createElement("label");label.setAttribute("id","advErrorMsg");var txtLabel=document.createTextNode(_text["numberInputErrorText"]);label.appendChild(txtLabel);div.appendChild(label);return div}function createSelectField(id,type){var divFieldSelect=document.createElement("DIV");divFieldSelect.setAttribute("id","popSelectFieldDiv"+id);var table=document.createElement("table");table.setAttribute("id","popSelectField"+id);var validate=_dataObject.getDataItemObj().advancedSettings.dataValidation;if(validate){table.addEventListener("click",selectClick,false);table.setAttribute("class","popSelectField")}else table.setAttribute("class","popSelectFieldDisabled");var tr=document.createElement("TR");var td_1=document.createElement("TD");var spanFieldSelectText=document.createElement("SPAN");spanFieldSelectText.setAttribute("id","selectFieldText"+id);spanFieldSelectText.setAttribute("class","selectFieldText");if(validate)spanFieldSelectText.setAttribute("class","selectFieldText");else spanFieldSelectText.setAttribute("class","selectFieldTextDisabled");var val_type=_dataObject.getDataItemObj().advancedSettings.validationType;var selectedText;if(type==="AdvancedType"){table.setAttribute("data-for","popSelect"+type);if(val_type){selectedText=getTextForId(val_type,_select1_id,_select1_text)}else{selectedText=_select1_text[0]}}else{if(val_type){var val_2nd_select;if(val_type==="number"){table.setAttribute("data-for","popSelectAdvancedNumber");val_2nd_select=_dataObject.getDataItemObj().advancedSettings.numberValidation.type;if(val_2nd_select){selectedText=getTextForId(val_2nd_select,_select2_id[0],_select2_text[0])}}else if(val_type==="text"){table.setAttribute("data-for","popSelectAdvancedText");val_2nd_select=_dataObject.getDataItemObj().advancedSettings.textValidation.type;if(val_2nd_select){selectedText=getTextForId(val_2nd_select,_select2_id[1],_select2_text[1])}}else if(val_type==="regular_expression"){table.setAttribute("data-for","popSelectAdvancedRegExp");val_2nd_select=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type;if(val_2nd_select){selectedText=getTextForId(val_2nd_select,_select2_id[2],_select2_text[2])}}else{selectedText=_select2_text[0][0]}}else{table.setAttribute("data-for","popSelectAdvancedNumber");selectedText=_select2_text[0][0]}}var text;text=document.createTextNode(selectedText);spanFieldSelectText.appendChild(text);td_1.appendChild(spanFieldSelectText);tr.appendChild(td_1);var td_2=document.createElement("TD");var spanImageSelect=document.createElement("SPAN");spanImageSelect.setAttribute("class",_fieldBase._triangleClassSouth);divFieldSelect.appendChild(spanImageSelect);td_2.appendChild(spanImageSelect);tr.appendChild(td_2);table.appendChild(tr);table.style="";divFieldSelect.appendChild(table);var select_PopUp;if(type==="AdvancedType"){select_PopUp=createSelectPopUp(type,_select1_id,_select1_text);divFieldSelect.appendChild(select_PopUp)}else{var select_PopUp_nro=createSelectPopUp("AdvancedNumber",_select2_id[0],_select2_text[0]);var select_PopUp_text=createSelectPopUp("AdvancedText",_select2_id[1],_select2_text[1]);var select_PopUp_regExp=createSelectPopUp("AdvancedRegExp",_select2_id[2],_select2_text[2]);divFieldSelect.appendChild(select_PopUp_nro);divFieldSelect.appendChild(select_PopUp_text);divFieldSelect.appendChild(select_PopUp_regExp)}return divFieldSelect}function createInputFieldsForNumber(val_type,nro_type_id,number,number_2nd,validate){var div=document.createElement("DIV");div.setAttribute("id","divNumberType");if(val_type==="text"||val_type==="regular_expression")div.style.display="none";var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputNumber1");input_1.setAttribute("type","text");input_1.setAttribute("class","inputShort");input_1.setAttribute("placeholder",_text["placeholderNumber"]);input_1.addEventListener("keyup",number1_key_pressed,false);input_1.addEventListener("blur",number_input_blur,false);if(validate&&val_type==="number"){if(nro_type_id==="whole_number"||nro_type_id==="is_number")input_1.style.display="none";else input_1.value=number}else if(!validate){input_1.disabled=true}div.appendChild(input_1);var label=document.createElement("label");label.setAttribute("id","labelNumber");var text=document.createTextNode(_text["labelNumber"]);label.appendChild(text);div.appendChild(label);var input_2=document.createElement("INPUT");input_2.setAttribute("id","inputNumber2");input_2.setAttribute("class","inputShort");input_2.setAttribute("type","text");input_2.setAttribute("placeholder",_text["placeholderNumber"]);input_2.addEventListener("keyup",number2_key_pressed,false);input_2.addEventListener("blur",number_input_blur,false);if(validate&&val_type==="number"){var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(nro_type_id,_select2_id[0],_select2_text_summary[0]);desc_text=desc_text+" "+number;if(nro_type_id==="between"||nro_type_id==="not_between"){input_2.value=number_2nd;if(nro_type_id==="between")desc_text=desc_text+" "+_text["andWord"]+" "+number_2nd;else desc_text=desc_text+" "+_text["or_greater_than"]+" "+number_2nd}else{input_2.style.display="none";label.style.display="none"}_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else if(!validate){input_2.style.display="none";label.style.display="none"}div.appendChild(input_2);return div}function createInputFieldsForText(val_type,text_type_id,text,validate){var div=document.createElement("DIV");div.setAttribute("id","divTextType");if(val_type!=="text")div.style.display="none";var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputText");input_1.setAttribute("type","text");input_1.setAttribute("placeholder",_text["placeholderText"]);input_1.addEventListener("keyup",text_key_pressed,false);if(validate&&val_type==="text"){var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(text_type_id,_select2_id[1],_select2_text_summary[1]);desc_text=desc_text+" "+text;_fieldBase.setAdvancedSettingsDescriptionText(desc_text);if(text_type_id==="url"||text_type_id==="email_address")input_1.style.display="none";else input_1.value=text}div.appendChild(input_1);return div}function createInputFieldsForRegExp(val_type,reg_exp_type_id,pattern,validate){var div=document.createElement("DIV");div.setAttribute("id","divRegExpType");if(val_type!=="regular_expression")div.style.display="none";var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputRegExp");input_1.setAttribute("class","inputShort");input_1.setAttribute("type","text");input_1.setAttribute("placeholder",_text["placeholderRegExp"]);input_1.addEventListener("keyup",reg_exp_key_pressed,false);if(validate&&val_type==="regular_expression"){var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(reg_exp_type_id,_select2_id[2],_select2_text_summary[2]);desc_text=desc_text+" "+pattern;_fieldBase.setAdvancedSettingsDescriptionText(desc_text);input_1.value=pattern}div.appendChild(input_1);return div}function createInputFieldForErrorText(text,validate){var div=document.createElement("DIV");div.setAttribute("id","divErrorText");var input_1=document.createElement("INPUT");input_1.setAttribute("id","inputErrorText");input_1.setAttribute("type","text");input_1.setAttribute("placeholder",_text["placeholderErrorText"]);input_1.addEventListener("keyup",error_key_pressed,false);input_1.value=text;if(!validate)input_1.disabled=true;div.appendChild(input_1);return div}function getTextForId(id,idArray,textArray){for(i=0;i<Object.keys(textArray).length;i++){if(id===idArray[i])return textArray[i]}return undefined}function getSelectedPopUpNro(id,idArray){for(i=0;i<Object.keys(idArray).length;i++){if(id===idArray[i])return i+1}return undefined}function createSelectPopUp(name,idArray,textArray){var div=document.createElement("DIV");div.setAttribute("id","popSelect"+name);div.setAttribute("class","popSelect");for(i=0;i<Object.keys(textArray).length;i++){var div_sub=document.createElement("DIV");div_sub.setAttribute("id",idArray[i]);div_sub.setAttribute("data-nro",i+1);div_sub.setAttribute("class","popSelectItem");div_sub.addEventListener("click",popUpSelect,false);var text=document.createTextNode(textArray[i]);div_sub.appendChild(text);div.appendChild(div_sub)}return div}function checkBoxClicked(){var _data=dataObj.getDataItemObj();_fieldBase.unsetActiveSelectField();if(_data.advancedSettings.dataValidation===false){_dataObject.setDataValidation(true);_dataObject.setValidationType(_select1_id[0],_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect1").innerHTML=_select1_text[0];_dataObject.setNumberValidationType(_select2_id[0][0]);_dataObject.setTextValidationType("");_dataObject.setRegExpValidationType("",_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][0];document.getElementById("popSelectFieldSelect2").setAttribute("data-for","popSelectAdvancedNumber");document.getElementById("divNumberType").style.display="inline";document.getElementById("inputNumber1").style.display="inline";document.getElementById("labelNumber").style.display="none";document.getElementById("inputNumber2").style.display="none";document.getElementById("popSelectFieldSelect1").addEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect2").addEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect1").setAttribute("class","popSelectField");document.getElementById("popSelectFieldSelect2").setAttribute("class","popSelectField");document.getElementById("selectFieldTextSelect1").setAttribute("class","selectFieldText");document.getElementById("selectFieldTextSelect2").setAttribute("class","selectFieldText");document.getElementById("inputNumber1").disabled=false;document.getElementById("inputNumber2").disabled=false;document.getElementById("inputErrorText").disabled=false;var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(_select2_id[0][0],_select2_id[0],_select2_text_summary[0]);_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else{_dataObject.setDataValidation(false);_dataObject.setValidationType("");_dataObject.setNumberValidationType("");_dataObject.setNumberValidationNumber("");_dataObject.setNumberValidationNumber_2nd("");_dataObject.setTextValidationText("");_dataObject.setTextValidationType("");_dataObject.setRegExpValidationType("");_dataObject.setRegExpValidationPattern("");_dataObject.setErrorText("",_fieldBase.saveDataItem);document.getElementById("divNumberType").style.display="inline";document.getElementById("divTextType").style.display="none";document.getElementById("divRegExpType").style.display="none";$("#inputNumber1").val("");$("#inputNumber2").val("");$("#inputText").val("");$("#inputRegExp").val("");$("#inputErrorText").val("");document.getElementById("popSelectFieldSelect1").removeEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect2").removeEventListener("click",selectClick,false);document.getElementById("popSelectFieldSelect1").setAttribute("class","popSelectFieldDisabled");document.getElementById("popSelectFieldSelect2").setAttribute("class","popSelectFieldDisabled");document.getElementById("selectFieldTextSelect1").setAttribute("class","selectFieldTextDisabled");document.getElementById("selectFieldTextSelect2").setAttribute("class","selectFieldTextDisabled");document.getElementById("inputNumber1").disabled=true;document.getElementById("inputNumber2").disabled=true;document.getElementById("labelNumber").style.display="none";document.getElementById("inputNumber2").style.display="none";document.getElementById("inputErrorText").disabled=true;document.getElementById("selectFieldTextSelect1").innerHTML=_select1_text[0];document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][0];_fieldBase.setAdvancedSettingsDescriptionText("");if(document.getElementById("advErrorRow").style.display=="inline"){document.getElementById("advErrorRow").style.display="none";document.getElementById("inputNumber1").setAttribute("class","inputShort");document.getElementById("inputNumber2").setAttribute("class","inputShort")}}}function popUpSelect(){var parentId=this.parentNode.id;var dataNro=this.getAttribute("data-nro");dataNro=parseInt(dataNro)-1;if(parentId==="popSelectAdvancedType"){_dataObject.setValidationType(_select1_id[dataNro]);document.getElementById("selectFieldTextSelect1").innerHTML=_select1_text[dataNro];_fieldBase.setActiveSelectField("popSelectFieldSelect1");if(_prev_type!==_select1_id[dataNro]){if(document.getElementById("advErrorRow").style.display=="inline"){document.getElementById("advErrorRow").style.display="none";document.getElementById("inputNumber1").setAttribute("class","inputShort");document.getElementById("inputNumber2").setAttribute("class","inputShort")}if(_select1_id[dataNro]==="number"){document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][0];document.getElementById("popSelectFieldSelect2").setAttribute("data-for","popSelectAdvancedNumber");document.getElementById("divNumberType").style.display="inline";document.getElementById("divTextType").style.display="none";document.getElementById("divRegExpType").style.display="none";document.getElementById("inputNumber1").style.display="inline";document.getElementById("labelNumber").style.display="none";document.getElementById("inputNumber2").style.display="none";document.getElementById("inputNumber1").value="";document.getElementById("inputNumber2").value="";_dataObject.setNumberValidationType(_select2_id[0][0]);_dataObject.setTextValidationType("");_dataObject.setTextValidationText("");_dataObject.setRegExpValidationType("");_dataObject.setRegExpValidationPattern("",_fieldBase.saveDataItem);var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(_select2_id[0][0],_select2_id[0],_select2_text_summary[0]);_fieldBase.setAdvancedSettingsDescriptionText(desc_text);setErrorMsgPos()}else if(_select1_id[dataNro]==="text"){document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[1][0];document.getElementById("popSelectFieldSelect2").setAttribute("data-for","popSelectAdvancedText");document.getElementById("divNumberType").style.display="none";document.getElementById("divTextType").style.display="inline";document.getElementById("divRegExpType").style.display="none";document.getElementById("inputText").style.display="inline";_dataObject.setTextValidationType(_select2_id[1][0]);_dataObject.setNumberValidationType("");_dataObject.setNumberValidationNumber("");_dataObject.setNumberValidationNumber_2nd("");_dataObject.setRegExpValidationType("");_dataObject.setRegExpValidationPattern("",_fieldBase.saveDataItem);document.getElementById("inputText").value="";var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(_select2_id[1][0],_select2_id[1],_select2_text_summary[1]);_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else if(_select1_id[dataNro]==="regular_expression"){document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[2][0];document.getElementById("popSelectFieldSelect2").setAttribute("data-for","popSelectAdvancedRegExp");document.getElementById("divNumberType").style.display="none";document.getElementById("divTextType").style.display="none";document.getElementById("divRegExpType").style.display="inline";_dataObject.setRegExpValidationType(_select2_id[2][0]);_dataObject.setNumberValidationType("");_dataObject.setNumberValidationNumber("");_dataObject.setNumberValidationNumber_2nd("");_dataObject.setTextValidationText("");_dataObject.setTextValidationType("",_fieldBase.saveDataItem);document.getElementById("inputRegExp").value="";var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(_select2_id[2][0],_select2_id[2],_select2_text_summary[2]);_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}}_prev_type=_select1_id[dataNro]}else if(parentId==="popSelectAdvancedNumber"){_fieldBase.setActiveSelectField("popSelectFieldSelect2");var prev_nro_type_id=_dataObject.getDataItemObj().advancedSettings.numberValidation.type;if(prev_nro_type_id===_select2_id[0][dataNro]){$("#"+parentId).hide();return}var number_type_id=_select2_id[0][dataNro];_dataObject.setNumberValidationType(number_type_id,_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[0][dataNro];if(number_type_id==="between"||number_type_id==="not_between"){document.getElementById("inputNumber1").style.display="inline";document.getElementById("labelNumber").style.display="inline";document.getElementById("inputNumber2").style.display="inline";setErrorMsgPos()}else if(number_type_id==="is_number"||number_type_id==="whole_number"){if(document.getElementById("advErrorRow").style.display=="inline"){document.getElementById("advErrorRow").style.display="none";document.getElementById("inputNumber1").setAttribute("class","inputShort");document.getElementById("inputNumber2").setAttribute("class","inputShort")}document.getElementById("inputNumber1").style.display="none";document.getElementById("labelNumber").style.display="none";document.getElementById("inputNumber2").style.display="none";$("#inputNumber1").val("");$("#inputNumber2").val("");_dataObject.setNumberValidationNumber("");_dataObject.setNumberValidationNumber_2nd("",_fieldBase.saveDataItem)}else{var input1Val=_fieldBase.replaceCommaAndRemoveWhitespace(document.getElementById("inputNumber1").value);var isInput1Num=_fieldBase.is_float(input1Val);var input1Length=input1Val.length;var input1Empty=input1Length==0?true:false;if(isInput1Num||input1Empty){document.getElementById("advErrorRow").style.display="none";document.getElementById("inputNumber1").setAttribute("class","inputShort")}document.getElementById("inputNumber1").style.display="inline";document.getElementById("labelNumber").style.display="none";document.getElementById("inputNumber2").style.display="none";$("#inputNumber2").val("");setErrorMsgPos();_dataObject.setNumberValidationNumber_2nd("",_fieldBase.saveDataItem)}var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(number_type_id,_select2_id[0],_select2_text_summary[0]);var nro1="";if(_dataObject.getDataItemObj().advancedSettings.numberValidation.number)nro1=_dataObject.getDataItemObj().advancedSettings.numberValidation.number;desc_text=desc_text+" "+nro1;var nro2="";if(_dataObject.getDataItemObj().advancedSettings.numberValidation.number_2nd)nro2=_dataObject.getDataItemObj().advancedSettings.numberValidation.number_2nd;if(number_type_id==="between")desc_text=desc_text+" "+_text["andWord"]+" "+nro2;else if(number_type_id==="not_between")desc_text=desc_text+" "+_text["or_greater_than"]+" "+nro2;_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else if(parentId==="popSelectAdvancedText"){_fieldBase.setActiveSelectField("popSelectFieldSelect2");var prev_type_id=_dataObject.getDataItemObj().advancedSettings.textValidation.type;if(prev_type_id===_select2_id[1][dataNro]){$("#"+parentId).hide();return}var type_id=_select2_id[1][dataNro];_dataObject.setTextValidationType(_select2_id[1][dataNro],_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[1][dataNro];if(type_id==="url"||type_id==="email_address"){document.getElementById("inputText").style.display="none";_dataObject.setTextValidationText("",_fieldBase.saveDataItem);$("#inputText").val("")}else{document.getElementById("inputText").style.display="inline"}var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(type_id,_select2_id[1],_select2_text_summary[1]);var text=_dataObject.getDataItemObj().advancedSettings.textValidation.text;desc_text=desc_text+" "+text;_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}else if(parentId==="popSelectAdvancedRegExp"){_fieldBase.setActiveSelectField("popSelectFieldSelect2");var prev_type_id=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type;if(prev_type_id===_select2_id[2][dataNro]){$("#"+parentId).hide();return}var type_id=_select2_id[2][dataNro];_dataObject.setRegExpValidationType(type_id,_fieldBase.saveDataItem);document.getElementById("selectFieldTextSelect2").innerHTML=_select2_text[2][dataNro];var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(type_id,_select2_id[2],_select2_text_summary[2]);var regExp=_dataObject.getDataItemObj().advancedSettings.regExpValidation.regExp;desc_text=desc_text+" "+regExp;_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}$("#"+parentId).hide()}function setErrorMsgPos(){var posLeft1=$("#tblAdvanced").offset().left;var posLeft2=$("#popSelectFieldDivSelect2").offset().left;var posLeft=$("#tdSelect2").position().left;var outerWidth=$("#popSelectFieldDivSelect2").outerWidth();$("#advErrorMsg").css({position:"relative",left:posLeft2+outerWidth-posLeft1+3+"px"}).show()}function selectClick(){_fieldBase.unsetActiveSelectField();var id="#"+this.parentNode.id;var posTop=$(id).offset().top;var selectField_id="#"+this.id;var popSelect_Id="#"+this.getAttribute("data-for");var popSelectPosition=$(popSelect_Id).css("position");var selectFieldPadding=$(popSelect_Id).css("padding-top");var selectFieldPaddingHeight=parseInt(selectFieldPadding);var nroOfItems=$(popSelect_Id+" div").length;var popHeight=$(popSelect_Id+" > div:first-child").css("min-height")||$(popSelect_Id+" > div:first-child").outerHeight();height=parseInt(popHeight);var itemPadding=$(popSelect_Id+" > div:first-child").css("padding-top");var itemPaddingHeight=parseInt(itemPadding);var heightPerItem=height+itemPaddingHeight;var selectNro=1;if(popSelect_Id==="#popSelectAdvancedType"){var val_type=_dataObject.getDataItemObj().advancedSettings.validationType;if(val_type){selectNro=getSelectedPopUpNro(val_type,_select1_id)}}else if(popSelect_Id==="#popSelectAdvancedNumber"){var type=_dataObject.getDataItemObj().advancedSettings.numberValidation.type;if(type){selectNro=getSelectedPopUpNro(type,_select2_id[0])}}else if(popSelect_Id==="#popSelectAdvancedText"){var type=_dataObject.getDataItemObj().advancedSettings.textValidation.type;if(type){selectNro=getSelectedPopUpNro(type,_select2_id[1])}}else if(popSelect_Id==="#popSelectAdvancedRegExp"){var type=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type;if(type){selectNro=getSelectedPopUpNro(type,_select2_id[2])}}var topSpaceNarrow=false;var pos=$(selectField_id).offset();var selectTopSize=(selectNro-1)*heightPerItem;var spaceBetweenTop=pos.top-$(window).scrollTop();if(spaceBetweenTop<-1){spaceBetweenTop=spaceBetweenTop*-1}if(selectTopSize>spaceBetweenTop){topSpaceNarrow=true;selectTopSize=spaceBetweenTop}else{spaceBetweenTop=selectTopSize}var spaceForNroOfItemsAbove=Math.floor(spaceBetweenTop/heightPerItem);var nroOfItemsBelow=nroOfItems-1-spaceForNroOfItemsAbove;var selectBottomSize=(nroOfItems-selectNro)*heightPerItem;var spaceBetweenBottom=pos.top+$(selectField_id).height()-($(window).scrollTop()+$(window).height());if(spaceBetweenBottom<-1){spaceBetweenBottom=spaceBetweenBottom*-1}if(spaceBetweenBottom>selectBottomSize){spaceBetweenBottom=selectBottomSize}var spaceForNroOfItems=Math.floor(spaceBetweenBottom/heightPerItem);var nroOfItemsAbove=nroOfItems-1-spaceForNroOfItems;var reducedFromBottom=0;var j=0;var vertical=0;if(topSpaceNarrow){vertical=spaceForNroOfItemsAbove*heightPerItem}else{vertical=nroOfItemsAbove*heightPerItem}var width=$(selectField_id).outerWidth();$(".popSelect").hide();$(popSelect_Id).css({position:"absolute",top:pos.top-vertical-selectFieldPaddingHeight-1+"px",left:pos.left-10+"px"}).show();document.getElementById(popSelect_Id.substr(1)).addEventListener("mouseleave",function(){$(popSelect_Id).hide()});if(_fieldBase.detectIE()){alert($(popSelect_Id+' > div[data-nro="'+selectNro+'"]').length());$(popSelect_Id+' > div[data-nro="'+selectNro+'"]').mouseover()}}function number1_key_pressed(){var nro_type_id=_dataObject.getDataItemObj().advancedSettings.numberValidation.type;var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(nro_type_id,_select2_id[0],_select2_text_summary[0]);if(nro_type_id==="between"||nro_type_id==="not_between"){var input1Val=_fieldBase.replaceCommaAndRemoveWhitespace(this.value);var isInput1Num=_fieldBase.is_float(input1Val);var input1Length=input1Val.length;var input1Empty=input1Length==0?true:false;var input2Val=_fieldBase.replaceCommaAndRemoveWhitespace(document.getElementById("inputNumber2").value);var isInput2Num=_fieldBase.is_float(input2Val);var input2Length=input2Val.length;var input2Empty=input2Length==0?true:false;if((isInput1Num||input1Empty)&&(isInput2Num||input2Empty)){if(nro_type_id==="between")desc_text=desc_text+" "+input1Val+" "+_text["andWord"]+" "+input2Val;else desc_text=desc_text+" "+input1Val+" "+_text["or_greater_than"]+" "+input2Val;if(!input1Empty)_dataObject.setNumberValidationNumber(parseFloat(input1Val),_fieldBase.saveDataItem);else _dataObject.setNumberValidationNumber("",_fieldBase.saveDataItem)}else if((!isInput1Num||!input1Empty)&&(isInput2Num||input2Empty)){if(nro_type_id==="between")desc_text=desc_text+" "+_text["andWord"]+" "+input2Val;else desc_text=desc_text+" "+_text["or_greater_than"]+" "+input2Val}else if((isInput1Num||input1Empty)&&(!isInput2Num||!input2Empty)){if(nro_type_id==="between")desc_text=desc_text+" "+input1Val+" "+_text["andWord"];else desc_text=desc_text+" "+input1Val+" "+_text["or_greater_than"];if(!input1Empty)_dataObject.setNumberValidationNumber(parseFloat(input1Val),_fieldBase.saveDataItem);else _dataObject.setNumberValidationNumber("",_fieldBase.saveDataItem)}}else{var input1Val=_fieldBase.replaceCommaAndRemoveWhitespace(this.value);var isInput1Num=_fieldBase.is_float(input1Val);if(!isInput1Num){return false}_dataObject.setNumberValidationNumber(parseFloat(input1Val),_fieldBase.saveDataItem);desc_text=desc_text+" "+input1Val}_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}function number2_key_pressed(){var nro_type_id=_dataObject.getDataItemObj().advancedSettings.numberValidation.type;var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(nro_type_id,_select2_id[0],_select2_text_summary[0]);var input1Val=_fieldBase.replaceCommaAndRemoveWhitespace(document.getElementById("inputNumber1").value);var isInput1Num=_fieldBase.is_float(input1Val);var input1Length=input1Val.length;var input1Empty=input1Length==0?true:false;var input2Val=_fieldBase.replaceCommaAndRemoveWhitespace(this.value);var isInput2Num=_fieldBase.is_float(input2Val);var input2Length=input2Val.length;var input2Empty=input2Length==0?true:false;if((isInput1Num||input1Empty)&&(isInput2Num||input2Empty)){if(nro_type_id==="between")desc_text=desc_text+" "+input1Val+" "+_text["andWord"]+" "+input2Val;else desc_text=desc_text+" "+input1Val+" "+_text["or_greater_than"]+" "+input2Val;if(!input2Empty)_dataObject.setNumberValidationNumber_2nd(parseFloat(input2Val),_fieldBase.saveDataItem);else _dataObject.setNumberValidationNumber_2nd("",_fieldBase.saveDataItem)}else if((!isInput1Num||!input1Empty)&&(isInput2Num||input2Empty)){if(nro_type_id==="between")desc_text=desc_text+" "+_text["andWord"]+" "+this.value;else desc_text=desc_text+" "+_text["or_greater_than"]+" "+this.value;if(!input2Empty)_dataObject.setNumberValidationNumber_2nd(parseFloat(input2Val),_fieldBase.saveDataItem);else _dataObject.setNumberValidationNumber_2nd("",_fieldBase.saveDataItem)}else if((isInput1Num||input1Empty)&&(!isInput2Num||!input2Empty)){if(nro_type_id==="between")desc_text=desc_text+" "+input1Val+" "+_text["andWord"];else desc_text=desc_text+" "+input1Val+" "+_text["or_greater_than"]}_fieldBase.setAdvancedSettingsDescriptionText(desc_text)}function number_input_blur(){var input1Val=_fieldBase.replaceCommaAndRemoveWhitespace(document.getElementById("inputNumber1").value);var isInput1Num=_fieldBase.is_float(input1Val);var input1Length=input1Val.length;var input1Empty=input1Length==0?true:false;var input2Val=_fieldBase.replaceCommaAndRemoveWhitespace(document.getElementById("inputNumber2").value);var isInput2Num=_fieldBase.is_float(input2Val);var input2Length=input2Val.length;var input2Empty=input2Length==0?true:false;if(!isInput1Num&&!input1Empty){setErrorMsgPos();document.getElementById("advErrorRow").style.display="inline";document.getElementById("inputNumber1").setAttribute("class","inputShort inputError")}else if(isInput1Num||input1Empty){document.getElementById("inputNumber1").setAttribute("class","inputShort");if(input1Empty&&document.getElementById("inputNumber1").value.length>0)document.getElementById("inputNumber1").value=""}if(!isInput2Num&&!input2Empty){setErrorMsgPos();document.getElementById("advErrorRow").style.display="inline";document.getElementById("inputNumber2").setAttribute("class","inputShort inputError")}else if(isInput2Num||input2Empty){document.getElementById("inputNumber2").setAttribute("class","inputShort");if(input2Empty&&document.getElementById("inputNumber2").value.length>0)document.getElementById("inputNumber2").value=""}if((isInput1Num||input1Empty)&&(isInput2Num||input2Empty)){document.getElementById("advErrorRow").style.display="none"}}function text_key_pressed(){var text_type_id=_dataObject.getDataItemObj().advancedSettings.textValidation.type;var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(text_type_id,_select2_id[1],_select2_text_summary[1]);desc_text=desc_text+" "+this.value;_fieldBase.setAdvancedSettingsDescriptionText(desc_text);_dataObject.setTextValidationText(this.value,_fieldBase.saveDataItem)}function reg_exp_key_pressed(){var reg_exp_type_id=_dataObject.getDataItemObj().advancedSettings.regExpValidation.type;var desc_text=_text["startOfValidationSummary"]+" "+getTextForId(reg_exp_type_id,_select2_id[1],_select2_text_summary[1]);desc_text=desc_text+" "+this.value;_fieldBase.setAdvancedSettingsDescriptionText(desc_text);_dataObject.setRegExpValidationPattern(this.value,_fieldBase.saveDataItem)}function error_key_pressed(){_dataObject.setErrorText(this.value,_fieldBase.saveDataItem)}}function TimeField(dataObj){var _fieldBase=new FieldBase;var _elementToAppendTo=_fieldBase._elementToAppendTo;var _advSettingsContentId=_fieldBase._advSettingsContentId;var _dataObject=dataObj;var _data=dataObj.getDataItemObj();this.renderDevelopmentView=renderDevelopmentView;this.getCompletedView=getCompletedView;this.getBootstrapView=getBootstrapView;var _text={};_text["labelDuration"]="Duration";_text["secondsOption"]="Secs";_text["minuteOption"]="Min";_text["minutesOption"]="Mins";_text["betweenHourAndMinute"]=":";_text["hoursOption"]="Hrs";_text["hourOption"]="Hr";_text["amPmOption"]="AM/PM";function renderDevelopmentView(){$(_advSettingsContentId).hide();var div=document.createElement("DIV");var durTable=createTableForDurationMode();durTable.setAttribute("class","durationTable");div.appendChild(durTable);var timeTable=createTableTime(true);timeTable.setAttribute("class","timeTable");div.appendChild(timeTable);document.getElementById(_elementToAppendTo.substr(1)).appendChild(div)}function createTableForDurationMode(){var table=document.createElement("table");var row=document.createElement("TR");var td_1=document.createElement("TD");var input=document.createElement("INPUT");input.setAttribute("id","duration");input.setAttribute("type","checkbox");var value=false;try{value=_dataObject.getDataItemObj().durationMode}catch(e){}if(value===true){input.setAttribute("checked","checked")}input.addEventListener("click",durationCheckBoxClicked,false);td_1.appendChild(input);
var td_2=document.createElement("TD");td_2.setAttribute("colspan","4");var label=document.createElement("label");label.setAttribute("for","duration");var txtLabel=document.createTextNode(_text["labelDuration"]);label.appendChild(txtLabel);td_2.appendChild(label);row.appendChild(td_1);row.appendChild(td_2);table.appendChild(row);return table}function createTableTime(isDevView){var durMode=false;try{durMode=_dataObject.getDataItemObj().durationMode}catch(e){}var table=document.createElement("table");var row=document.createElement("TR");var td_1=document.createElement("TD");var table_inner=document.createElement("table");table_inner.setAttribute("class","timeSelectTable");var tr_inner=document.createElement("tr");var td_inner_1=document.createElement("td");var select_1=document.createElement("select");if(isDevView)select_1.setAttribute("id","selectHours");var op_for_select_1=document.createElement("option");var text;durMode?text=_text["hoursOption"]:text=_text["hourOption"];op_for_select_1.innerText=text;select_1.appendChild(op_for_select_1);td_inner_1.appendChild(select_1);text=document.createTextNode(_text["betweenHourAndMinute"]);td_inner_1.appendChild(text);var select_2=document.createElement("select");if(isDevView)select_2.setAttribute("id","selectMinutes");var op_for_select_2=document.createElement("option");durMode?text=_text["minutesOption"]:text=_text["minuteOption"];op_for_select_2.innerText=text;select_2.appendChild(op_for_select_2);td_inner_1.appendChild(select_2);var span=document.createElement("span");span.innerText=_text["betweenHourAndMinute"];if(isDevView)span.setAttribute("id","between");if(durMode===false){span.style.display="none"}td_inner_1.appendChild(span);var select_3=document.createElement("select");if(isDevView)select_3.setAttribute("id","selectAmPm");var op_for_select_3=document.createElement("option");durMode?text=_text["secondsOption"]:text=_text["amPmOption"];op_for_select_3.innerText=text;select_3.appendChild(op_for_select_3);td_inner_1.appendChild(select_3);tr_inner.appendChild(td_inner_1);var td_inner_2=document.createElement("td");if(isDevView)td_inner_2.setAttribute("id","tdWatch");var img=document.createElement("img");if(isDevView)img.setAttribute("id","imgWatch");img.setAttribute("class","dateAndTime");img.src=_fieldBase._watch_png_src;if(durMode===false){td_inner_2.style.display="none"}td_inner_2.appendChild(img);tr_inner.appendChild(td_inner_2);var td_inner_3=document.createElement("td");if(isDevView)td_inner_3.setAttribute("id","tdClock");var img2=document.createElement("img");if(isDevView)img2.setAttribute("id","imgClock");img2.setAttribute("class","dateAndTime");img2.src=_fieldBase._clock_png_src;if(durMode===true){td_inner_3.style.display="none"}td_inner_3.appendChild(img2);tr_inner.appendChild(td_inner_3);table_inner.appendChild(tr_inner);td_1.appendChild(table_inner);row.appendChild(td_1);var td_2=document.createElement("TD");row.appendChild(td_2);var td_3=document.createElement("TD");row.appendChild(td_3);var td_4=document.createElement("TD");row.appendChild(td_4);var td_5=document.createElement("TD");row.appendChild(td_5);table.appendChild(row);return table}function durationCheckBoxClicked(){var _data=_dataObject.getDataItemObj();if(_data.durationMode===false){_dataObject.setDurationMode(true,_fieldBase.saveDataItem);document.getElementById("tdClock").style.display="none";document.getElementById("tdWatch").style.display="table-cell"}else{_dataObject.setDurationMode(false,_fieldBase.saveDataItem);document.getElementById("tdClock").style.display="table-cell";document.getElementById("tdWatch").style.display="none"}setOptionTexts()}function setOptionTexts(){var durMode=false;try{durMode=_dataObject.getDataItemObj().durationMode}catch(e){}var text;durMode?text=_text["hoursOption"]:text=_text["hourOption"];$("#selectHours option").text(text);durMode?text=_text["minutesOption"]:text=_text["minuteOption"];$("#selectMinutes option").text(text);durMode?text=_text["secondsOption"]:text=_text["amPmOption"];$("#selectAmPm option").text(text);if(durMode===false){document.getElementById("between").style.display="none"}else{document.getElementById("between").style.display="inline"}}function getCompletedView(){var tableTime=createTableTime(false);var div=_fieldBase.addGeneralFieldsToCompletedView("timeField",tableTime,_dataObject);return div}function getBootstrapView(orderNro){var durMode=false;try{durMode=_dataObject.getDataItemObj().durationMode}catch(e){}var input=document.createElement("input");if(durMode)input.setAttribute("type","time");else input.setAttribute("type","time");var div=_fieldBase.addGeneralFieldsToBootstrapForm("timeField",input,_dataObject,orderNro);return div}}Function.prototype.inheritsFrom=function(parentClassOrObject){if(parentClassOrObject.constructor==Function){this.prototype=new parentClassOrObject;this.prototype.constructor=this;this.prototype.parent=parentClassOrObject.prototype}else{this.prototype=parentClassOrObject;this.prototype.constructor=this;this.prototype.parent=parentClassOrObject}return this};jQuery.fn.visible=function(){return this.css("visibility","visible")};jQuery.fn.invisible=function(){return this.css("visibility","hidden")};jQuery.fn.visibilityToggle=function(){return this.css("visibility",function(i,visibility){return visibility=="visible"?"hidden":"visible"})};function DataBase(){}DataBase.prototype.callback=function(callback,data){if(callback&&typeof callback==="function"){callback(data)}};function DateData(){var _data;this.initialize=initialize;this.getDataItemObj=getDataItemObj;this.setTitle=setTitle;this.setHelpText=setHelpText;this.setRequiredQuestion=setRequiredQuestion;this.setIncludeYear=setIncludeYear;this.setIncludeTime=setIncludeTime;function initialize(type,data,callback){var title="";var helpText="";var requiredQuestion=false;if(data){!data.title?title="":title=data.title;!data.helpText?helpText="":helpText=data.helpText;data.requiredQuestion===undefined?requiredQuestion=false:requiredQuestion=data.requiredQuestion}_data={type:"dateField",title:title,helpText:helpText,requiredQuestion:requiredQuestion};if(data===undefined){_data.includeYear=true;_data.includeTime=false}else{var includeYear;data.includeYear===undefined?includeYear=true:includeYear=data.includeYear;var includeTime;data.includeTime===undefined?includeTime=false:includeTime=data.includeTime;_data.includeYear=includeYear;_data.includeTime=includeTime}this.callback(callback,_data)}function setTitle(text,callback){_data.title=text;this.callback(callback,_data)}function setHelpText(text,callback){_data.helpText=text;this.callback(callback,_data)}function setRequiredQuestion(requiredQuestion,callback){_data.requiredQuestion=requiredQuestion;this.callback(callback,_data)}function getDataItemObj(){return _data}function setIncludeYear(includeYear,callback){_data.includeYear=includeYear;this.callback(callback,_data)}function setIncludeTime(includeTime,callback){_data.includeTime=includeTime;this.callback(callback,_data)}}DateData.inheritsFrom(DataBase);function GeneralData(){this._data}GeneralData.inheritsFrom(DataBase);GeneralData.prototype.initialize=function(type,data,callback){var title="";var helpText="";var requiredQuestion="";if(data){!data.title?title="":title=data.title;!data.helpText?helpText="":helpText=data.helpText;data.requiredQuestion===undefined?requiredQuestion=false:requiredQuestion=data.requiredQuestion}_data={type:type,title:title,helpText:helpText,requiredQuestion:requiredQuestion};this.parent.callback(callback,_data)};GeneralData.prototype.getDataItemObj=function(){return _data};GeneralData.prototype.setTitle=function(text,callback){_data.title=text;this.parent.callback(callback,_data)};GeneralData.prototype.setHelpText=function(text,callback){_data.helpText=text;this.parent.callback(callback,_data)};GeneralData.prototype.setRequiredQuestion=function(requiredQuestion,callback){_data.requiredQuestion=requiredQuestion;this.parent.callback(callback,_data)};function GridData(){var _data;var _rowText="Row";var _columnText="Column";this.initialize=initialize;this.getDataItemObj=getDataItemObj;this.setTitle=setTitle;this.setHelpText=setHelpText;this.setRow=setRow;this.setRequiredQuestion=setRequiredQuestion;this.limitOneResponsePerColumn=limitOneResponsePerColumn;this.setErrorText=setErrorText;this.shuffleOrder=shuffleOrder;this.addColumn=addColumn;this.updateColumnText=updateColumnText;this.updateColumnsTextArray=updateColumnsTextArray;this.moveColumnText=moveColumnText;this.removeColumnByUsingIndex=removeColumnByUsingIndex;this.removeColumnByUsingColumnNro=removeColumnByUsingColumnNro;this.addRow=addRow;this.updateRowText=updateRowText;this.updateRowsTextArray=updateRowsTextArray;this.moveRowText=moveRowText;this.removeRowByUsingIndex=removeRowByUsingIndex;this.removeRowByUsingRowNro=removeRowByUsingRowNro;function initialize(type,data,callback){if(data===undefined){_data={type:"grid",title:"",helpText:"",columnsText:[],rowsText:[],requiredQuestion:false};var column={};column["column-1"]=_columnText+" 1";_data.columnsText.push(column);var row={};row["row-1"]=_rowText+" 1";_data.rowsText.push(row);advancedSettings={limitOneResponsePerColumn:false,errorText:"",shuffleOrder:false};_data.advancedSettings=advancedSettings}else{var title;!data.title?title="":title=data.title;var helpText;!data.helpText?helpText="":helpText=data.helpText;var requiredQuestion;data.requiredQuestion===undefined?requiredQuestion=false:requiredQuestion=data.requiredQuestion;_data={type:"grid",title:title,helpText:helpText,columnsText:[],rowsText:[],requiredQuestion:requiredQuestion};if(data.type=="grid"){_data.columnsText=data.columnsText.slice();_data.rowsText=data.rowsText.slice();var limit;data.advancedSettings.limitOneResponsePerColumn===undefined?limit="":limit=data.advancedSettings.limitOneResponsePerColumn;var errorText;data.advancedSettings.errorText===undefined?errorText="":errorText=data.advancedSettings.errorText;var shuffleOrder;data.advancedSettings.shuffleOrder===undefined?shuffleOrder=false:shuffleOrder=data.advancedSettings.shuffleOrder;advancedSettings={limitOneResponsePerColumn:limit,errorText:errorText,shuffleOrder:shuffleOrder};_data.advancedSettings=advancedSettings}else{var column={};column["column-1"]=_columnText+" 1";_data.columnsText.push(column);var row={};row["row-1"]=_rowText+" 1";_data.rowsText.push(row);advancedSettings={limitOneResponsePerColumn:false,errorText:"",shuffleOrder:false};_data.advancedSettings=advancedSettings}}this.parent.callback(callback,_data)}function getDataItemObj(){return _data}function setTitle(text,callback){_data.title=text;this.callback(callback,_data)}function setHelpText(text,callback){_data.helpText=text;this.callback(callback,_data)}function setRow(text,callback){_data.row=text;this.callback(callback,_data)}function setUseOther(useOther,callback){_data.useOther=useOther;this.callback(callback,_data)}function setRequiredQuestion(requiredQuestion,callback){_data.requiredQuestion=requiredQuestion;this.callback(callback,_data)}function limitOneResponsePerColumn(value,callback){_data.advancedSettings.limitOneResponsePerColumn=value;this.callback(callback,_data)}function setErrorText(text,callback){_data.advancedSettings.errorText=text;this.callback(callback,_data)}function shuffleOrder(value,callback){_data.advancedSettings.shuffleOrder=value;this.callback(callback,_data)}function addColumn(columnText,callback){var size=_data.columnsText.length;var columnNumber=size+1;var column={};column["column-"+columnNumber]=columnText;_data.columnsText.push(column);this.callback(callback,_data)}function updateColumnText(rowNumber,value,callback){var columnKey="column-"+rowNumber;_data.columnsText[rowNumber-1][columnKey]=value;this.callback(callback,_data)}function updateColumnsTextArray(from,to){from=parseInt(from);to=parseInt(to);if(from<to){while(from<to){var copyValue=_data.columnsText[from+1]["column-"+(from+2)];var columnKey="column-"+(from+2);_data.columnsText[from+1][columnKey]=_data.columnsText[from]["column-"+(from+1)];var columnKey2="column-"+(from+1);var column2={};column2[columnKey2]=copyValue;_data.columnsText[from][columnKey2]=copyValue;from=from+1}}else if(from>to){while(from>to){var copyValue=_data.columnsText[from-1]["column-"+from];var columnKey="column-"+from;var column={};_data.columnsText[from-1][columnKey]=_data.columnsText[from]["column-"+(from+1)];var columnKey2="column-"+(from+1);var column2={};_data.columnsText[from][columnKey2]=copyValue;from=from-1}}}function getValue(text){var indexOf=text.indexOf('":"')+3;text=text.substr(indexOf);text=text.substr(0,text.length-2);return text}function moveColumnText(from,to,callback){this.updateColumnsTextArray(from,to);this.callback(callback,_data)}function removeColumnByUsingIndex(index,callback){_data.columnsText.splice(index,1);this.callback(callback,_data)}function removeColumnByUsingColumnNro(colNro,callback){this.moveColumnText(colNro-1,_data.columnsText.length-1);_data.columnsText.splice(_data.columnsText.length-1,1);this.callback(callback,_data)}function addRow(rowText,callback){var size=_data.rowsText.length;var rowNumber=size+1;var row={};row["row-"+rowNumber]=rowText;_data.rowsText.push(row);this.callback(callback,_data)}function updateRowText(rowNumber,value,callback){var rowKey="row-"+rowNumber;_data.rowsText[rowNumber-1][rowKey]=value;this.callback(callback,_data)}function updateRowsTextArray(from,to){from=parseInt(from);to=parseInt(to);if(from<to){while(from<to){var copyValue=_data.rowsText[from+1]["row-"+(from+2)];var rowKey="row-"+(from+2);_data.rowsText[from+1][rowKey]=_data.rowsText[from]["row-"+(from+1)];var rowKey2="row-"+(from+1);var row2={};row2[rowKey2]=copyValue;_data.rowsText[from][rowKey2]=copyValue;from=from+1}}else if(from>to){while(from>to){var copyValue=_data.rowsText[from-1]["row-"+from];var rowKey="row-"+from;_data.rowsText[from-1][rowKey]=_data.rowsText[from]["row-"+(from+1)];var rowKey2="row-"+(from+1);_data.rowsText[from][rowKey2]=copyValue;from=from-1}}}function moveRowText(from,to,callback){this.updateRowsTextArray(from,to);this.callback(callback,_data)}function removeRowByUsingIndex(index,callback){_data.rowsText.splice(index,1);this.callback(callback,_data)}function removeRowByUsingRowNro(rowNro,callback){this.moveRowText(rowNro-1,_data.rowsText.length-1);_data.rowsText.splice(_data.rowsText.length-1,1);this.callback(callback,_data)}}GridData.inheritsFrom(DataBase);function HeaderData(){var _data;this.initialize=initialize;this.getDataItemObj=getDataItemObj;this.setHeaderText=setHeaderText;this.setDescriptionText=setDescriptionText;function initialize(type,data,callback){var headerText="";var descriptionText="";if(data){data.headerText===undefined?headerText="":headerText=data.headerText;data.descriptionText===undefined?descriptionText="":descriptionText=data.descriptionText}_data={type:type,headerText:headerText,descriptionText:descriptionText};this.callback(callback,_data)}function getDataItemObj(){return _data}function setHeaderText(text,callback){_data.headerText=text;this.parent.callback(callback,_data)}function setDescriptionText(text,callback){_data.descriptionText=text;this.parent.callback(callback,_data)}}HeaderData.inheritsFrom(DataBase);function MultiChoiceData(){var _data;this.initialize=initialize;this.getDataItemObj=getDataItemObj;this.setTitle=setTitle;this.setHelpText=setHelpText;this.setRequiredQuestion=setRequiredQuestion;this.addOption=addOption;this.updateOptionText=updateOptionText;this.updateOptionsTextArray=updateOptionsTextArray;this.moveOptionText=moveOptionText;this.removeOptionByUsingIndex=removeOptionByUsingIndex;this.removeOptionByUsingOptionNro=removeOptionByUsingOptionNro;this.setUseOther=setUseOther;this.setDataValidation=setDataValidation;this.setCheckBoxValidationType=setCheckBoxValidationType;this.checkBoxValidationCheckCount=checkBoxValidationCheckCount;this.setErrorText=setErrorText;this.shuffleOrder=shuffleOrder;var _optionText="Option";function initialize(type,data,callback){if(data===undefined){_data={type:type,title:"",helpText:"",optionsText:[],requiredQuestion:false};var optionNumber=1;var option={};option["option-1"]=_optionText+" 1";_data.optionsText.push(option)}else{var title;!data.title?title="":title=data.title;var helpText;!data.helpText?helpText="":helpText=data.helpText;var requiredQuestion;data.requiredQuestion===undefined?requiredQuestion=false:requiredQuestion=data.requiredQuestion;_data={type:type,title:title,helpText:helpText,optionsText:[],requiredQuestion:requiredQuestion};if(data.type=="radioButton"||data.type=="checkBox"||data.type=="list"){_data.optionsText=data.optionsText.slice()}else{var option={};option["option-1"]=_optionText+" 1";_data.optionsText.push(option)}}if(type=="radioButton"||type=="checkBox"){if(data===undefined){_data.useOther=false}else{var useOther;data.useOther===undefined?useOther=false:useOther=data.useOther;_data.useOther=useOther}}var advSettingsUndefined=false;try{data.advancedSettings.shuffleOrder.length;if(data.type=="grid"){advSettingsUndefined=true}}catch(e){advSettingsUndefined=true}var advancedSettings;if(advSettingsUndefined){if(type=="radioButton"||type=="list"){advancedSettings={shuffleOrder:false}}else{advancedSettings={dataValidation:false,checkBoxValidation:{type:"",checkCount:""},errorText:"",shuffleOrder:false}}}else{var shuffleOrder;data.advancedSettings.shuffleOrder===undefined?shuffleOrder=false:shuffleOrder=data.advancedSettings.shuffleOrder;if(type=="radioButton"||type=="list"){advancedSettings={shuffleOrder:shuffleOrder}}else{var advCheckBoxSettingsUndefined=false;try{data.advancedSettings.checkBoxValidation.length}catch(e){advCheckBoxSettingsUndefined=true}if(advCheckBoxSettingsUndefined){advancedSettings={dataValidation:false,checkBoxValidation:{type:"",checkCount:""},errorText:"",shuffleOrder:shuffleOrder}}else{var dataValidation;data.advancedSettings.dataValidation===undefined?dataValidation=false:dataValidation=data.advancedSettings.dataValidation;var checkBoxValidation="";var type="";var checkCount="";data.advancedSettings.checkBoxValidation===undefined?checkBoxValidation="":checkBoxValidation=data.advancedSettings.checkBoxValidation;data.advancedSettings.checkBoxValidation.type===undefined?type="":type=data.advancedSettings.checkBoxValidation.type;data.advancedSettings.checkBoxValidation.checkCount===undefined?checkCount="":checkCount=data.advancedSettings.checkBoxValidation.checkCount;var errorText;data.advancedSettings.errorText===undefined?errorText="":errorText=data.advancedSettings.errorText;advancedSettings={dataValidation:dataValidation,checkBoxValidation:{type:type,checkCount:checkCount},errorText:errorText,shuffleOrder:shuffleOrder}}}}_data.advancedSettings=advancedSettings;this.callback(callback,_data)}function getDataItemObj(){return _data}function setTitle(text,callback){_data.title=text;this.callback(callback,_data)}function setHelpText(text,callback){_data.helpText=text;this.callback(callback,_data)}function setRequiredQuestion(requiredQuestion,callback){_data.requiredQuestion=requiredQuestion;this.callback(callback,_data)}function addOption(optionText,callback){var size=_data.optionsText.length;var optionNumber=size+1;var option={};option["option-"+optionNumber]=optionText;_data.optionsText.push(option);this.callback(callback,_data)}function updateOptionText(rowNumber,value,callback){var optionKey="option-"+rowNumber;_data.optionsText[rowNumber-1][optionKey]=value;this.callback(callback,_data)}function updateOptionsTextArray(from,to){from=parseInt(from);to=parseInt(to);if(from<to){while(from<to){var copyValue=_data.optionsText[from+1]["option-"+(from+2)];var optionKey="option-"+(from+2);_data.optionsText[from+1][optionKey]=_data.optionsText[from]["option-"+(from+1)];var optionKey2="option-"+(from+1);var option2={};option2[optionKey2]=copyValue;_data.optionsText[from][optionKey2]=copyValue;from=from+1}}else if(from>to){while(from>to){var copyValue=_data.optionsText[from-1]["option-"+from];var optionKey="option-"+from;_data.optionsText[from-1][optionKey]=_data.optionsText[from]["option-"+(from+1)];var optionKey2="option-"+(from+1);_data.optionsText[from][optionKey2]=copyValue;from=from-1}}}function getValue(text){var indexOf=text.indexOf('":"')+3;text=text.substr(indexOf);text=text.substr(0,text.length-2);return text}function moveOptionText(from,to,callback){this.updateOptionsTextArray(from,to);this.callback(callback,_data)}function removeOptionByUsingIndex(index,callback){_data.optionsText.splice(index,1);this.callback(callback,_data)}function removeOptionByUsingOptionNro(optionNro,callback){this.moveOptionText(optionNro-1,_data.optionsText.length-1);_data.optionsText.splice(_data.optionsText.length-1,1);this.callback(callback,_data)}function setUseOther(useOther,callback){_data.useOther=useOther;this.callback(callback,_data)}function setDataValidation(use,callback){_data.advancedSettings.dataValidation=use;this.callback(callback,_data)}function setCheckBoxValidationType(type,callback){_data.advancedSettings.checkBoxValidation.type=type;this.callback(callback,_data)}function checkBoxValidationCheckCount(checkCount,callback){_data.advancedSettings.checkBoxValidation.checkCount=checkCount;this.callback(callback,_data)}function shuffleOrder(text,callback){_data.advancedSettings.shuffleOrder=text;this.callback(callback,_data)}function setErrorText(text,callback){_data.advancedSettings.errorText=text;this.callback(callback,_data)}}MultiChoiceData.inheritsFrom(DataBase);function ParagraphFieldData(){var _data;this.initialize=initialize;this.getDataItemObj=getDataItemObj;this.setTitle=setTitle;this.setHelpText=setHelpText;this.setRequiredQuestion=setRequiredQuestion;this.setDataValidation=setDataValidation;this.setValidationType=setValidationType;this.setTextValidationType=setTextValidationType;this.setTextValidationCharCount=setTextValidationCharCount;this.setRegExpValidationType=setRegExpValidationType;this.setRegExpValidationPattern=setRegExpValidationPattern;this.setErrorText=setErrorText;function initialize(type,data,callback){var title="";var helpText="";var requiredQuestion=false;if(data){!data.title?title="":title=data.title;!data.helpText?helpText="":helpText=data.helpText;data.requiredQuestion===undefined?requiredQuestion=false:requiredQuestion=data.requiredQuestion}_data={type:"paragraphField",title:title,helpText:helpText,requiredQuestion:requiredQuestion};var advSettingsUndefined=false;try{data.advancedSettings;data.advancedSettings.validationType.length;if(data.type!=="paragraphField"){advSettingsUndefined=true}}catch(e){advSettingsUndefined=true}if(advSettingsUndefined){var advancedSettings={dataValidation:false,validationType:"",textValidation:{type:"",charCount:""},regExpValidation:{type:"",pattern:""},errorText:""}}else{var dataValidation;data.advancedSettings.dataValidation===undefined?dataValidation=false:dataValidation=data.advancedSettings.dataValidation;var validationType;data.advancedSettings.validationType===undefined?validationType="":validationType=data.advancedSettings.validationType;var textValidation="";var textType="";var charCount="";data.advancedSettings.textValidation===undefined?textValidation="":textValidation=data.advancedSettings.textValidation;data.advancedSettings.textValidation.type===undefined?textType="":textType=data.advancedSettings.textValidation.type;data.advancedSettings.textValidation.charCount===undefined?charCount="":charCount=data.advancedSettings.textValidation.charCount;var regExpValidation="";var regExpType="";var pattern="";data.advancedSettings.regExpValidation===undefined?regExpValidation="":regExpValidation=data.advancedSettings.regExpValidation;data.advancedSettings.regExpValidation.type===undefined?regExpType="":regExpType=data.advancedSettings.regExpValidation.type;data.advancedSettings.regExpValidation.pattern===undefined?pattern="":pattern=data.advancedSettings.regExpValidation.pattern;var errorText;data.advancedSettings.errorText===undefined?errorText="":errorText=data.advancedSettings.errorText;var advancedSettings={dataValidation:dataValidation,validationType:validationType,textValidation:{type:textType,charCount:charCount},regExpValidation:{type:regExpType,pattern:pattern},errorText:errorText}}_data.advancedSettings=advancedSettings;this.callback(callback,_data)}function getDataItemObj(){return _data}function setTitle(text,callback){_data.title=text;this.callback(callback,_data)}function setHelpText(text,callback){_data.helpText=text;this.callback(callback,_data)}function setRequiredQuestion(requiredQuestion,callback){_data.requiredQuestion=requiredQuestion;this.callback(callback,_data)}function setDataValidation(use,callback){_data.advancedSettings.dataValidation=use;this.callback(callback,_data)}function setValidationType(type,callback){_data.advancedSettings.validationType=type;this.callback(callback,_data)}function setTextValidationType(type,callback){_data.advancedSettings.textValidation.type=type;this.callback(callback,_data)}function setTextValidationCharCount(charCount,callback){_data.advancedSettings.textValidation.charCount=charCount;this.callback(callback,_data)}function setRegExpValidationType(type,callback){_data.advancedSettings.regExpValidation.type=type;this.callback(callback,_data)}function setRegExpValidationPattern(pattern,callback){_data.advancedSettings.regExpValidation.pattern=pattern;this.callback(callback,_data)}function setErrorText(text,callback){_data.advancedSettings.errorText=text;this.callback(callback,_data)}}ParagraphFieldData.inheritsFrom(DataBase);function ScaleData(){var _data;this.initialize=initialize;this.getDataItemObj=getDataItemObj;this.setTitle=setTitle;this.setHelpText=setHelpText;this.setRequiredQuestion=setRequiredQuestion;this.setFrom=setFrom;this.setTo=setTo;this.setFromLabel=setFromLabel;this.setToLabel=setToLabel;function initialize(type,data,callback){var title="";var helpText="";var requiredQuestion=false;if(data){!data.title?title="":title=data.title;!data.helpText?helpText="":helpText=data.helpText;data.requiredQuestion===undefined?requiredQuestion=false:requiredQuestion=data.requiredQuestion}_data={type:"scaleField",title:title,helpText:helpText,requiredQuestion:requiredQuestion};if(data===undefined){_data.from=1;_data.to=5;_data.fromLabel="";_data.toLabel=""}else{var from;data.from===undefined?from=1:from=data.from;var to;data.to===undefined?to=5:to=data.to;var fromLabel;data.fromLabel===undefined?fromLabel="":fromLabel=data.fromLabel;var toLabel;data.toLabel===undefined?toLabel="":toLabel=data.toLabel;_data.from=from;_data.to=to;_data.fromLabel=fromLabel;_data.toLabel=toLabel}this.callback(callback,_data)}function getDataItemObj(){return _data}function setTitle(text,callback){_data.title=text;this.callback(callback,_data)}function setHelpText(text,callback){_data.helpText=text;this.callback(callback,_data)}function setRequiredQuestion(requiredQuestion,callback){_data.requiredQuestion=requiredQuestion;this.callback(callback,_data)}function setFrom(from,callback){_data.from=from;this.callback(callback,_data)}function setTo(to,callback){_data.to=to;this.callback(callback,_data)}function setFromLabel(label,callback){_data.fromLabel=label;this.callback(callback,_data)}function setToLabel(label,callback){_data.toLabel=label;this.callback(callback,_data)}}ScaleData.inheritsFrom(DataBase);function TextFieldData(){var _data;this.initialize=initialize;this.getDataItemObj=getDataItemObj;this.setTitle=setTitle;this.setHelpText=setHelpText;this.setRequiredQuestion=setRequiredQuestion;this.setDataValidation=setDataValidation;this.setValidationType=setValidationType;this.setNumberValidationType=setNumberValidationType;this.setNumberValidationNumber=setNumberValidationNumber;this.setNumberValidationNumber_2nd=setNumberValidationNumber_2nd;this.setTextValidationType=setTextValidationType;this.setTextValidationText=setTextValidationText;this.setRegExpValidationType=setRegExpValidationType;this.setRegExpValidationPattern=setRegExpValidationPattern;this.setErrorText=setErrorText;function initialize(type,data,callback){var title="";var helpText="";var requiredQuestion=false;if(data){!data.title?title="":title=data.title;!data.helpText?helpText="":helpText=data.helpText;data.requiredQuestion===undefined?requiredQuestion=false:requiredQuestion=data.requiredQuestion}_data={type:"textField",title:title,helpText:helpText,requiredQuestion:requiredQuestion};var advSettingsUndefined=false;try{data.advancedSettings;data.advancedSettings.validationType.length;if(data.type!=="textField"){advSettingsUndefined=true}}catch(e){advSettingsUndefined=true}if(advSettingsUndefined){var advancedSettings={dataValidation:false,validationType:"",numberValidation:{type:"",number:"",number_2nd:""},textValidation:{type:"",text:""},regExpValidation:{type:"",pattern:""},errorText:""}}else{var dataValidation;data.advancedSettings.dataValidation===undefined?dataValidation=false:dataValidation=data.advancedSettings.dataValidation;var validationType;data.advancedSettings.validationType===undefined?validationType="":validationType=data.advancedSettings.validationType;var numberValidation="";var numberType="";var number="";var number_2nd="";data.advancedSettings.numberValidation===undefined?numberValidation="":numberValidation=data.advancedSettings.numberValidation;data.advancedSettings.numberValidation.type===undefined?numberType="":numberType=data.advancedSettings.numberValidation.type;data.advancedSettings.numberValidation.number===undefined?number="":number=data.advancedSettings.numberValidation.number;data.advancedSettings.numberValidation.number_2nd===undefined?number_2nd="":number_2nd=data.advancedSettings.numberValidation.number_2nd;var textValidation="";var textType="";var text="";data.advancedSettings.textValidation===undefined?textValidation="":textValidation=data.advancedSettings.textValidation;data.advancedSettings.textValidation.type===undefined?textType="":textType=data.advancedSettings.textValidation.type;data.advancedSettings.textValidation.text===undefined?text="":text=data.advancedSettings.textValidation.text;var regExpValidation="";var regExpType="";var pattern="";data.advancedSettings.regExpValidation===undefined?regExpValidation="":regExpValidation=data.advancedSettings.regExpValidation;data.advancedSettings.regExpValidation.type===undefined?regExpType="":regExpType=data.advancedSettings.regExpValidation.type;data.advancedSettings.regExpValidation.pattern===undefined?pattern="":pattern=data.advancedSettings.regExpValidation.pattern;var errorText;data.advancedSettings.errorText===undefined?errorText="":errorText=data.advancedSettings.errorText;var advancedSettings={dataValidation:dataValidation,validationType:validationType,numberValidation:{type:numberType,number:number,number_2nd:number_2nd},textValidation:{type:textType,text:text},regExpValidation:{type:regExpType,pattern:pattern},errorText:errorText}}_data.advancedSettings=advancedSettings;this.callback(callback,_data)}function getDataItemObj(){return _data}function setTitle(text,callback){_data.title=text;this.callback(callback,_data)}function setHelpText(text,callback){_data.helpText=text;this.callback(callback,_data)}function setRequiredQuestion(requiredQuestion,callback){_data.requiredQuestion=requiredQuestion;this.callback(callback,_data)}function setDataValidation(use,callback){_data.advancedSettings.dataValidation=use;this.callback(callback,_data)}function setValidationType(type,callback){_data.advancedSettings.validationType=type;this.callback(callback,_data)}function setNumberValidationType(type,callback){_data.advancedSettings.numberValidation.type=type;this.callback(callback,_data)}function setNumberValidationNumber(number,callback){_data.advancedSettings.numberValidation.number=number;this.callback(callback,_data)}function setNumberValidationNumber_2nd(number,callback){_data.advancedSettings.numberValidation.number_2nd=number;this.callback(callback,_data)}function setTextValidationType(type,callback){_data.advancedSettings.textValidation.type=type;
this.callback(callback,_data)}function setTextValidationText(text,callback){_data.advancedSettings.textValidation.text=text;this.callback(callback,_data)}function setRegExpValidationType(type,callback){_data.advancedSettings.regExpValidation.type=type;this.callback(callback,_data)}function setRegExpValidationPattern(pattern,callback){_data.advancedSettings.regExpValidation.pattern=pattern;this.callback(callback,_data)}function setErrorText(text,callback){_data.advancedSettings.errorText=text;this.callback(callback,_data)}}TextFieldData.inheritsFrom(DataBase);function TimeData(){var _data;this.initialize=initialize;this.getDataItemObj=getDataItemObj;this.setTitle=setTitle;this.setHelpText=setHelpText;this.setRequiredQuestion=setRequiredQuestion;this.setDurationMode=setDurationMode;function initialize(type,data,callback){var title="";var helpText="";var requiredQuestion=false;if(data){!data.title?title="":title=data.title;!data.helpText?helpText="":helpText=data.helpText;data.requiredQuestion===undefined?requiredQuestion=false:requiredQuestion=data.requiredQuestion}_data={type:"timeField",title:title,helpText:helpText,requiredQuestion:requiredQuestion};if(data===undefined){_data.durationMode=false}else{var durationMode=false;data.durationMode===undefined?durationMode=false:durationMode=data.durationMode;_data.durationMode=durationMode}this.callback(callback,_data)}function setTitle(text,callback){_data.title=text;this.callback(callback,_data)}function setHelpText(text,callback){_data.helpText=text;this.callback(callback,_data)}function setRequiredQuestion(requiredQuestion,callback){_data.requiredQuestion=requiredQuestion;this.callback(callback,_data)}function getDataItemObj(){return _data}function setDurationMode(durationMode,callback){_data.durationMode=durationMode;this.callback(callback,_data)}}TimeData.inheritsFrom(DataBase);