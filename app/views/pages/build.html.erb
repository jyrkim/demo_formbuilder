

<%= stylesheet_link_tag asset_path('formBuilder.min-f8e92969703bcdb9169496569a64b4f0.css') %>

<%= stylesheet_link_tag asset_path('jquery-ui-1.11.0.css') %>

<%= stylesheet_link_tag asset_path('jquery-ui-1.11.0.theme-836869170655975cc3365fdc15be2f8f.css') %>

<%= stylesheet_link_tag 'pages.css.scss' %>




<br> <br> <br>
    <div class="formBuilder"></div>
 

    <br> <br> 
    <!-- button hyperlink below is used for demo purposes  
    <div class="buttonContainer">           </div> 
      <a target="_blank" href="DemoForm.html" class="myButton" style="display:none">View form</a>  -->


    <%= link_to "View form", demoform_path, class: "myButton", style: "display:none", target: "_blank" %>  


<script>

    $(document).ready(function () {

        $('.myButton').click(function (event) {
          /*  event.preventDefault();*/

            var dataItems = [];

            var fb = new FormBuilder();

            new FieldBase().saveDataItemsToLocalStorage(JSON.stringify(fb.getFormData()));

            /* var myWindow = window.open("DemoForm.html", "_blank"); */

        });

        $(document).on("click", '.fieldMenuItem', handler);
    });

    function handler() {

        setTimeout(checkWhenToSetVisible, 100);
    }

    function checkWhenToSetVisible() {


        if ($('.formBuilder[data-state]').length > 2) {

            var left = $('.formBuilder :first-child').offset().left;

            var newMargin = (left + 640) + "px";

            $('.myButton').css("margin-left", newMargin);

            $('.myButton').css("display", "inline");

            $(document).off("click", '.fieldMenuItem', handler);

        }

    } 

</script>
